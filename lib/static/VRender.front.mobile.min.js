!function(){if(!window.VRender){var l=window.VRender=function(){};l.$=$,l.ENV={},l.event_defined="vrender_defined",l.event_statepush="vrender_statepush",l.event_statereplace="vrender_statereplace",l.event_statepop="vrender_statepop",l.event_routerbefore="vrender_router_before";var n=!(l.event_routerchange="vrender_router_change"),s={},r={},a={},o=[],d=0,c=l.Utils=function(){};window.define=function(t,e,i){c.isFunction(t)?(i=t,e=t=null):c.isArray(t)?(i=e,e=t,t=null):c.isFunction(e)&&(i=e,e=null),c.isFunction(i)&&(c.isBlank(t)&&(t=c.randomTxt(32)),h(t)?c.isFunction(s[t])&&s[t]($,l,c):n?u(t,i,e):a[t]={definition:i,deps:e})};var u=function(t,e,i){i=c.toArray(i);var n=function(){c.isFunction(e)&&(e=e($,l,c)||e),s[t]=e,l.trigger(l.event_defined,t,e)};if(0<i.length){var a=function(){return!c.find(i,function(t){return!h(t)})};a()?n():l.on(l.event_defined,function(){a()&&(l.off(l.event_defined,arguments.callee),n())})}else n()},h=function(t){return s.hasOwnProperty(t)};window.requirejs=function(i,n){if(s.hasOwnProperty(i))return c.isFunction(n)&&n(s[i]),s[i];l.on(l.event_defined,function(t,e){i===t&&(l.off(l.event_defined,arguments.callee),c.isFunction(n)&&n(e))})},l.navigate=function(t,e){if(c.isNotBlank(t)){var i={router:t,replace:!1,trigger:!0,animate:!1};e&&(i=$.extend(i,e));var n={type:l.event_routerbefore};l.trigger(n,i),!0!==n.isPreventDefault&&(c.isTrue(i.replace)?window.location.replace(t):window.location=t)}},l.require=function(t,a){c.isFunction(a)&&(c.isBlank(t)?a(!1,null):m(t,null,function(t,e,i,n){a(i,n)}))},l.fetch=function(t,e,i,n){p("GET",t,e,i,n)},l.post=function(t,e,i,n){p("POST",t,e,i,n)};var p=function(t,e,i,n,a){if(c.isFunction(i)&&(a=n,n=i,i=null),c.isFunction(n)||(n=function(){}),c.isBlank(e))return n("服务请求失败：url不能为空"),!1;if(c.isNotBlank(i)){var s={};for(var r in i)c.isNotNull(i[r])&&(s[r]=i[r]);i=s}return/^(\/|http)/.test(e)||(e="/api?n="+e,i=c.isBlank(i)?null:{data:JSON.stringify(i)},t="POST"),"GET"===t&&c.isNotBlank(i)&&(e+=(e.indexOf("?")<0?"?":"&")+$.param(i),i=null),$.ajax({type:t,cache:!1,url:e,dataType:"json",data:i,success:function(t){if(t&&t.hasOwnProperty("code"))if(0===t.code)n(!1,t.data);else{console.error(t);var e=t.hasOwnProperty("msg")?t.msg:t;!a&&c.isFunction(l.onAjaxError)&&l.onAjaxError(e||""),n(e||!0,t)}else n(!1,t)},error:function(t){var e=t.responseText||!0;if(401===t.status)e="请登录";else if(404===t.status)e="请求错误，请稍候重试..";else if(500===t.status){try{e=JSON.parse(e)}catch(t){}e="服务器错误，请重试. "+(e&&e.hasOwnProperty("msg")?e.msg:e)}!a&&c.isFunction(l.onAjaxError)&&l.onAjaxError(e,t),n(e)}})};l.load=function(i,t,a){if(c.isNull(t)&&c.isNull(a)&&(t=i,i=null),c.isFunction(t)&&(a=t,t=i,i=null),i&&"string"==typeof i&&(i=$(i)),0===(t=c.toArray(t)).length)c.isFunction(a)&&a(null);else{var s=t.length,r=[],n=function(t,e,i,n){!i&&n&&c.pushAll(r,n),(s-=1)<=0&&c.isFunction(a)&&a(r)};c.each(t,function(t){if("string"==typeof t&&(t={uri:t}),c.isBlank(t.uri))n();else{var e=t.uri.toLowerCase();/\.js$/.test(e)?f(t.uri,t.attributes,n):/\.css$/.test(e)?g(i,t.uri,t.attributes,n):m(t.uri,t.attributes,n)}})}};var f=function(n,a){$.getScript(n).done(function(t){if(c.isFunction(a)){var e=[];if(t){var i=t.match(/define\(["'][\w-]+["']\)/g);c.each(i,function(t){t=t.substring(8,t.length-1),s.hasOwnProperty(t)&&e.push(s[t])})}a(n,"js",!1,e)}}).fail(function(t){console.error("js load error",t.responseText||t),c.isFunction(l.onAjaxError)&&l.onAjaxError("js load error",t),c.isFunction(a)&&a(n,"js",t)})},g=function(t,e,i,n){var a=r[e];if(!a){var s=$("<link href='"+e+"' rel='stylesheet' type='text/css'>").appendTo("head");a=r[e]={$el:s}}i&&a.$el.attr(i),t&&(c.isArray(a.views)||(a.views=[]),a.views.push(t)),c.isFunction(n)&&n(e,"css")},m=function(e,t,i){c.isNotBlank(e)&&c.isFunction(i)?$.ajax({type:"GET",cache:!1,url:e,data:t,success:function(t){i(e,"html",!1,t)},error:function(t){console.error("html load error",t.responseText||t),c.isFunction(l.onAjaxError)&&l.onAjaxError("html load error",t),i(e,"html",t,null)}}):c.isFunction(i)&&i(e,"html",!1,null)};l.cache=function(t,e){return c.isBlank(t)?null:null===e?($.jStorage.deleteKey(t),null):(void 0!==e&&$.jStorage.set(t,e),$.jStorage.get(t))},l.trigger=function(t,e){l.emitter&&l.emitter.trigger(t,e)},l.on=function(t,e,i){!l.emitter&&l.EventEmitter&&(l.emitter=new l.EventEmitter),l.emitter&&l.emitter.on(t,e,i)},l.one=function(t,e,i){!l.emitter&&l.EventEmitter&&(l.emitter=new l.EventEmitter),l.emitter&&l.emitter.one(t,e,i)},l.off=function(t,e){l.emitter&&l.emitter.off(t,e)},l.onenter=function(t,e,i){if(c.isFunction(e)&&(i=e,e=null),t=$(t),c.isFunction(i)){var n=function(t){13===t.which&&i()};c.isBlank(e)?t.on("keydown",n):t.on("keydown",e,n)}else t.off("keydown",e)},l.onInputChange=function(t,n){var e=$(t);if(e.is("input, textarea")||(e=e.find("input, textarea")),c.isFunction(n)){e.on("focusin",function(t){var e=$(t.currentTarget),i=e.data("vrender-inputchange");i&&i.timer&&clearInterval(i.timer),(i={lastValue:e.val()}).timer=setInterval(function(){a(e,i)},100),e.data("vrender-inputchange",i)}),e.on("focusout",function(t){var e=$(t.currentTarget),i=e.data("vrender-inputchange");i&&i.timer&&clearInterval(i.timer),e.removeData("vrender-inputchange"),a(e,i)});var a=function(t,e){var i=t.val();i!=e.lastValue&&(e.lastValue=i,c.isFunction(n)&&n(t,i))}}else e.off("focusin"),e.off("focusout")},l.scheduleTask=function(t,e){if(!c.isBlank(t)){if(c.isFunction(e)){var i=c.findBy(o,"name",t);i?i.task=e:o.push({name:t,task:e})}else c.removeBy(o,"name",t);0===o.length?(d&&clearInterval(d),d=0):d||(d=setInterval(function(){c.each(o,function(t){t.task()})},400))}};var i=function(){for(var t in r){var e=r[t];if(c.isArray(e.views)){for(var i=e.views.length-1;0<=i;i--)c.isDomExist(e.views[i])||e.views.splice(i,1);0===e.views.length&&(e.$el.remove(),delete r[t])}}};l.plugins={};var v=l.Component=function(){};v.bindName="vrender-component",v.VIEWID=Date.now(),v.registerList=[],v.dataAdapter=function(t){return t},v.errorHandler=function(t){console.error(t)},v.register=function(t,e){c.isNotBlank(t)&&c.isFunction(e)&&v.registerList.push({s:t,fun:e})},v.build=function(t){if(c.isBlank(t))return[];if(!(t=$(t))||0===t.length)return[];var n=[];return c.each(v.registerList,function(i){t.find(i.s).each(function(){var t=$(this),e=t.data(v.bindName);e||(e=new i.fun(t)),n.push(e)})}),n},v.get=function(t){return $(t).data(v.bindName)},v.find=function(t,e,i){return(t=$(t))&&0!==t.length?c.isBlank(e)?v.build(t):c.map(t.find(e),function(t){return c.isFunction(i)?new i(t):v.get(t)}):[]},v.create=function(t,e,i){var n=(t=$.extend({},t)).tagName||t.tag||"div";(n=/img|input|br/.test(n)?$("<"+n+"/>"):$("<"+n+"></"+n+">")).attr("id",c.trimToNull(t.id)),n.attr("name",c.trimToNull(t.name)),n.attr("vid","0"+v.VIEWID++),c.isNotBlank(t.clsName)&&n.addClass(t.clsName),c.isNotBlank(t.style)&&n.addClass(t.style),t.target&&n.appendTo(t.target);var a=i&&new i(t);a&&c.isFunction(a.render)&&a.render($,n);var s=c.getFormatSize(t.width,l.ENV.useRem),r=c.getFormatSize(t.height,l.ENV.useRem);if(c.isFunction(e)){var o=new e(n,t,a);!s||c.isFunction(o.isWidthEnabled)&&!o.isWidthEnabled()||n.css("width",s),!r||c.isFunction(o.isHeightEnabled)&&!o.isHeightEnabled()||n.css("height",r),n=o}else s&&n.css("width",s),r&&n.css("height",r);return n},v.load=function(t,i,n){if(c.isBlank(t))return v.errorHandler("组件试图加载数据错误：api不能为空"),!1;i=$.extend({},i),this.lastLoadApi=t,this.lastLoadParams=i;var a=this._pageInfo={};return l.fetch(t,i,function(t,e){t||((e=v.dataAdapter(e))&&c.isArray(e)&&(e={total:e.length,data:e}),a.total=Math.max(0,parseInt(e&&e.total))||0,e=e&&e.hasOwnProperty("data")?e.data:e),a.page=parseInt(i.p_no)||1,a.size=parseInt(i.p_size)||20,c.isFunction(n)&&n(t,e)}),!0},l.$ref=function(t){var e=$("[ref='"+t+"']");return e&&0<e.length?(1<e.length&&(e=e.eq(0)),v.get(e)||e):null},window.$vr=l,window.$ref=l.$ref,$.ajaxSetup({cache:!0}),$(function(){for(var t in n=!0,v.isMobile=c.getUAState(navigator.userAgent).isMobile,a){var e=a[t];u(t,e.definition,e.deps)}a=[],l.scheduleTask("VRender.cssfilemonitor",i)})}}(),function(){VRender.ENV.isApp=!0,VRender.ENV.useRem=document.documentElement.hasAttribute("data-dpr");VRender.ENV.useRem&&function(){var e=parseInt(window.devicePixelRatio)||1,t=1/(e=Math.min(e,2)),i="width="+document.documentElement.clientWidth*e+",initial-scale="+t+",maximum-scale="+t+",minimum-scale="+t+",user-scalable=no";$("meta[name='viewport']").attr("content",i);var n=$("html").attr("data-dpr",e);$(window).resize(function(){var t=document.documentElement.clientWidth*e*100/(parseInt(n.attr("data-mw"))||640);n.attr("data-fs",t),n.css("fontSize",t+"px")}).resize()}(),$(function(){VRender.ENV.isIphone=document.body.hasAttribute("iphone")})}(),function(s){var r=s?VRender.Utils:exports;r.each=function(t,e){if(o(e)&&t&&0<t.length)for(var i=o(t.eq),n=0,a=t.length;n<a;n++){if(!1===e(i?t.eq(n):t[n],n))break}},r.filter=function(t,e){var i=[];if(o(e)&&t&&0<t.length)for(var n=o(t.eq),a=0,s=t.length;a<s;a++){var r=n?t.eq(a):t[a];e(r,a)&&i.push(r)}return i},r.filterBy=function(t,i,n){return i?r.filter(t,function(t,e){return t&&t[i]==n}):[]},r.find=function(t,e){if(o(e)&&t&&0<t.length)for(var i=o(t.eq),n=0,a=t.length;n<a;n++){var s=i?t.eq(n):t[n];if(e(s,n))return s}return null},r.findBy=function(t,i,n){return i?r.find(t,function(t,e){return t&&t[i]==n}):null},r.index=function(t,e){if(o(e)&&t&&0<t.length)for(var i=o(t.eq),n=0,a=t.length;n<a;n++){if(e(i?t.eq(n):t[n],n))return n}return-1},r.indexBy=function(t,i,n){return i?r.index(t,function(t,e){return t&&t[i]==n}):-1},r.isArray=function(t){return t&&t instanceof Array},r.map=function(t,e){var i=[];if(o(e))if(r.isArray(t))for(var n=0,a=t.length;n<a;n++)i.push(e(t[n],n));else if(s&&t instanceof $)for(n=0,a=t.length;n<a;n++)i.push(e(t.eq(n),n));return i},r.remove=function(t,e){var i=[];if(o(e)&&t&&0<t.length)for(var n=o(t.eq),a=t.length-1;0<=a;a--){var s=n?t.eq(a):t[a];e(s,a)&&(i.unshift(s),o(s.remove)?s.remove():o(t.splice)&&t.splice(a,1))}return i},r.removeBy=function(t,i,n){return i?r.remove(t,function(t,e){return t&&t[i]==n}):[]},r.toArray=function(t){return null==t||!1===t?[]:t instanceof Array?t:[t]};var o=function(t){return"function"==typeof t}}("undefined"!=typeof VRender),function(t){var i=typeof VRender!=="undefined"?VRender.Utils:exports;i._dateBase=new Date(2018,0,1,0,0,0),i.compare=function(t,e){var i=t.getTime(),n=e.getTime();return i===n?0:i<n?-1:1},i.getDays=function(t,e){return t instanceof Date?(e instanceof Date||(e=i._dateBase),e=e instanceof Date?new Date(e.getFullYear(),e.getMonth(),e.getDate()):new Date(2018,0,1),t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),parseInt((t.getTime()-e.getTime())/864e5)):0},i.getMinutes=function(t,e){return t instanceof Date?(e instanceof Date||(e=i._dateBase),e=e instanceof Date?new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes()):new Date(2018,0,1),t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes()),parseInt((t.getTime()-e.getTime())/6e4)):0},i.isSameDay=function(t,e){return t instanceof Date&&e instanceof Date&&(t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate())},i.isToday=function(t){return t instanceof Date&&i.isSameDay(t,new Date)},i.isTomorrow=function(t){if(t instanceof Date){var e=new Date;return e.setDate(e.getDate()+1),i.isSameDay(t,e)}return!1},i.isYesterday=function(t){if(t instanceof Date){var e=new Date;return e.setDate(e.getDate()-1),i.isSameDay(t,e)}return!1},i.toDate=function(t){if(t instanceof Date)return t;if("string"==typeof t){t=t.replace(/-/g,"/");var e=Date.parse(t);if(isNaN(e)){var i=t.indexOf(".");if(0<i){var n=parseInt(t.substr(i+1)||0);e=Date.parse(t.substr(0,i))+n}}return isNaN(e)?null:new Date(e)}return"number"==typeof t?new Date(t):null},i.toDateString=function(t,e){e=e||"yyyy-MM-dd";var i=(t=t||new Date).getMonth()+1,n=t.getDate(),a=t.getHours(),s=t.getMinutes(),r=t.getSeconds(),o=t.getMilliseconds(),l=e.replace("yyyy",t.getFullYear());if(/M/.test(l)&&(l=l.replace(/MM/g,i<10?"0"+i:i).replace(/M/g,i)),/d/.test(l)&&(l=l.replace(/dd/g,n<10?"0"+n:n).replace(/d/g,n)),/H/.test(l)&&(l=l.replace(/HH/g,a<10?"0"+a:a).replace(/H/g,a)),/m/.test(l)&&(l=l.replace(/mm/g,s<10?"0"+s:s).replace(/m/g,s)),/s/.test(l)&&(l=l.replace(/ss/g,r<10?"0"+r:r).replace(/s/g,r)),/SSS/.test(l)&&(l=l.replace(/SSS/g,o<10?"00"+o:o<100?"0"+o:o)),/hh/.test(l)){var d=(a+12)%12;a<1?d="午夜"+d:1<=a&&a<5?d="凌晨"+d:5<=a&&a<6?d="清晨"+d:6<=a&&a<8?d="早上"+d:8<=a&&a<11?d="上午"+d:11<=a&&a<13?d="中午"+d:13<=a&&a<17?d="下午"+d:17<=a&&a<18?d="傍晚"+d:18<=a&&a<=23&&(d="晚上"+d),l=l.replace(/hh/g,d)}return l},i.toLocalDateString=function(t){if(!(t instanceof Date))return"";var e=new Date;return e.getFullYear()>t.getFullYear()?i.toDateString(t,"yyyy年MM月dd日"):i.isSameDay(t,e)?i.toDateString(t,"今天 HH:mm"):(e.setDate(e.getDate()-1),i.isSameDay(t,e)?i.toDateString(t,"昨天 HH:mm"):i.toDateString(t,"MM月dd日"))}}(),function(isFront){var StringUtils=isFront?VRender.Utils:exports;StringUtils.endWith=function(t,e){return!isEmptyStr(t)&&!isEmptyStr(e)&&(!(t.length<e.length)&&t.substring(t.length-e.length)==e)},StringUtils.format=function(text,data){for(var chars=String(text).split(""),length=chars.length,param=null,result="",i=0;i<length;i++){var ch=chars[i];if("{"===ch)if(null===param)param="";else{if(""!==param)break;result+="{",param=null}else if("}"===ch)if(null===param)result+="}";else{try{var value=eval(param);result+=value||0===value?value:""}catch(t){}param=null}else null===param?result+=ch:param+=ch}return result},StringUtils.isBlank=function(t){return t?"string"==typeof t&&0===String(t).replace(/\s+/g,"").length:"0"!==t&&0!==t&&!1!==t},StringUtils.isNotBlank=function(t){return!StringUtils.isBlank(t)},StringUtils.startWith=function(t,e){return!isEmptyStr(t)&&!isEmptyStr(e)&&(!(t.length<e.length)&&t.substr(0,e.length)===e)},StringUtils.strLen=function(t,e){return isEmptyStr(t)?0:(e&&(t=t.replace(/[\u4E00-\u9FFF]/g,"..")),t.length)},StringUtils.trimToEmpty=function(t){return StringUtils.isBlank(t)?"":(""+t).trim()},StringUtils.trimToNull=function(t){return StringUtils.isBlank(t)?null:(""+t).trim()},StringUtils.trimToUndefined=function(t){return StringUtils.isBlank(t)?void 0:(""+t).trim()};var isEmptyStr=function(t){return null==t||0===t.length}}("undefined"!=typeof VRender),function(t){var c=typeof VRender!=="undefined"?VRender.Utils:exports,a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),e=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/,i=new RegExp("^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$"),r=[];c.debounce=function(e,t,i){if(c.isFunction(e)){var n=c.find(r,function(t){return t.handler==e||t.name==e._name});n||(n={handler:e,name:e._name,timerId:0},r.push(n)),n.timerId&&clearTimeout(n.timerId);var a=this,s=n.params=Array.prototype.slice.call(arguments,2);n.timerId=setTimeout(function(){e.apply(a,s),c.remove(r,function(t){return t.handler==e||t.name==e._name})},Math.max(0,parseInt(t)||0))}},c.equal=function(t,e){if(t==e)return!0;if(c.isNull(t))return c.isNull(e);if(c.isNull(e))return!1;if("object"!=typeof t||"object"!=typeof e)return t===e;if(t instanceof Array){if(e instanceof Array){if(t.length!==e.length)return!1;for(var i=0,n=t.length;i<n;i++)if(!c.equal(t[i],e[i]))return!1;return!0}return!1}return t.hasOwnProperty("id")?t.id==e.id:t.hasOwnProperty("code")?t.code==e.code:!!t.hasOwnProperty("value")&&t.value==e.value},c.exec=function(i,n,a,s,t){if(c.isFunction(i)?(s=i,t=n,i=n=a=null):i instanceof Array&&(t=s,s=a,a=n,n=i,i=null),n&&(c.isFunction(n)?(t=a,s=n,n=a=null):n instanceof Array||(t=s,s=a,a=n,n=null)),a&&c.isFunction(a)&&(t=s,s=a,a=null),i||(i=this),c.isFunction(s)||(s=function(){}),n&&0!==n.length){var r=0,o=n.length;if(t){var l=[];for(r=0;r<n.length;r++)n[r].call(i,a,function(t,e){o-=1,t&&l.push(t),o<=0&&s.call(i,l.join("")||!1,e||a)})}else{var d=function(t,e){t?s.call(i,t,a):(r+=1)<o?n[r].call(i,e||a,d):s.call(i,!1,e||a)};n[0].call(i,a,d)}}else s.call(i,!1,a)},c.extend="undefined"!=typeof $?$.extend:null,c.getIndexValue=function(t){return t||0===t?isNaN(t)?-1:0<=(t=parseInt(t))?t:-1:-1},c.getFormatSize=function(t,e){return t||0===t?isNaN(t)?t:(t=parseFloat(t)||0,e?t/100+"rem":t+"px"):null},c.getSelection=function(){return window.getSelection?window.getSelection():document.getSelection?document.getSelection():document.selection},c.getSelectionRange=function(){var t=c.getSelection();return t&&t.createRange?t.createRange():t.getRangeAt(0)},c.getUAState=function(t){var e={ie:!1,chrome:!1,firefox:!1,opera:!1,safari:!1},i=t.toLowerCase();return/micromessenger/.test(i)?e.wx=!0:/msie ([\d.]+)/.test(i)?e.ie=!0:/firefox\/([\d.]+)/.test(i)?e.firefox=!0:/chrome\/([\d.]+)/.test(i)?e.chrome=!0:/opera.([\d.]+)/.test(i)?e.opera=!0:/safari/.test(i)&&/version\/([\d.]+)/.test(i)&&(e.safari=!0),e.isIphone=/iphone/.test(i),e.isAndroid=/android/.test(i),e.isMobile=/mobile/.test(i)||e.isIphone||e.isAndroid,e},c.isAlphaKey=function(t,e){return 65<=t.which&&t.which<=90||!!(e&&97<=t.which&&t.which<=122)},c.isControlKey=function(t){if(t.ctrlKey||t.metaKey||t.shiftKey)return!0;return 0<=[8,37,38,39,40,116,9,17,16,13,20].indexOf(t.which)},c.isDomExist=function(t){return t&&0<$("body").find(t).length},c.isEmail=function(t){return t&&e.test(""+t)},c.isEmpty=function(t){if(void 0===t)return!0;if(null===t)return!0;if(""===t)return!0;for(var e in t)return!1;return!0},c.isFunction=function(t){return t&&"function"==typeof t},c.isMobile=function(t){return t&&/^1\d{10}$/.test(""+t)},c.isNull=function(t){return null==t},c.isNumberKey=function(t){return!t.shiftKey&&(48<=t.which&&t.which<=57||96<=t.which&&t.which<=105)},c.isNotEmpty=function(t){return!c.isEmpty(t)},c.isNotNull=function(t){return!c.isNull(t)},c.isNumberic=function(t){return!c.isNull(t)&&("number"==typeof t||!isNaN(t))},c.isPhone=function(t){return t&&/^(0(10|2\d|[3-9]\d{2})-)?\d{7,8}(-\d{1,8})?$/.test(""+t)},c.isPrimitive=function(t){return"string"==typeof t||"number"==typeof t},c.isTrue=function(t){return!!t&&(!0===t||1===t||!("false"===(t=String(t).toLowerCase())||"no"===t||"0"===t))},c.isUrl=function(t){return t&&i.test(""+t)},c.nextTick=function(t){window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,0)},c.notNull=c.isNotNull,c.offset=function(t,e,i,n){t instanceof $||(t=$(t));var a=c.offsetToHtml(t);a.width=parseInt(i),a.width=0<=a.width?a.width:t.outerWidth(),a.height=parseInt(n),a.height=0<=a.height?a.height:t.outerHeight();var s=$(window);if(a.windowLeft=a.left,a.windowTop=a.top,a.windowWidth=s.width(),a.windowHeight=s.height(),a.overflowX=a.left<0||a.left+a.width>a.windowWidth,a.overflowY=a.top<0||a.top+a.height>a.windowHeight,a.overflowWindowX=a.overflowX,a.overflowWindowY=a.overflowY,!e||e instanceof $||(e=$(e)),e&&0<e.length){var r=c.offsetToHtml(e);a.containerLeft=r.left,a.containerTop=r.top,a.containerWidth=e.width(),a.containerHeight=e.height(),a.left-=r.left,a.top-=r.top,a.overflowX=a.left<0||a.left+a.width>a.containerWidth,a.overflowY=a.top<0||a.top+a.height>a.containerHeight,a.overflowContainerX=a.overflowX,a.overflowContainerY=a.overflowY}return a.isOverflowX=a.overflowWindowX||!!a.overflowContainerX,a.isOverflowY=a.overflowWindowY||!!a.overflowContainerY,a},c.offsetToHtml=function(t){for(var e=(t=$(t)).offset();(t=t.parent())&&0!=t.length&&(e.top-=t.scrollTop(),e.left-=t.scrollLeft(),!t.is("html")););return e},c.parentUntil=function(t,e,i){for(t=$(t);null!=t&&0<t.length;){if(t.is(e))return t;if(i&&t.is(i))return $("");t=t.parent()}return $("")},c.parseUrl=function(t){var e=document.createElement("a");e.href=t||"";var i={};if(i.origin=t,i.href=e.href,i.protocol=e.protocol.replace(":",""),i.host=e.host,i.hostname=e.hostname,i.port=e.port,i.pathname=e.pathname,i.search=e.search,i.hash=e.hash,i.params={},e.search)for(var n=e.search.substr(1).split("&"),a=0,s=n.length;a<s;a++){var r=n[a].split("=");i.params[r[0]]=r[1]}return i},c.randomTxt=function(t){for(var e=[],i=a,n=0;n<t;n++)e.push(i[Math.ceil(61*Math.random())]);return e.join("")},c.toLocalMobile=function(t,e){if(!c.isMobile(t))return t;var i=[];return e&&i.push("+86"),i.push(t.substr(0,3)),i.push(t.substr(3,4)),i.push(t.substr(7,4)),i.join(" ")},c.toPx=function(t){if(t){var e=/rem$/.test(""+t);if(t=parseFloat(t),isNaN(t))return NaN;if(t&&e){var i=parseFloat($("html").attr("data-fs"));i||(i=parseFloat($("html").css("fontSize"))),i&&(t*=i)}return t}return 0===t?0:NaN},c.toRem=function(t){if(t){var e=/rem$/.test(""+t);if(t=parseFloat(t),isNaN(t))return NaN;if(t&&!e){var i=parseFloat($("html").attr("data-fs"));i||(i=parseFloat($("html").css("fontSize"))),i&&(t/=i)}return t}return 0===t?0:NaN}}(),function(){if("undefined"!=typeof VRender&&!VRender.EventEmitter){var r=VRender.Utils,t=(VRender.EventEmitter=function(){}).prototype=new Object;t.trigger=function(t,e){var i="string"==typeof t?{type:t}:t;if(i&&r.isNotBlank(i.type)&&r.isArray(this.events))for(var n=Array.prototype.splice.call(arguments,1),a=this.events.length-1;0<=a;a--){var s=this.events[a];s.name===i.type&&(i.data=s.data,i.preventDefault=function(){i.isPreventDefault=!0},s.listener.apply(this,[i].concat(n)),delete i.data,delete i.preventDefault,s.once&&this.events.splice(a,1))}return this},t.on=function(t,e,i){return n.call(this,!1,t,e,i),this},t.one=function(t,e,i){return n.call(this,!0,t,e,i),this},t.off=function(e,i){return r.remove(this.events,function(t){if(t.name===e)return!r.isNotNull(i)||t.listener==i}),this},t.hasListen=function(t){return!!r.findBy(this.events,"name",t)};var n=function(t,e,i,n){"string"==typeof e&&r.isNotBlank(e)&&(r.isFunction(i)&&!r.isFunction(n)&&(n=i,i=null),r.isFunction(n)&&(r.isArray(this.events)||(this.events=[]),this.events.push({name:e,data:i,listener:n,once:!!t})))}}}(),function(){if("undefined"!=typeof VRender&&!VRender.FrontComponent){var n=VRender.Utils,a=VRender.FrontComponent=function(t,e){this.className=t,this.ComponentClass=e},t=a.prototype=new VRender.EventEmitter;t.find=function(t,e){(t=$(t)).is(this.className)||(t=t.find(this.className));var i=this;return n.map(t,function(t){return i.make(t,e)})},t.create=function(t){var e=$("<div></div>");(t=t||{}).target&&(t.targetAsInstance?e=t.target:e.appendTo(t.target)),e.addClass(this.className),e.attr("name",n.trimToNull(t.name)),n.isFunction(this.render)&&this.render(e,t);var i=new this.ComponentClass(e,t);return e.data("mfhInstance",i),i},t.make=function(t,e){var i=(t=$(t)).data("mfhInstance");return i||(i=new this.ComponentClass(t,e),t.data("mfhInstance",i)),i},VRender.frontComponent=function(t,e,i){var n=new a(t,e);return n.render=i,n}}}(),function(l){if(!l){if(VRender.Component.Render)return;VRender.Component.Render={}}var d=l?require(__vrender__).Utils:VRender.Utils,o={doAdapter:function(t,e){if(t&&t._vr_adapter_flag)return t;var i=this.options.dataAdapter||this.options.adapter;return d.isFunction(this.getDataAdapter)&&(i=this.getDataAdapter()),d.isFunction(i)&&(t=i(t,e))&&(t._vr_adapter_flag=!0),t},getDataKey:function(t){if(d.isBlank(t))return null;if(d.isPrimitive(t))return t;var e=this.options.keyField;return d.isFunction(this.getKeyField)&&(e=this.getKeyField()),d.isNotBlank(e)?t[e]:t.hasOwnProperty("id")?t.id:t.hasOwnProperty("code")?t.code:t.hasOwnProperty("value")?t.value:null},getDataLabel:function(t,e){var i=this.options.labelFunction;if(d.isFunction(this.getLabelFunction)&&(i=this.getLabelFunction()),d.isFunction(i))return i(t,e);if(d.isBlank(t))return"";if(d.isPrimitive(t))return""+t;var n=this.options.labelField;return d.isFunction(this.getLabelField)&&(n=this.getLabelField()),d.isNotBlank(n)?d.isNull(t[n])?"":t[n]:t.hasOwnProperty("label")?d.isNull(t.label)?"":t.label:t.hasOwnProperty("name")?d.isNull(t.name)?"":t.name:t.hasOwnProperty("value")?d.isNull(t.value)?"":t.value:""+t},getMapData:function(t){var e=this.options.dataMapper||this.options.mapper;if(d.isFunction(this.getDataMapper)&&(e=this.getDataMapper()),d.isFunction(e))return e(t);if(d.isNull(t))return null;if(d.isPrimitive(t))return t;var i={};return t.hasOwnProperty("id")&&(i.id=t.id),t.hasOwnProperty("code")&&(i.code=t.code),t.hasOwnProperty("name")&&(i.name=t.name),t.hasOwnProperty("value")&&(i.value=t.value),t.hasOwnProperty("label")&&(i.label=t.label),i},renderData:function(t,e){if(d.isFunction(this.getMapData)&&(e=this.getMapData(e)),e)if(d.isPrimitive(e))t.attr("data-v",e);else for(var i in e)t.attr("data-"+i,d.trimToEmpty(e[i]))},renderFunction:function(t,e,i){l&&d.isNotBlank(e)&&d.isFunction(i)&&t.write("<div class='ui-fn' style='display:none' name='"+e+"' fn-state='"+(i._state||"")+"' fn-data='"+(i._data||"")+"'>"+escape(i)+"</div>")},renderSubView:function(t,e){e&&(d.isFunction(e.render)?e.render(t):t.append(e.$el||e))}},i=function(t,e){this.context=e?t:null,this.options=e||t,this.options=this.options||{}},t=i.prototype=new Object;i.render=function(t,e){this.renderData(t,e),o.renderFunction.call(this,e,"adapter",this.getDataAdapter()),o.renderFunction.call(this,e,"mapper",this.getDataMapper())},t.render=function(t,e){i.render.call(this,t,e)},t.renderData=function(t,e){o.renderData.call(this,e,this.getData())},t.isRenderAsApp=function(){return l?(this.hasOwnProperty("_isApp")||(this._isApp=!1,this.context&&d.isFunction(this.context.isRenderAsApp)&&(this._isApp=this.context.isRenderAsApp())),this._isApp):VRender.ENV.isApp},t.isRenderAsIphone=function(){return l?(this.hasOwnProperty("_isIphone")||(this._isIphone=!1,this.context&&d.isFunction(this.context.isRenderAsIphone)&&(this._isIphone=this.context.isRenderAsIphone())),this._isIphone):VRender.ENV.isIphone},t.isRenderAsRem=function(){return l?(this.hasOwnProperty("_isRem")||(this._isRem=!1,this.context&&d.isFunction(this.context.isRenderAsRem)&&(this._isRem=this.context.isRenderAsRem())),this._isRem):VRender.ENV.useRem},t.getData=function(){return this.options.data=this._doAdapter(this.options.data),this.options.data},t.getDataAdapter=function(){return this.options.dataAdapter||this.options.adapter},t.getDataMapper=function(){return this.options.dataMapper||this.options.mapper},t.getMapData=function(t){return o.getMapData.call(this,t)},t._getDataKey=function(t){return o.getDataKey.call(this,t)},t._getDataLabel=function(t){return o.getDataLabel.call(this,t)},t._doAdapter=function(t){return t?o.doAdapter.call(this,t):null};var a=function(t,e){i.call(this,t,e)},e=a.prototype=new i;a.render=function(t,e){i.render.call(this,t,e),e.attr("opt-key",d.trimToNull(this.getKeyField())),e.attr("opt-lbl",d.trimToNull(this.getLabelField())),e.attr("opt-disable",d.trimToNull(this.options.disableField)),o.renderFunction(e,"lblfunc",this.getLabelFunction()),o.renderFunction(e,"irender",this.getItemRenderer()),this._renderItems(t,e),this._renderEmptyView(t,e),this._renderLoadView(t,e),this._renderPager(t,e)},a.renderData=function(t,e,i){if(0<(i=d.toArray(i)||[]).length){var n=this.getDataMapper();d.isFunction(n)&&(i=d.map(i,n))}e.attr("data-items",escape(JSON.stringify(i)))},a.renderItems=function(n,a,t){if((t=t||this.getData())&&0<t.length){var s=this,r=this._render_items=[];d.each(t,function(t,e){var i=s._getNewItem(n,a,t,e);i&&(r.push({item:i,data:t,index:e}),s._renderOneItem(n,i,t,e))}),setTimeout(function(){s._render_items=null},0)}},a.renderOneItem=function(t,e,i,n,a){l?this.renderItemData(t,e,n):e.data("itemData",n),this._isDisabled(n,a)&&e.addClass("disabled").attr("disabled","disabled"),i=i||e;var s=this.getItemRenderer();if(d.isFunction(s)){var r=null;r=s._state?s.call(this,t,e,n,a):s(t,e,n,a),d.isNotNull(r)&&i.empty().append(r)}else{var o=this._getDataLabel(n,a);i.html(d.isNull(o)?"":o)}},a.renderPager=function(t,e,i){l&&(!i&&d.isFunction(this.getPaginator)&&(i=this.getPaginator()),i&&("string"==typeof i?e.attr("opt-pager",d.trimToNull(i)):d.isFunction(i.getViewId)&&e.attr("opt-pager","[vid='"+i.getViewId()+"']")))},a.renderEmptyView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-empty");var a=d.isFunction(this._getEmptyView)?this._getEmptyView():this.options.emptyView;if(a)o.renderSubView.call(this,n,a);else{(a=t("<div></div>").appendTo(n)).addClass((i||"ui")+"-emptydef");var s=this.options.emptyText||this.options.empty;d.isFunction(this._getEmptyText)&&(s=this._getEmptyText()),(s=d.isNull(s)?"没有数据":d.trimToEmpty(s))&&t("<p></p>").appendTo(a).text(s)}return n},a.renderLoadView=function(t,e,i){var n=t("<div></div>").appendTo(e);n.addClass((i||"ui")+"-load");var a=d.isFunction(this._getLoadView)?this._getLoadView():this.options.loadingView;if(a)o.renderSubView.call(this,n,a);else{var s=t("<div></div>").appendTo(n);s.addClass((i||"ui")+"-loaddef");var r=d.isFunction(this._getLoadText)?this._getLoadText():this.options.loadingText;(r=d.isNull(r)?"正在加载..":d.trimToEmpty(r))&&t("<p></p>").appendTo(s).html(r)}return n},a.renderMoreView=function(t,e,i){var n=t("<div></div>").appendTo(e);if(n.addClass((i||"ui")+"-more"),this._pageInfo&&n.attr("page-no",this._pageInfo.page),a=d.isFunction(this._getMoreView)?this._getMoreView():this.options.moreView)o.renderSubView.call(this,n,a);else{var a;(a=t("<div></div>").appendTo(n)).addClass((i||"ui")+"-moredef");var s=d.isFunction(this._getMoreText)?this._getMoreText():this.options.moreText;(s=d.isNull(s)?"加载更多":d.trimToEmpty(s))&&t("<p></p>").appendTo(a).html(s)}return n},a.doAdapter=function(t){if((t=d.toArray(t))._vr_adapter_flag)return t;var i=this;return(t=d.map(t,function(t,e){return o.doAdapter.call(i,t,e)}))._vr_adapter_flag=!0,t},e.render=function(t,e){a.render.call(this,t,e)},e.renderData=function(t,e){l&&a.renderData.call(this,t,e,this.getData())},e.renderItemData=function(t,e,i){o.renderData.call(this,t,e,i)},e.getPaginator=function(){return this.options.paginator||this.options.pager},e._renderItems=function(t,e){var i=this._getItemContainer(t,e);i&&a.renderItems.call(this,t,i)},e._getItemContainer=function(t,e){return e},e._getNewItem=function(t,e,i,n){return t("<li></li>").appendTo(e)},e._renderOneItem=function(t,e,i,n){a.renderOneItem.call(this,t,e,null,i,n)},e._renderPager=function(t,e){a.renderPager.call(this,t,e)},e._renderEmptyView=function(t,e){a.renderEmptyView.call(this,t,e)},e._renderLoadView=function(t,e){a.renderLoadView.call(this,t,e)},e._renderMoreView=function(t,e){a.renderMoreView.call(this,t,e)},e.getKeyField=function(){return this.options.keyField},e.getLabelField=function(){return this.options.labelField},e.getLabelFunction=function(){return this.options.labelFunction},e.getItemRenderer=function(){return this.options.itemRenderer},e._isDisabled=function(t,e){if(t){var i=this.options.disableField||"disabled";if(i&&t.hasOwnProperty(i))return d.isTrue(t[i])}return!1},e._getDataLabel=function(t,e){return o.getDataLabel.call(this,t,e)},e._doAdapter=function(t){return a.doAdapter.call(this,t)};var s=function(t,e){a.call(this,t,e)},n=s.prototype=new a;if(s.render=function(t,e){a.render.call(this,t,e),this.isMultiple()&&e.attr("multiple","multiple"),this.renderSelection(t,e)},s.renderSelection=function(t,e,i){var n=this.getSelectedIndex(!0),a=this.getSelectedKey(!0);if(n&&e.attr("data-inds",n.join(",")),a&&e.attr("data-ids",a.join(",")),l&&this.options.apiName&&(n&&e.attr("data-tryindex",n.join(",")),a&&e.attr("data-tryid",a.join(","))),i&&0<i.length){a=a||[];var s=this;d.each(i,function(t,e){s._isSelected(t.data,t.index,n,a)&&(d.isFunction(s._setItemSelected)?s._setItemSelected(t.item,!0):t.item.addClass("selected"))})}},s.getSelectedIndex=function(t){var e=this.options.selectedIndex;if(d.isBlank(e))return t||this.isMultiple()?null:-1;d.isArray(e)||(e=(""+e).split(","));var i=[];return d.each(e,function(t){if(!isNaN(t)){var e=parseInt(t);!isNaN(e)&&0<=e&&i.push(e)}}),this.isMultiple()?0<i.length?i:null:i&&0<i.length?t?[i[0]]:i[0]:-1},s.getSelectedKey=function(t){var e=this.options.selectedId;if(d.isBlank(e))return t||this.isMultiple()?[]:null;d.isArray(e)||(e=(""+e).split(","));var i=[];return d.each(e,function(t){(t||0===t)&&i.push(isNaN(t)?t:parseInt(t))}),0==i.length?null:this.isMultiple()?i:t?[i[0]]:i[0]},s.getSelectedData=function(t,e){var i=[];if((e=e||this.getData())&&0<e.length)for(var n=this.getSelectedIndex(!0),a=this.getSelectedKey(!0)||[],s=0,r=e.length;s<r;s++){var o=e[s];this._isSelected(o,s,n,a)&&i.push(o)}return 0==i.length?null:this.isMultiple()?i:t?[i[0]]:i[0]},s.isSelected=function(t,e,i,n){if(i||n||(i=this.getSelectedIndex(!0),n=this.getSelectedKey(!0)||[]),i)return!((e=d.getIndexValue(e))<0)&&0<=i.indexOf(e);if(n){var a=this._getDataKey(t);return 0<=d.index(n,function(t){return t==a})}return!1},s.isAllSelected=function(t){if((t=t||this.getData())&&0<t.length){for(var e=this.getSelectedIndex(!0),i=this.getSelectedKey(!0)||[],n=0,a=t.length;n<a;n++)if(!this._isSelected(t[n],n,e,i))return!1;return!0}return!1},n.render=function(t,e){s.render.call(this,t,e)},n.renderSelection=function(t,e){s.renderSelection.call(this,t,e,this._render_items)},n.getSelectedIndex=function(t){return s.getSelectedIndex.call(this,t)},n.getSelectedKey=function(t){return s.getSelectedKey.call(this,t)},n.getSelectedData=function(t){return s.getSelectedData.call(this,t)},n.isMultiple=function(){return this.options.hasOwnProperty("multiple")?d.isTrue(this.options.multiple):d.isTrue(this.options.multi)},n.isAllSelected=function(){return s.isAllSelected.call(this)},n._isSelected=function(t,e,i,n){return s.isSelected.call(this,t,e,i,n)},n._setItemSelected=function(t,e){e?t.addClass("selected"):t.removeClass("selected")},l)module.exports={fn:o,_base:i,_item:a,_select:s};else{var r=VRender.Component.Render;r.fn=o,r._base=i,r._item=a,r._select=s}}("undefined"==typeof VRender),function(){if(!VRender.Component.base){var l=VRender.Utils,d=VRender.Component,a=d.Render,r=a.fn||{};r.getFunction=function(t,e){if(this.options.hasOwnProperty(t))return this.options[t];if(this.hasOwnProperty(t))return this[t];var i=null,n=this.$el.children(".ui-fn[name='"+(e||t)+"']");if(n&&0<n.length){if(i=n.text(),l.isNotBlank(i)&&((i=new Function("var Utils=VRender.Utils;return ("+unescape(i)+");")())._state=n.attr("fn-state")||null,i._data=n.attr("fn-data")||null,i._data))try{i._data=JSON.parse(i._data)}catch(t){}n.remove()}return this[t]=i},r.load=function(t,e,a){if(t=t||this.lastLoadApi,l.isBlank(t))return!1;var s=this,r=this.$el.addClass("is-loading"),o=this.loadTimerId=Date.now();return d.load.call(this,t,e,function(t,e){if(o==s.loadTimerId){r.removeClass("is-loading");var i=l.isFunction(s.getPaginator)&&s.getPaginator();if(i&&l.isFunction(i.set)){var n=s._pageInfo||{};i.set(n.total,n.page,n.size)}l.isFunction(a)&&a(t,e)}}),!0},r.getIntValues=function(t,e,i){l.isArray(t)||(t=l.isBlank(t)?[]:(""+t).split(",")),e=l.isNull(e)?Number.NEGATIVE_INFINITY:e,i=l.isNull(i)?Number.POSITIVE_INFINITY:i;var n=[];return l.each(t,function(t){isNaN(t)||(t=parseInt(t),!isNaN(t)&&n.indexOf(t)<0&&e<=t&&t<=i&&n.push(t))}),n},r.equalIndex=function(t,e){if(t=r.getIntValues(t,0),e=r.getIntValues(e,0),t.length!=e.length)return!1;t.sort(function(t,e){return e<t}),e.sort(function(t,e){return e<t});for(var i=0,n=t.length;i<n;i++)if(t[i]!=e[i])return!1;return!0},r.snapshoot=function(){var n={},a={},s=this,t={};return this._rootSnapshoot||(this._rootSnapshoot=t),t.shoot=function(t,e){if(t=t||n,l.isFunction(s._snapshoot_shoot)){var i=Array.prototype.slice.call(arguments);i[0]=t,s._snapshoot_shoot.apply(s,i)}else t.data=s.getData()},t.compare=function(t){var e=Array.prototype.slice.call(arguments);return l.isFunction(s._snapshoot_compare)?s._snapshoot_compare.apply(s,[n].concat(e)):(this.shoot.apply(this,[a].concat(e)),n.data==a.data)},t.done=function(t){var e=!1;if(s._rootSnapshoot==this){var i=Array.prototype.slice.call(arguments);this.compare.apply(this,i)||(this.shoot.apply(this,[a].concat(i)),s.trigger("change",a.data,n.data),e=!0)}return this.release(),e},t.release=function(){s._rootSnapshoot==this&&(s._rootSnapshoot=null)},t.getState=function(){return n},t.shoot(n),a.data=n.data,t},r.getDropdownHeight=function(t,e){var i=0;i=this.isRenderAsApp()?.8*$(window).height():parseInt(t.css("maxHeight"))||e||300;var n=t.get(0).scrollHeight;return n<i&&(i=n),i},r.mouseDebounce=function(t,e){var i=$(t.currentTarget),n=parseInt(i.attr("timerid"));n&&(clearTimeout(n),i.removeAttr("timerid")),"mouseleave"==t.type&&(n=setTimeout(function(){i.removeAttr("timerid"),e()},500),i.attr("timerid",n))};var n=function(t){},t=n.prototype=new VRender.EventEmitter;n.init=function(t,e){var i=this.$el=$(t);if(i.data(d.bindName))return i.data(d.bindName);i.data(d.bindName,this),this.options=e||{},u.call(this,i,this.options);var n=this;return setTimeout(function(){h.call(n)},0),this},n.isElement=function(t){return t instanceof Element||t instanceof $},t.init=function(t,e){return n.init.call(this,t,e)},t.isRenderAsApp=function(){return VRender.ENV.isApp},t.isRenderAsIphone=function(){return VRender.ENV.isIphone},t.isRenderAsRem=function(){return VRender.ENV.useRem},t.getViewId=function(){return this.$el.attr("vid")},t.destory=function(){this.$el.remove()},t.getData=function(){return this.options.data=this._doAdapter(this.options.data),this.options.data},t.setData=function(t){this.options.data=t,this._rerender()},t.getDataAdapter=function(){return this.options.hasOwnProperty("adapter")?this.options.adapter:r.getFunction.call(this,"dataAdapter","adapter")},t.setDataAdapter=function(t){this.options.adapter=t,delete this.options.dataAdapter,this.$el.children(".ui-fn[name='adapter']").remove(),this._rerender()},t.getDataMapper=function(){return this.options.hasOwnProperty("mapper")?this.options.mapper:r.getFunction.call(this,"dataMapper","mapper")},t.setDataMapper=function(t){this.options.mapper=t,delete this.options.dataMapper,this.$el.children(".ui-fn[name='mapper']").remove(),this._rerender()},t.isDisabled=function(){return this.$el.is(".disabled")},t.setDisabled=function(t){l.isNull(t)||l.isTrue(t)?this.$el.addClass("disabled").attr("disabled","disabled"):this.$el.removeClass("disabled").removeAttr("disabled","disabled")},t.load=function(t,e,i){l.isFunction(this._loadBefore)&&this._loadBefore(t,e);var n=this;return r.load.call(this,t,e,function(t,e){t||(l.isFunction(n.setData)?n.setData(e):n.options.data=e),setTimeout(function(){l.isFunction(n._loadAfter)&&n._loadAfter(t,e),l.isFunction(i)&&i(t,e),n.trigger("loaded",t,e)},0)})},t.reload=function(t,e){l.isFunction(t)&&(e=t,t=null);var i=this.lastLoadParams||{};return!isNaN(t)&&0<t&&(i.p_no=t),this.load(this.lastLoadApi,i,e)},t.isLoading=function(){return this.$el.is(".is-loading")},t._rerender=function(){},t._getDataKey=function(t){return r.getDataKey.call(this,t)},t._getDataLabel=function(t,e){return r.getDataLabel.call(this,t,e)},t._doAdapter=function(t){return r.doAdapter.call(this,t)},t._isMounted=function(){return 0<$("body").find(this.$el).length},t._snapshoot=function(){return r.snapshoot.call(this)},t._getScrollContainer=function(){return this.$el.attr("opt-box")};var s=function(){},e=s.prototype=new n;s.init=function(t,e){var i=n.init.call(this,t,e);return i===this&&(this._initPager(),this._checkIfEmpty()),i},s.doAdapter=function(t){return a._item.doAdapter.call(this,t)},s.renderItems=function(t,e){a._item.renderItems.call(this,$,t,e),this._checkIfEmpty()},s.renderOneItem=function(t,e,i,n){return a._item.renderOneItem.call(this,$,t,e,i,n)},s.addItem=function(t,e,i){e=l.getIndexValue(e),t=r.doAdapter.call(this,t,e);var n=null,a=(i=i||this.getData(),this._getItemContainer());if(a&&0<a.length){if(n=this._getNewItem($,a,t,e)){if(0<=e&&e<i.length){var s=this._getItems();s&&0<s.length&&s.eq(e).before(n)}this._renderOneItem($,n,t,e)}this._checkIfEmpty()}return 0<=e&&e<i.length?i.splice(e,0,t):i.push(t),n},s.updateItem=function(t,e,i){if(t=r.doAdapter.call(this,t,e),0<=(e=e||0===e?l.getIndexValue(e):this.getDataIndex(t)))if(e<(i=i||this.getData()).length){var n=this._getItemContainer();if(n&&0<n.length){var a=this._getItems(),s=this._getNewItem($,n,t,e);s?(a.eq(e).before(s).remove(),this._renderOneItem($,s,t,e)):a.eq(e).remove()}this._checkIfEmpty(),i.splice(e,1,t)}else e=-1;return e},s.removeItem=function(t,e,i){if(t&&0<t.length)e=t.index();else{if((e=l.getIndexValue(e))<0)return null;var n=this._getItems();n&&n.length>e&&(t=n.eq(e))}return t&&0<t.length&&(t.remove(),this._checkIfEmpty()),(i=i||this.getData())&&e<i.length?i.splice(e,1):null},s.initPager=function(){if(this.options.hasOwnProperty("pager"))this.setPaginator(this.options.pager);else{var t=this.$el.attr("opt-pager");t&&(t=$(t))&&0<t.length&&this.setPaginator(d.get(t)||t),this.$el.removeAttr("opt-pager")}},s.setPager=function(a){if(this.pager&&l.isFunction(this.pager.off)&&this.pager.off("change"),(this.pager=a)&&l.isFunction(a.on)){var s=this;a.on("change",function(t,e){var i=$.extend({},s.lastLoadParams);i.p_no=e&&e.page,i.p_size=e&&e.size,!i.p_no&&l.isFunction(a.getPage)&&(i.p_no=a.getPage()),!i.p_size&&l.isFunction(a.getSize)&&(i.p_size=a.getSize());var n=s._pageInfo||{};i.p_no==n.page&&i.p_size==n.size||s.load(s.lastLoadApi,i)})}},s.checkIfEmpty=function(){var t=this._getItems();t&&0<t.length?this.$el.removeClass("is-empty"):this.$el.addClass("is-empty")},s.isDisabled=function(t){if("number"==typeof t){var e=this._getItemAt(t);return!e||e.is(".disabled")}return"string"==typeof t?this.isDisabled(this.getIndexByName(t)):this.$el.is(".disabled")},s.setDisabled=function(t,e){if("string"==typeof e)return this.setDisabled(t,this.getIndexByName(e));var i=this.$el;if("number"==typeof e&&(i=this._getItemAt(e)),i&&((t=!(!l.isNull(t)&&!l.isTrue(t)))?i.addClass("disabled").attr("disabled","disabled"):i.removeClass("disabled").removeAttr("disabled"),l.isFunction(this.getDisableField))){var n=this.getDisableField();if(n){var a=this._getItemData(i);a&&(a[n]=t)}}},e.init=function(t,e){return s.init.call(this,t,e)},e.setData=function(t){this.options.data=this._doAdapter(t),this._rerender()},e.getDataAt=function(t){if((t=l.getIndexValue(t))<0)return null;var e=this.getData()||[];return t<e.length?e[i]:null},e.getDataIndex=function(e){var t=this.getData();if(t&&0<t.length){var i=this,n=this._getDataKey(e);return l.index(t,function(t){return t==e||i._getDataKey(t)==n})}return-1},e.getDataByKey=function(t){return this.getDataAt(this.getIndexByKey(t))},e.getIndexByKey=function(e){var t=this.getData();if(t&&0<t.length){var i=this;return l.index(t,function(t){return i._getDataKey(t)==e})}return-1},e.getDataByName=function(t){return this.getDataAt(this.getIndexByName(t))},e.getIndexByName=function(t){var e=this.getData();return e&&0<e.length?l.indexBy(e,"name",t):-1},e.getKeyField=function(){return this.options.keyField||this.$el.attr("opt-key")},e.setKeyField=function(t){t=l.trimToEmpty(t),this.getKeyField()!=t&&(this.options.keyField=t,this.$el.attr("opt-key",this.options.keyField),this._rerender())},e.getLabelField=function(){return this.options.labelField||this.$el.attr("opt-lbl")},e.setLabelField=function(t){t=l.trimToEmpty(t),this.getLabelField()!=t&&(this.options.labelField=t,this.$el.attr("opt-lbl",this.options.labelField),this._rerender())},e.getLabelFunction=function(){return r.getFunction.call(this,"labelFunction","lblfunc")},e.setLabelFunction=function(t){this.getLabelFunction()!=t&&(this.options.labelFunction=t,this.$el.children(".ui-fn[name='lblfunc']").remove(),this._rerender())},e.getItemRenderer=function(){return this.options.hasOwnProperty("renderer")?this.options.renderer:r.getFunction.call(this,"itemRenderer","irender")},e.setItemRenderer=function(t){this.getItemRenderer()!=t&&(this.options.renderer=t,delete this.options.itemRenderer,this.$el.children(".ui-fn[name='irender']").remove(),this._rerender())},e.getPaginator=function(){return this.pager},e.setPaginator=function(t){s.setPager.call(this,t)},e.length=function(){return l.toArray(this.getData()).length},e.isDisabled=function(t){return s.isDisabled.call(this,t)},e.setDisabled=function(t,e){s.setDisabled.call(this,t,e)},e.addItem=function(t,e){return s.addItem.call(this,t,e)},e.updateItem=function(t,e){return s.updateItem.call(this,t,e)},e.removeItem=function(t){return this.removeItemAt(this.getDataIndex(t))},e.removeItemAt=function(t){return s.removeItem.call(this,null,t)},e.addOrUpdateItem=function(t){var e=this.getDataIndex(t);0<=e?this.updateItem(t,e):this.addItem(t,e)},e.getItemData=function(t){var e=$(t);if(e&&0<e.length){var i=this._getItemContainer();if(i&&0<i.length){for(t=e.parent();;){if(!t||0==t.length){e=null;break}if(t.is(i))break;t=(e=t).parent()}if(e&&0<e.length)return this._getItemData(e)}}return null},e.more=function(n){if(this.lastLoadApi&&this.hasMore()&&!this.isLoading()){var t=l.extend({},this.lastLoadParams);t.p_no=parseInt(this._pageInfo&&this._pageInfo.page)||0,t.p_no+=1,l.isFunction(this._moreBefore)?this._moreBefore(this.lastLoadApi,t):l.isFunction(this._loadBefore)&&this._loadBefore(this.lastLoadApi,t);var a=this;return r.load.call(this,this.lastLoadApi,t,function(t,e){if(!t&&l.isArray(e))if(l.isFunction(a.addItem))l.each(e,function(t){a.addItem(t)});else{var i=this.options.data||[];this.options.data=i.concat(e)}setTimeout(function(){l.isFunction(a._moreAfter)?a._moreAfter(t,e):l.isFunction(a._loadAfter)&&a._loadAfter(t,e),l.isFunction(n)&&n(t,e),a.trigger("loaded",t,e)},0)}),!0}return!1},e.hasMore=function(){return!!this._pageInfo&&(parseInt(this._pageInfo.page)||1)*(parseInt(this._pageInfo.size)||20)<(parseInt(this._pageInfo.total)||0)},e.isEmpty=function(){if(this.$el.is(".is-empty"))return!0;var t=this.getData();return!t||0==t.length},e._doAdapter=function(t){return s.doAdapter.call(this,t)},e._getItemContainer=function(){return this.$el},e._getNewItem=function(t,e,i,n){return t("<li></li>").appendTo(e)},e._renderItems=function(t,e,i){s.renderItems.call(this,e,i)},e._renderOneItem=function(t,e,i,n){return s.renderOneItem.call(this,e,null,i,n)},e._isDisabled=function(t,e){if(t){this.options.hasOwnProperty("disableField")||(this.options.disableField=this.$el.attr("opt-disabled"));var i=this.options.disableField;if(i&&t.hasOwnProperty(i))return l.isTrue(t[i])}return!1},e._rerender=function(){var e=this,t=function(){var t=e._getItemContainer();t&&0<t.length&&e._renderItems($,t.empty(),e.getData())};t._name="ui."+this.getViewId(),l.debounce(t,0)},e._getItems=function(t){var e=this._getItemContainer();if(e&&0<e.length)return e.children(t)},e._getItemAt=function(n){return 0<=(n=l.getIndexValue(n))?l.find(this._getItems(),function(t,e){var i=parseInt(t.attr("opt-ind"));return isNaN(i)&&(i=e),n==i}):null},e._getItemData=function(t,e){var i=t.data("itemData");if(!i){var n=this.getData();l.isArray(n)&&((isNaN(e)||!e&&0!==e)&&(e=parseInt(t.attr("opt-ind")),isNaN(e)&&(e=t.index())),i=n[e])}return l.isEmpty(i)?null:i},e._initPager=function(){s.initPager.call(this)},e._checkIfEmpty=function(){s.checkIfEmpty.call(this)},e._getLoadText=function(){return this.options.loadingText},e._getLoadView=function(){return this.options.loadingView},e._getMoreText=function(){return this.options.moreText},e._getMoreView=function(){return this.options.moreView},e._getEmptyText=function(){return this.options.emptyText||this.options.empty},e._getEmptyView=function(){return this.options.emptyView};var o=function(){},c=o.prototype=new s;o.init=function(t,e){return s.init.call(this,t,e)},o.getSelectedIndex=function(t){var n=this.$el.attr("data-inds");if(l.isNull(n)){n=[];var a=this,s=this.$el.attr("data-ids");l.isNull(s)?l.each(this.getData(),function(t,e){a._isSelected(t,e,[],[])&&n.push(e)}):0<s.length&&(s=s.split(","),l.each(this.getData(),function(t,e){var i=a._getDataKey(t);0<=l.index(s,function(t){return t==i})&&n.push(e)}))}else n=r.getIntValues(n,0);return this.isMultiple()?0<n.length?n:null:t?0<n.length?[n[0]]:null:0<n.length?n[0]:-1},o.setSelectedIndex=function(t){var e=l.isFunction(this.length)?this.length()-1:null,i=r.getIntValues(t,0,e);return 1<i.length&&!this.isMultiple()&&(i=[i[0]]),this.$el.attr("data-inds",i.join(",")),this.$el.removeAttr("data-ids"),i},o.getSelectedKey=function(t){var i=this,n=this.$el.attr("data-ids"),e=this.$el.attr("data-inds");if(l.isNotNull(e)){if(n=[],0<(e=r.getIntValues(e,0)).length){var a=this.getData()||[];l.each(e,function(t){var e=t<a.length?a[t]:null;e&&n.push(i._getDataKey(e))})}}else l.isNull(n)?(n=[],l.each(this.getData(),function(t,e){i._isSelected(t,e,[],[])&&n.push(i._getDataKey(t))})):l.isArray(n)||(n=n.split(","));if(!n||0==n.length)return null;var s=[];return l.each(n,function(t){(t||0===t)&&s.push(isNaN(t)?t:parseInt(t))}),0==s.length?null:this.isMultiple()?s:t?[s[0]]:s[0]},o.setSelectedKey=function(n){l.isArray(n)||(n=l.isBlank(n)?[]:l.trimToEmpty(n).split(","));var a=[],s=this;l.each(this.getData(),function(t,e){var i=s._getDataKey(t);0<=l.index(n,function(t){return t==i})&&a.push(e)}),this.setSelectedIndex(a)},o.getSelectedData=function(t,e){var i=this.getSelectedIndex(!0),n=[];i||(n=this.getSelectedKey(!0)||[]);var a=this,s=[];return e=e||this.getData(),l.each(e,function(t,e){a._isSelected(t,e,i,n)&&s.push(t)}),0==s.length?null:this.isMultiple()?s:t?[s[0]]:s[0]},o.updateSelection=function(){var i=[],n=this;return l.each(this._getItems(),function(t,e){n._isItemSelected(t)&&i.push(e)}),o.setSelectedIndex.call(this,i),i},c.init=function(t,e){return o.init.call(this,t,e)},c.isMultiple=function(){return"multiple"==this.$el.attr("multiple")},c.setMultiple=function(t){t=!(!l.isNull(t)&&!l.isTrue(t)),this.isMultiple()!=t&&(t?this.$el.attr("multiple","multiple"):this.$el.removeAttr("multiple"),this._rerender())},c.getSelectedIndex=function(t){return o.getSelectedIndex.call(this,t)},c.setSelectedIndex=function(t){var e=this._snapshoot(),i=o.setSelectedIndex.call(this,t),n=this;return l.each(this._getItems(),function(t,e){n._setItemSelected(t,0<=i.indexOf(e))}),e.done(),i},c.getSelectedKey=function(t){return o.getSelectedKey.call(this,t)},c.setSelectedKey=function(t){return o.setSelectedKey.call(this,t)},c.getSelectedData=function(t){return o.getSelectedData.call(this,t)},c.isSelectedIndex=function(t){return!((t=l.getIndexValue(t))<0)&&this._isSelected(this.getDataAt(t),t)},c.isSelectedKey=function(e){if(l.isBlank(e))return!1;var t=this.getSelectedKey(!0);return 0<=l.index(t,function(t){return t==e})},c.isAllSelected=function(){var t=this.length();if(0<t){var e=this.getSelectedIndex(!0);return e&&e.length==t}return!1},c.addItem=function(t,e){var i=s.addItem.call(this,t,e);return i&&o.updateSelection.call(this),i},c.updateItem=function(t,e){return 0<=(e=s.updateItem.call(this,t,e))&&o.updateSelection.call(this),e},c.removeItemAt=function(t){var e=s.removeItem.call(this,null,t);return e&&o.updateSelection.call(this),e},c._isSelected=function(t,e,i,n){return a._select.isSelected.call(this,t,e,i,n)},c._isItemSelected=function(t){return t.is(".selected")},c._setItemSelected=function(t,e){e?t.addClass("selected"):t.removeClass("selected")},c._snapshoot_shoot=function(t,e,i){t.selectedIndex=e||this.getSelectedIndex(),t.selectedData=i||this.getSelectedData(),t.data=t.selectedData},c._snapshoot_compare=function(t,e){return e||(e=this.getSelectedIndex(!0)),r.equalIndex(t.selectedIndex,e)};var u=function(t,e){t.attr("id",l.trimToNull(e.id)||void 0),t.attr("name",l.trimToNull(e.name)||void 0);var i=e.clsname||e.className||e.clsName||e.cls;if(l.isNotBlank(i)&&t.addClass(i),l.isNotBlank(e.style)&&t.addClass(e.style),e.hasOwnProperty("disabled")&&this.setDisabled(l.isTrue(e.disabled)),!1===e.visible||"gone"===e.visible?t.css("display","none"):"hidden"===e.visible&&t.css("visibility","hidden"),t.attr("ref",l.trimToNull(e.ref)||void 0),!e.data){var n=t.attr("data-items");if(n)try{e.data=JSON.parse(unescape(n))}catch(t){}}this.$el.removeAttr("data-items")},h=function(){if(p.call(this)&&l.isFunction(this.load)){var t=this.options.api||this.$el.attr("api-name"),e=null;if(this.options.hasOwnProperty("params"))e=this.options.params;else try{e=JSON.parse(this.$el.attr("api-params")||null)}catch(t){}this.$el.removeAttr("api-name").removeAttr("api-params"),e=$.extend({},e);var i=l.isFunction(this.getPaginator)&&this.getPaginator();i&&(!e.p_no&&l.isFunction(i.getPage)&&(e.p_no=i.getPage()),!e.p_size&&l.isFunction(i.getSize)&&(e.p_size=i.getSize()));var n=l.isFunction(this.getSearcher)&&this.getSearcher();n&&l.isFunction(n.getParams)&&(e=$.extend(e,n.getParams()));var a=this;this.load(t,e,function(){setTimeout(function(){f.call(a)},0)})}},p=function(){return this.options.hasOwnProperty("autoLoad")||(this.options.autoLoad=this.$el.attr("api-autoload")),this.$el.removeAttr("api-autoload"),l.isTrue(this.options.autoLoad)},f=function(){var e=this,t=function(t){l.isFunction(e.setSelectedIndex)&&e.setSelectedIndex(t)},i=function(t){l.isFunction(e.setSelectedKey)&&e.setSelectedKey(t)};this.options.hasOwnProperty("selectedIndex")?t(this.options.selectedIndex):l.isNotBlank(this.$el.attr("data-tryindex"))?t(this.$el.attr("data-tryindex")):this.options.hasOwnProperty("selectedId")?i(this.options.selectedId):l.isNotBlank(this.$el.attr("data-tryid"))&&i(this.$el.attr("data-tryid")),delete this.options.selectedIndex,delete this.options.selectedId,this.$el.removeAttr("data-tryindex"),this.$el.removeAttr("data-tryid")};d.base=n,d.item=s,d.select=o}}(),function(o){if(o||!VRender.Component.Render.button){var l=o?require(__vrender__).Utils:VRender.Utils,d=o?require("./_base"):VRender.Component.Render,c=function(t,e){d._base.call(this,t,e)},t=c.prototype=new d._base;c.innerStyles=["ui-btn-default","ui-btn-primary","ui-btn-success","ui-btn-danger","ui-btn-warn","ui-btn-info","ui-btn-link","ui-btn-text"],c.sizes=["bigger","big","normal","small","tiny"],t.render=function(t,e){d._base.render.call(this,t,e),e.addClass("ui-btn");var i=this.options||{},n=i.size;n&&0<=c.sizes.indexOf(n)&&e.addClass(n);var a=i.style||"";c.innerStyles.indexOf(a)<0&&e.addClass(f(i.type)),l.isTrue(this.options.toggle)&&e.attr("opt-toggle","1"),i.link&&l.isNotBlank(i.link)&&e.attr("data-lnk",l.trimToNull(i.link));var s=t("<button class='btn'></button>").appendTo(e),r=p.call(this);l.isNotBlank(r)&&t("<i class='icon'></i>").appendTo(s).css(o?"background-image":"backgroundImage","url("+r+")");return l.isNotBlank(i.label)&&t("<span></span>").appendTo(s).text(l.trimToEmpty(i.label)||" "),u.call(this,t,e),h.call(this,t,e),this},t.getItems=function(){return l.toArray(this.options.items)};var u=function(t,e){var i=n.call(this);i&&e.attr("opt-wait",i),l.isTrue(this.options.waiting)&&e.addClass("waiting")},h=function(i,t){t.removeClass("has-items"),t.children(".dropdownbtn").remove(),t.children(".dropdown").remove();var e=this.getItems();if(e&&0<e.length){t.addClass("has-items"),t.append("<span class='dropdownbtn'>&nbsp;</span>");var n=i("<div class='dropdown'></div>").appendTo(t),a=i("<ul></ul>").appendTo(n);l.each(e,function(t){if(l.isNotBlank(t)){l.isPrimitive(t)&&(t={label:t});var e=i("<li></li>").appendTo(a);t.name&&e.attr("name",t.name),i("<span></span>").appendTo(e).text(l.trimToEmpty(t.label)||" ")}})}},n=function(){var t=0;return this.options.hasOwnProperty("waitTime")?t=this.options.waitTime:this.options.hasOwnProperty("wait")&&(t=this.options.wait),!0===t?-1:Math.max(0,parseInt(t))||0},p=function(){var t=this.options.icon;if(!0===t){var e=this.options.type;"success"==e?t="012b.png":"warn"==e?t="013b.png":"danger"==e?t="014b.png":"info"==e&&(t="015b.png"),!0!==t&&(t="/VRender/icons/"+t)}return"string"==typeof t?t:null},f=function(t){if(l.isNotBlank(t)){if(0<=["ok","submit","save","primary","major"].indexOf(t))return"ui-btn-primary";if(0<=["danger","error"].indexOf(t))return"ui-btn-danger";if(0<=["success","complete","finish"].indexOf(t))return"ui-btn-success";if(0<=["warn","warning"].indexOf(t))return"ui-btn-warn";if(0<=["info","highlight"].indexOf(t))return"ui-btn-info";if("text"===t)return"ui-btn-text";if("link"===t)return"ui-btn-link"}return"ui-btn-default"};o?module.exports=c:VRender.Component.Render.button=c}}("undefined"==typeof VRender),function(){if(!VRender.Component.Button){var n=VRender.Utils,i=VRender.Component,a=i.Render,e=a.button,s=window.UIButton=i.Button=function(t,e){return i.base.isElement(t)?this.init(t,e)!==this?i.get(t):(this.isRenderAsApp()&&this.$el.on("tap",".dropdown",l.bind(this)),this.$el.on("tap",".btn",r.bind(this)),this.$el.on("tap",".dropdownbtn",o.bind(this)),void this.$el.on("tap",".dropdown li",d.bind(this))):s.create(t)},t=s.prototype=new i.base;s.find=function(t){return i.find(t,".ui-btn",s)},s.create=function(t){return i.create(t,s,e)},t.getLabel=function(){return this.options.label},t.setLabel=function(t){this.options.label=t;var e=this.$el.children(".btn");e.children("span").remove(),n.isNotBlank(t)&&$("<span></span>").appendTo(e).text(n.trimToEmpty(t)||" ")},t.waiting=function(t){t=n.isNull(t)||!0===t?parseInt(this.$el.attr("opt-wait"))||-1:Math.max(0,parseInt(t))||0,p.call(this,t)},t.isWaiting=function(){return this.$el.is(".waiting")},t.setWaiting=function(t){t=!0===t||n.isNull(t)?-1:Math.max(0,parseInt(t))||0,this.$el.attr("opt-wait",t)};var r=function(t){if(!this.$el.is(".disabled, .waiting")){var e=this.$el,i=e.attr("data-lnk");if(i)window.open(i,"_self");else{var n=1==e.attr("opt-toggle");if(e.is(".has-items")){if(!n)return void u.call(this)}else n&&(1==e.attr("active")?e.removeAttr("active"):e.attr("active","1"));this.trigger("tap",e.attr("name"));var a=parseInt(e.attr("opt-wait"));a&&p.call(this,a)}}},o=function(t){return this.$el.is(".disabled, .waiting")||u.call(this),!1},l=function(t){$(t.target).is(".dropdown")&&h.call(this)},d=function(t){var e=$(t.currentTarget),i=e.attr("name")||"";return 1==this.$el.attr("opt-toggle")&&(this.$el.attr("name",i),this.$el.children(".btn").find("span").text(e.text())),this.trigger("tap",e.attr("name")),h.call(this),!1},c=function(t){a.fn.mouseDebounce(t,h.bind(this))},u=function(){if(!this.$el.is(".show-dropdown")){var t=this.$el.addClass("show-dropdown");if(this.isRenderAsApp())$("html,body").addClass("ui-scrollless");else{t.on("mouseenter",c.bind(this)),t.on("mouseleave",c.bind(this));var e=t.children(".dropdown"),i=a.fn.getDropdownHeight.call(this,e);n.offset(e,this._getScrollContainer(),0,i).isOverflowY&&t.addClass("show-before")}setTimeout(function(){t.addClass("animate-in")},0)}},h=function(){if(this.$el.is(".show-dropdown")){var t=this.$el.addClass("animate-out");this.isRenderAsApp()?$("html,body").removeClass("ui-scrollless"):t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)}},p=function(t){if(this.t_wait&&(clearTimeout(this.t_wait),this.t_wait=0),t){var e=this.$el.addClass("waiting");if(0<t){var i=this;this.t_wait=setTimeout(function(){i.t_wait=0,e.removeClass("waiting")},t)}}else this.$el.removeClass("waiting")};i.register(".ui-btn",s)}}(),function(t){if(t||!VRender.Component.Render.textview){var u=t?require(__vrender__).Utils:VRender.Utils,d=t?require("./_base"):VRender.Component.Render,e=function(t,e){d._base.call(this,t,e)},i=e.prototype=new d._base;i.render=function(t,e){d._base.render.call(this,t,e),e.addClass("ui-textview");var i=t("<div class='ipt'></div>").appendTo(e),n=c.call(this,t,e,i),a=this.options||{},s=u.getFormatSize(a.width,this.isRenderAsRem());s&&e.attr("opt-fixed","1").css("width",s),u.isTrue(a.readonly)&&(e.attr("opt-readonly","1"),n.attr("readonly","readonly")),u.isTrue(a.required)&&e.attr("opt-required","1"),this.isDisplayAsPassword()&&e.attr("opt-pwd","1");var r=parseInt(a.maxSize)||0;if(0<r){e.addClass("show-size").attr("opt-size",r);var o=u.trimToEmpty(n.val()).length;t("<span class='size'></span>").appendTo(i).text(o+"/"+r)}u.isNotBlank(a.prompt)&&t("<span class='prompt'></span>").appendTo(i).text(a.prompt),u.isNotBlank(a.tips)&&t("<span class='tips'></span>").appendTo(i).html(a.tips);var l=a.description||a.desc;return u.isNotBlank(l)&&t("<div class='desc'></div>").appendTo(e).html(l),h.call(this,t,e),u.isTrue(a.autoHeight)&&this.isMultiline()&&p.call(this,t,e,n),this},i.getDecimals=function(){if(this.isDisplayAsPassword())return 0;var t=this.options||{};return"int"===(t.dataType||t.type)?0:t.hasOwnProperty("decimals")?parseInt(t.decimals)||0:2},i.isDisplayAsPassword=function(){return u.isTrue(this.options.displayAsPwd)},i.isMultiline=function(){var t=this.options||{};return t.hasOwnProperty("multiple")?u.isTrue(t.multiple):u.isTrue(t.multi)};var c=function(t,e,i){var n=this.options||{},a=this.isMultiline(),s=a?"<textarea></textarea>":"<input type='text'/>";s=t(s).appendTo(i),a?e.addClass("multi"):i.append("<span class='clear'></span>");var r=n.value,o=n.dataType||n.type;if(u.isNotBlank(o)&&(/^(number|num|int)$/.test(o)&&(o="_number"),/^(email|password|tel|url|number)$/.test(o)&&s.attr("type",o),e.attr("opt-type",o),"_number"==o)){var l=this.getDecimals();e.attr("opt-decimal",l);var d=parseFloat(n.min),c=parseFloat(n.max);isNaN(d)||e.attr("opt-min",d),isNaN(c)||e.attr("opt-max",c),u.isNotBlank(r)&&(r=parseFloat(r),isNaN(r)?r="":(!isNaN(d)&&r<d&&(r=d),!isNaN(c)&&c<r&&(r=c),r=r.toFixed(l)))}return u.isNotBlank(r)&&(s.val(r),e.addClass("has-val")),s},h=function(t,e){u.isNotBlank(this.options.empty)&&e.attr("opt-empty",this.options.empty),u.isNotBlank(this.options.errmsg)&&e.attr("opt-errmsg",this.options.errmsg),d.fn.renderFunction(e,"validate",this.options.validate)},p=function(t,e,i){e.attr("opt-autoheight","1"),(e=e.children(".ipt")).append("<div class='preview'><pre></pre></div>"),e.find("pre").text(i.val());var n=this.options||{},a=this.isRenderAsRem(),s=u.getFormatSize(n.minHeight,a),r=u.getFormatSize(n.maxHeight,a);s&&i.css("minHeight",s),r&&i.css("maxHeight",r)};t?module.exports=e:VRender.Component.Render.textview=e}}("undefined"==typeof VRender),function(){if(!VRender.Component.TextView){var h=VRender.Utils,i=VRender.Component,t=i.Render,e=t.textview,n=window.UITextView=i.TextView=function(t,e){return i.base.isElement(t)?this.init(t,e)!==this?i.get(t):(this.inputTag=this.$el.children(".ipt"),this.input=this.inputTag.find("input, textarea"),this.input.on("focusin",o.bind(this)),this.input.on("focusout",l.bind(this)),this.input.on("keydown",s.bind(this)),this.input.on("keyup",r.bind(this)),this.$el.on("tap",".clear",u.bind(this)),this.isRenderAsApp()||(this.inputTag.on("mouseenter",d.bind(this)),this.inputTag.on("mouseleave",c.bind(this))),void p.call(this)):n.create(t)},a=n.prototype=new i.base;n.find=function(t){return i.find(t,".ui-textview",n)},n.create=function(t){return i.create(t,n,e)},a.val=function(t){if(h.isNull(t))return this.getValue();this.setValue(t)},a.getValue=function(){return this.input.val()},a.setValue=function(t){t=h.trimToEmpty(t),this.input.val(t),b.call(this),g.call(this,t)},a.getPrompt=function(){return this.inputTag.find(".prompt").text()},a.setPrompt=function(t){this.inputTag.find(".prompt").remove(),h.isNotBlank(t)&&$("<span class='prompt'></span>").appendTo(this.inputTag).text(t)},a.getTips=function(){return this.inputTag.find(".tips").text()},a.setTips=function(t){this.inputTag.find(".tips").remove(),h.isNotBlank(t)&&$("<span class='tips'></span>").appendTo(this.inputTag).html(t)},a.getDescription=function(){return this.$el.children(".desc").text()},a.setDescription=function(t){this.$el.children(".desc").remove(),h.isNotBlank(t)&&$("<div class='desc'></div>").appendTo(this.$el).html(t)},a.getDataType=function(){return this.$el.attr("opt-type")||"text"},a.setDataType=function(t){/^(number|num|int)$/.test(type)&&(type="_number"),this.$el.attr("opt-type",type),/^(email|password|tel|url|number)$/.test(type)?this.input.attr("type",type):this.input.removeAttr("type")},a.isReadonly=function(){return 1==this.$el.attr("opt-readonly")},a.setReadonly=function(t){h.isNull(t)||h.isTrue(t)?(this.$el.attr("opt-readonly","1"),this.input.attr("readonly","readonly")):(this.$el.removeAttr("opt-readonly"),this.input.removeAttr("readonly"))},a.isRequired=function(){return 1==this.$el.attr("opt-required")},a.setRequired=function(t){h.isNull(t)||h.isTrue(t)?this.$el.attr("opt-required","1"):this.$el.removeAttr("opt-required")},a.getEmptyMsg=function(){return this.$el.attr("opt-empty")},a.setEmptyMsg=function(t){h.isBlank(t)?this.$el.removeAttr("opt-empty"):this.$el.attr("opt-empty",t)},a.getErrorMsg=function(){return this.$el.attr("opt-errmsg")},a.setErrorMsg=function(t){h.isBlank(t)?this.$el.removeAttr("opt-errmsg"):this.$el.attr("opt-errmsg",t)},a.getMaxSize=function(){return this.hasOwnProperty("maxSize")||(this.maxSize=parseInt(this.$el.attr("opt-size"))||0),this.maxSize},a.setMaxSize=function(t){if(this.maxSize=parseInt(t)||0,this.$el.attr("opt-size",this.maxSize),0<this.maxSize){this.$el.addClass("show-size"),this.inputTag.find(".size").remove();var e=this.getValue()||"";$("<span class='size'></span>").appendTo(this.inputTag).text(e.length+"/"+this.maxSize)}else this.$el.removeClass("show-size"),this.inputTag.find(".size").remove()},a.getValidate=function(){return t.fn.getFunction.call(this,"validate")},a.setValidate=function(t){this.options.validate=t,this.$el.children(".ui-fn[name='validate']").remove()},a.hasError=function(){return this.$el.is(".is-error")},a.showError=function(t){!0===t&&(t=this.lastErrorMsg||this.$el.attr("opt-errmsg")||"内容不正确！"),t?v.call(this,t):b.call(this)},a.getDecimals=function(){return parseFloat(this.$el.attr("opt-decimal"))||0},a.setDecimals=function(t){t=isNaN(t)?2:parseInt(t)||0,this.$el.attr("opt-decimal",t)},a.isMultiline=function(){return this.$el.is(".multi")},a.isAutoHeight=function(){return 1==this.$el.attr("opt-autoheight")},a.isDisplayAsPassword=function(){return 1==this.$el.attr("opt-pwd")},a.setDisplayAsPassword=function(t){h.isNull(t)||h.isTrue(t)?this.$el.attr("opt-pwd","1"):this.$el.removeAttr("opt-pwd")};var s=function(t){if(b.call(this),h.isControlKey(t))return!0;var e=this.input.val()||"",i=this.getDataType();if("_number"==i||"number"==i||"num"==i){if(!y(t,e))return!1}else if("tel"==i||"mobile"==i||"phone"==i){if(!/[0-9]|\-/.test(t.key))return!1;if("-"==t.key&&"mobile"==i)return!1}else if("text"==i){var n=this.getMaxSize();if(0<n&&e.length>=n)return!1}g.call(this,e+".")},r=function(t){var e=this.input.val()||"",i=e,n=this.getDataType();if("_number"==n||"number"==n||"num"==n?i=e.replace(/[^0-9\.\-]/g,""):"tel"!=n&&"mobile"!=n&&"phone"!=n||(i=e.replace(/[^0-9\-]/g,"")),i!=e&&this.input.val(i),g.call(this,i),13===t.which){var a=this;setTimeout(function(){a.input.focusout(),a.trigger("enter",i)})}},o=function(t){var e=this;this.$el.addClass("focus");var i=this.input.val();this.t_focus=setInterval(function(){var t=e.input.val();t!=i&&(i=t,g.call(e,t),e.trigger("change",t))},100)},l=function(t){this.$el.removeClass("focus");var e=this.input.val()||"";if(0===e.length?this.isRequired()&&v.call(this,this.getEmptyMsg()||"输入框不能为空"):f.call(this,e),this.t_focus){var i=this.t_focus;this.t_focus=null,setTimeout(function(){clearInterval(i)},100)}},d=function(t){this.hasError()&&(this.t_hideerror&&(clearTimeout(this.t_hideerror),this.t_hideerror=null),this.$el.find(".errmsg").removeClass("animate-out"))},c=function(t){if(this.hasError()&&!this.t_hideerror){var e=this;this.t_hideerror=setTimeout(function(){e.$el.find(".errmsg").addClass("animate-out")},3e3)}},u=function(t){this.val(""),this.trigger("change","");var e=this;setTimeout(function(){e.input.focus()},0)},p=function(){this.isAutoHeight()&&m.call(this,this.getValue())},f=function(t){var e=this.getValidate(),i=this.getErrorMsg();if(h.isFunction(e)){var n=this,a=function(t){!0===t?v.call(n,i||"内容不正确！"):!1===t?b.call(n):t?v.call(n,t):b.call(n)},s=e(this,t,a);h.isNotNull(s)&&a(s)}else{var r=this.getDataType();if("_number"==r||"number"==r||"num"==r)if(isNaN(t))v.call(this,i||"数据格式不正确");else{var o=parseFloat(t),l=parseFloat(this.$el.attr("opt-min"));!isNaN(l)&&o<l&&v.call(this,i||"数据不正确，请输入大于等于"+l+"的值");var d=parseFloat(this.$el.attr("opt-max"));!isNaN(d)&&d<o&&v.call(this,i||"数据不正确，请输入小于等于"+d+"的值");var c=parseFloat(this.$el.attr("opt-decimal"))||0;0<c&&this.input.val(o.toFixed(c))}else if("tel"==r)h.isMobile(t)&&h.isPhone(t)||v.call(this,i||"手机或电话号码不正确");else if("text"==r){var u=this.getMaxSize();0<u&&u<t.length&&v.call(this,i||"输入内容太长，允许最大长度为："+u)}else"email"==r?h.isEmail(t)||v.call(this,i||"电子邮箱格式不正确，请重新输入"):"mobile"==r?h.isMobile(t)||v.call(this,i||"手机号码不正确，必须是1开头的11位数字"):"phone"==r?h.isPhone(t)||v.call(this,i||"电话号码不正确"):"url"==r&&(h.isUrl(t)||v.call(this,i||"url格式不正确"))}},g=function(t){if(t&&0<t.length?this.$el.addClass("has-val"):this.$el.removeClass("has-val"),this.$el.is(".show-size")){var e=this.getMaxSize();0<e&&this.inputTag.find(".size").text(t.length+"/"+e)}m.call(this,t)},m=function(t){if(this.isAutoHeight()){var e=this.inputTag.find(".preview pre");e&&0<e.length&&(t=(t||"").replace(/\n$/,"\n."),e.text(t));var i=this.input.get(0),n=h.toPx(this.isRenderAsRem()?"0.32rem":"32px"),a=function(){var t=e[0].scrollHeight;t=Math.max(t,n)+2,i.style.height=t+"px"};window.requestAnimationFrame?window.requestAnimationFrame(a):setTimeout(a,0)}},v=function(t){this.lastErrorMsg=t;var e=this.$el.find(".errmsg");if(e&&0!=e.length||((e=$("<div class='errmsg'></div>").appendTo(this.$el)).insertAfter(this.inputTag),this.isRenderAsApp()||e.css("top",this.inputTag.height()+8)),e.html(t),this.$el.addClass("is-error"),e.removeClass("animate-in").removeClass("animate-out"),setTimeout(function(){e.addClass("animate-in")},0),!this.isRenderAsApp()){this.t_hideerror&&clearTimeout(this.t_hideerror);var i=this;this.t_hideerror=setTimeout(function(){i.t_hideerror=null,e.addClass("animate-out")},3e3)}},b=function(){if(this.hasError()){var t=this,e=this.$el.find(".errmsg").addClass("animate-out");setTimeout(function(){t.$el.removeClass("is-error"),e.removeClass("animate-in").removeClass("animate-out")},200)}},y=function(t,e){return!!/[0-9]/.test(t.key)||("-"==t.key?!/\-/.test(e)&&0==e.length:"."==t.key&&(!/\./.test(e)&&0<e.length))};i.register(".ui-textview",n)}}(),function(t){if(t||!VRender.Component.Render.checkbox){var a=t?require(__vrender__).Utils:VRender.Utils,s=t?require("./_base"):VRender.Component.Render,e=function(t,e){s._base.call(this,t,e)};(e.prototype=new s._base).render=function(t,e){s._base.render.call(this,t,e),e.addClass("ui-chkbox");var i=this.options||{},n=t("<input type='checkbox'/>").appendTo(e);return a.isNotNull(i.value)&&n.val(i.value),a.isTrue(i.checked)&&(e.addClass("checked"),n.attr("checked","checked")),a.isNotNull(i.label)&&t("<span></span>").appendTo(e).text(i.label),n.attr("name",a.trimToNull(i.name)),this},t?module.exports=e:VRender.Component.Render.checkbox=e}}("undefined"==typeof VRender),function(){if(!VRender.Component.Checkbox){var i=VRender.Utils,n=VRender.Component,e=n.Render.checkbox,a=window.UICheckbox=n.Checkbox=function(t,e){return n.base.isElement(t)?this.init(t,e)!==this?n.get(t):(this.input=this.$el.children("input"),void this.input.on("change",s.bind(this))):a.create(t)},t=a.prototype=new n.base;a.find=function(t){return n.find(t,".ui-chkbox",a)},a.create=function(t){return t=$.extend({},t,{tagName:"label"}),n.create(t,a,e)},t.val=function(t){return i.isNotNull(t)&&this.input.val(t),this.input.val()},t.isChecked=function(){return this.input.is(":checked")},t.setChecked=function(t){var e=!!i.isNull(t)||i.isTrue(t);this.input[0].checked=e,this.input.trigger("change")},t.getLabel=function(){return this.$el.children("span").text()},t.setLabel=function(t){this.$el.children("span").remove(),i.isNotBlank(t)&&$("<span></span>").appendTo(this.$el).text(t)};var s=function(t){$(t.currentTarget).is(":checked")?this.$el.addClass("checked"):this.$el.removeClass("checked")};n.register(".ui-chkbox",a)}}(),function(t){if(t||!VRender.Component.Render.radiobox){var a=t?require(__vrender__).Utils:VRender.Utils,s=t?require("./_base"):VRender.Component.Render,e=function(t,e){s._base.call(this,t,e)};(e.prototype=new s._base).render=function(t,e){s._base.render.call(this,t,e),e.addClass("ui-radbox");var i=this.options||{},n=t("<input type='radio'/>").appendTo(e);return a.isNotNull(i.value)&&n.val(i.value),a.isTrue(i.checked)&&(e.addClass("checked"),n.attr("checked","checked")),a.isNotNull(i.label)&&t("<span></span>").appendTo(e).text(i.label),n.attr("name",a.trimToNull(i.name)),this},t?module.exports=e:VRender.Component.Render.radiobox=e}}("undefined"==typeof VRender),function(){if(!VRender.Component.Radiobox){var i=VRender.Utils,n=VRender.Component,e=n.Render.radiobox,a=window.UIRadiobox=n.Radiobox=function(t,e){return n.base.isElement(t)?this.init(t,e)!==this?n.get(t):(this.input=this.$el.children("input"),this.input.on("change",s.bind(this)),void(this.input.is(":checked")&&this.input.trigger("change"))):a.create(t)},t=a.prototype=new n.base;a.find=function(t){return n.find(t,".ui-radbox",a)},a.create=function(t){return t=$.extend(t,{tagName:"label"}),n.create(t,a,e)},t.val=function(t){return i.isNotBlank(t)&&this.input.val(t),this.input.val()},t.isChecked=function(){return this.input.is(":checked")},t.setChecked=function(t){var e=!!i.isNull(t)||i.isTrue(t);this.isChecked()!=e&&(this.input[0].checked=e,this.input.trigger("change"))},t.getLabel=function(){return this.$el.children("span").text()},t.setLabel=function(t){this.$el.children("span").remove(),i.isNotBlank(t)&&$("<span></span>").appendTo(this.$el).text(t)};var s=function(t){if(this.isChecked()){this.input.parent().addClass("checked");var e=this.input.attr("name");if(i.isNotBlank(e))$("input[name='"+e+"']").not(this.input).parent().removeClass("checked")}else this.$el.removeClass("checked");this.trigger("change")};n.register(".ui-radbox",a)}}(),function(t){if(t||!VRender.Component.Render.combobox){var l=t?require(__vrender__).Utils:VRender.Utils,o=t?require("./_base"):VRender.Component.Render,e=function(t,e){o._select.call(this,t,e)},i=e.prototype=new o._select;i.render=function(t,e){return e.addClass("ui-combobox"),this.isNative()&&e.attr("opt-native","1"),e.attr("opt-box",this.options.container),n.call(this,t,e),e.append("<div class='dropdown'><div class='box'></div></div>"),o._select.render.call(this,t,e),this},i.getSelectedData=function(t){return o._select.getSelectedData.call(this,t,u.call(this))},i.isNative=function(){return l.isTrue(this.options.native)},i._getItemContainer=function(t,e){return e.children(".dropdown").children(".box")},i._renderItems=function(t,e){var i=this._getItemContainer(t,e);a.call(this,t,e,i,this.getData())},i._renderEmptyView=function(t,e){},i._renderLoadView=function(t,e){},i._setItemSelected=function(t,e){e?t.addClass("selected").attr("selected","selected"):t.removeClass("selected").removeAttr("selected")},i._doAdapter=function(t){return c.call(this,t)};var n=function(t,e){var i=t("<div class='ipt'></div>").appendTo(e),n=t("<input type='text'/>").appendTo(i),a=this.getSelectedData(!0);if(a&&0<a.length){e.addClass("has-val");var s=this,r=l.map(a,function(t){return s._getDataLabel(t)});n.val(r.join(",")||"")}l.isTrue(this.options.editable)?e.addClass("editable"):n.attr("readonly","readonly"),i.append("<button class='dropdownbtn'></button>"),i.append("<span class='prompt'>"+l.trimToEmpty(this.options.prompt)+"</span>")},a=function(t,e,i,n){this._render_items=[],this.isRenderAsApp()&&this.isNative()?r.call(this,t,i,n):s.call(this,t,i,n);var a=this;setTimeout(function(){a._render_items=null},0)},s=function(n,i,t){if(t&&0!=t.length){var a=this,s=this._render_items||[],r=function(t,e){var i=n("<div class='item'></div>").appendTo(t);s.push({item:i,data:e,index:s.length}),d.call(a,n,i,e)},o=i.children(".grp").last();l.each(t,function(t,e){l.isArray(t)?(0<t.length&&(o=n("<div class='grp'></div>").appendTo(i),t.title&&n("<div class='title'></div>").appendTo(o).text(t.title),l.each(t,function(t,e){r(o,t)})),o=null):(o&&0!=o.length||(o=n("<div class='grp'></div>").appendTo(i)),r(o,t))})}},r=function(n,t,e){var i=t.children("select");if(i&&0!=i.length||(i=n("<select size='1'></select>").appendTo(t),this.isMultiple()?i.attr("multiple","multiple"):i.append("<option disabled='disabled' selected='selected'>请选择..</option>")),e&&0<e.length){var a=this,s=this._render_items||[],r=function(t,e){var i=n("<option class='item'></option>").appendTo(t);s.push({item:i,data:e,index:s.length}),i.text(a._getDataLabel(e))};l.each(e,function(t){l.isArray(t)?l.each(t,function(t){r(i,t)}):r(i,t)})}},d=function(t,e,i,n){o._item.renderOneItem.call(this,t,e,e,i,n)},c=function(t){if((t=l.toArray(t))._vr_adapter_flag)return t;var n=this,a=0,s=[],r=null;return l.each(t,function(t,e){if(l.isArray(t)){if(0<t.length){var i=l.map(t,function(t){return o.fn.doAdapter.call(n,t,a++)});t.title&&(i.title=t.title),s.push(i)}r=null}else r||(r=[],s.push(r)),t=o.fn.doAdapter.call(n,t,a++),r.push(t)}),s._vr_adapter_flag=!0,s},u=function(){var e=[];return l.each(this.getData(!0),function(t){l.isArray(t)?l.each(t,function(t){e.push(t)}):e.push(t)}),e};t?module.exports=e:(e.doAdapter=c,e.getDataFlat=u,e.renderItems=a,VRender.Component.Render.combobox=e)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Combobox){var u=VRender.Utils,c=VRender.Component,h=c.Render,n=h.combobox,a=window.UICombobox=c.Combobox=function(t,e){if(!c.base.isElement(t))return a.create(t);if(this.init(t,e)!==this)return c.get(t);var i=this.$el;this.isRenderAsApp()&&this.isNative()?i.find("select").on("change",v.bind(this)):(this.isRenderAsApp()&&i.on("tap",".dropdown",m.bind(this)),i.on("tap",".ipt",s.bind(this)),i.on("tap",".item",r.bind(this)),i.on("tap",".ui-more",o.bind(this))),i.is(".editable")&&(i.on("keydown","input",l.bind(this)),i.on("keyup","input",d.bind(this)),i.on("focusin","input",p.bind(this)),i.on("focusout","input",f.bind(this)))},t=a.prototype=new c.select;a.find=function(t){return c.find(t,".ui-combobox",a)},a.create=function(t){return c.create(t,a,n)},t.getData=function(t){return t?(this.options.data=this._doAdapter(this.options.data),this.options.data):n.getDataFlat.call(this)},t.setSelectedIndex=function(t){var e=this._snapshoot(),i=c.select.setSelectedIndex.call(this,t);u.each(this._getItems(),function(t,e){_(t,0<=i.indexOf(e))}),i&&0!=i.length||this.$el.find("select").val(""),b.call(this),e.done()},t.addItem=function(a,s){s=u.getIndexValue(s),a=h.fn.doAdapter.call(this,a,s)||{};var t=this.getData(!0),r=!1;0<=s&&x.call(this,t,function(t,e,i,n){if(s==e)return i.splice(n,0,a),!(r=!0)}),r||(0<t.length?t[t.length-1].push(a):t.push([a]));var e=this._getNewItem($,this._getItemContainer());return this._renderOneItem($,e,a,s),r&&0<=s&&(this._getItems().eq(s).before(e),c.select.updateSelection.call(this)),e},t.updateItem=function(r,o){if(r=h.fn.doAdapter.call(this,r,o),0<=(o=o||0===o?u.getIndexValue(o):this.getDataIndex(r))){var l=this,t=this.getData(!0),d=null;x.call(this,t,function(t,e,i,n){if(o==e){i.splice(n,1,r);var a=l._getNewItem($,l._getItemContainer());l._renderOneItem($,a,r,o);var s=l._getItems();return(d=s.eq(o).before(a).remove()).is(".selected")&&_(a,!0),!1}}),c.select.updateSelection.call(this),d&&d.is(".selected")&&b.call(this)}return o},t.removeItemAt=function(a){if(0<=(a=u.getIndexValue(a))){var t=this._getItems().eq(a);if(t&&0<t.length){var e=t.parent();t.remove(),0==e.children().length&&e.remove()}var s=this.getData(!0),r=null;return x.call(this,s,function(t,e,i,n){if(a==e)return r=i.splice(n,1),0==i.length&&u.remove(s,function(t){return t==i}),!1}),c.select.updateSelection.call(this),t.is(".selected")&&b.call(this),r}return null},t.val=function(t){if(u.isNull(t))return this.$el.find(".ipt > input").val();var e=this._snapshoot(),i=y.call(this,t);i?this.setSelectedIndex(i[0]):(this.setSelectedIndex(-1),this.isMatchRequired()||(this.$el.find(".ipt > input").val(t),w.call(this,u.isNotBlank(t)))),e.done()},t.isNative=function(){return 1==this.$el.attr("opt-native")},t.isEditable=function(){return this.$el.is(".editable")},t.isMatchRequired=function(){return 1==this.$el.attr("opt-match")},t._getItemContainer=function(){return this.$el.children(".dropdown").children(".box")},t._renderItems=function(t,e,i){i=i||this.getData(!0);n.renderItems.call(this,t,this.$el,e,i)},t._renderOneItem=function(t,e,i,n){this.isRenderAsApp()&&this.isNative()?e.text(this._getDataLabel(i,n)):c.item.renderOneItem.call(this,t,e,i,n)},t._getNewItem=function(t,e,i,n){if(this.isRenderAsApp()&&this.isNative()){var a=e.children("select");return t("<option class='item'></option>").appendTo(a)}var s=e.children(".grp").last();return s&&0!=s.length||(s=t("<div class='grp'></div>").appendTo(e)),t("<div class='item'></div>").appendTo(s)},t._getItems=function(t){var e=this._getItemContainer().find(".item");return t&&(e=e.filter(t)),e},t._isItemSelected=function(t){return t.is(".selected")||t.is(":selected")},t._setItemSelected=function(t,e){_.call(this,t,e)},t._loadBefore=function(){if(!this.isRenderAsApp()||!this.isNative()){var t=this._getItemContainer();if(t.find(".ui-load, .ui-more").remove(),this.isRenderAsApp()&&this.isNative()){var e=this._getLoadText();if(e=u.isNull(e)?"正在加载..":u.trimToEmpty(e)){var i=t.children("select");$("<option class='ui-load'></option>").appendTo(i).text(e)}}else h._item.renderLoadView.call(this,$,t)}},t._loadAfter=function(){if(!this.isRenderAsApp()||!this.isNative()){var t=this._getItemContainer();if(t.find(".ui-load").remove(),this.hasMore())if(this.$el.addClass("has-more"),this.isRenderAsApp()&&this.isNative()){var e=this._getMoreText();if(e=u.isNull(e)?"加载更多":u.trimToEmpty(e)){var i=t.children(".select");$("<option class='ui-more'></option>").appendTo(i).text(e)}}else h._item.renderMoreView.call(this,$,t);else this.$el.removeClass("has-more")}},t._snapshoot_shoot=function(t){t.selectedIndex=this.getSelectedIndex(),t.value=this.$el.find(".ipt > input").val()||"",t.data=this.getSelectedData()},t._snapshoot_compare=function(t){var e=this.$el.find(".ipt > input").val()||"";if(t.value!=e)return!0;var i=this.getSelectedIndex();return h.fn.equalIndex(i,t.selectedIndex)},t._doAdapter=function(t){return n.doAdapter.call(this,t)},t._rerender=function(){var i=this,t=function(){var t=i.getSelectedIndex(),e=i._getItemContainer();e&&0<e.length&&i._renderItems($,e.empty(),i.getData()),i.setSelectedIndex(t)};t._name="ui.combobox."+this.getViewId(),u.debounce(t,0)};var s=function(t){var e=$(t.target);if(this.isRenderAsApp()){if(this.isEditable()&&!e.is(".dropdownbtn"))return}else this.isEditable()&&e.is(".dropdownbtn")&&this.$el.find(".ipt > input").focus();i.call(this)},r=function(t){var e=$(t.currentTarget);if(e.is(".selected")&&!this.isMultiple())return!1;var i=this._snapshoot();return e.is(".selected")?_(e,!1):(this.isMultiple()||_(this._getItems(".selected"),!1),_(e,!0)),c.select.updateSelection.call(this),b.call(this),i.done(),this.isMultiple()||T.call(this),!1},o=function(t){this.more()},l=function(t){if(!this.isRenderAsApp()&&(i.call(this),this.$el.off("mouseenter").off("mouseleave"),38==t.which||40==t.which)){if(this.isMultiple())return;var e=this.getSelectedIndex();38==t.which?0<e&&(e-=1):40==t.which&&e<this.length()-1&&(e+=1),this.setSelectedIndex(e)}},d=function(t){var e=$(t.currentTarget);if(13==t.which){T.call(this);var i=this._snapshoot(),n=c.select.updateSelection.call(this);n&&0<n.length?b.call(this):this.isMatchRequired()&&e.val(""),e.select(),i.done()}else if(!u.isControlKey(t)||8==t.which){var a=e.val();w.call(this,a&&0<a.length);var s=y.call(this,a,!0),r=_(this._getItems(),!1);this.$el.find("select").val(""),s&&0<=s[0]&&_(r.eq(s[0]),!0)}},p=function(t){this.t_focus&&(clearTimeout(this.t_focus),this.t_focus=0)},f=function(t){var n=$(t.currentTarget),a=this;this.t_focus=setTimeout(function(){if(a.t_focus=0,D.call(a)){var t=n.val(),e=y.call(a,t,!1);if(e&&0<=e[0])a.setSelectedIndex(e[0]);else if(a.isMatchRequired())e=y.call(a,t,!0),a.setSelectedIndex(e?e[0]:-1);else{var i=a._snapshoot();a.setSelectedIndex(-1),n.val(t),w.call(a,t&&0<t.length),i.done()}T.call(a)}},200)},g=function(t){h.fn.mouseDebounce(t,T.bind(this))},m=function(t){$(t.target).is(".dropdown")&&T.call(this)},v=function(t){var e=this._snapshoot();this._getItems().removeClass("selected"),c.select.updateSelection.call(this),b.call(this),e.done()},b=function(){var e=this,t=this.getSelectedData(!0),i=u.map(t,function(t){return e._getDataLabel(t)});this.$el.find(".ipt > input").val(i.join(",")||""),w.call(this,t&&0<t.length)},y=function(r,o,l){if(u.isBlank(r))return null;var d=this,c=null;return x.call(this,this.getData(!0),function(t,e,i,n){var a=d._getDataLabel(t)||"";if(r==a)return!(c=[e,t]);if(o&&r.length<a.length){var s=a.indexOf(r);if(0==s||0<s&&!l)return!(c=[e,t])}}),c},_=function(t,e){return e?t.addClass("selected").attr("selected","selected"):t.removeClass("selected").removeAttr("selected"),t},w=function(t){t?this.$el.addClass("has-val"):this.$el.removeClass("has-val")},D=function(){return this.$el.is(".show-dropdown")},i=function(){if(!D.call(this)){var t=this.$el.addClass("show-dropdown");if(this.isRenderAsApp())$("html,body").addClass("ui-scrollless");else{t.on("mouseenter",g.bind(this)),t.on("mouseleave",g.bind(this));var e=t.children(".dropdown"),i=h.fn.getDropdownHeight.call(this,e);u.offset(e,this._getScrollContainer(),0,i).isOverflowY&&t.addClass("show-before")}var n=this;setTimeout(function(){n.t_focus&&(clearTimeout(n.t_focus),n.t_focus=0)},100),setTimeout(function(){t.addClass("animate-in")},0)}},T=function(){$("html,body").removeClass("ui-scrollless");var t=this.$el.addClass("animate-out");t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},x=function(t,e){for(var i=0,n=0;n<t.length;n++){var a=t[n];if(u.isArray(a)&&0<a.length)for(var s=0;s<a.length;s++){if(!1===e(a[s],i,a,s))return;i+=1}else{if(!1===e(a,i,t,n))return;i+=1}}};c.register(".ui-combobox",a)}}(),function(i){if(i||!VRender.Component.Render.datepicker){var f=i?require(__vrender__).Utils:VRender.Utils,r=i?require("./_base"):VRender.Component.Render,n=i?require("../../../ui/component/UIButton"):VRender.Component.Button,C=["一","二","三","四","五","六","七","八","九","十","十一","十二"],g=["周日","周一","周二","周三","周四","周五","周六"],t=function(t,e){r._base.call(this,t,e)},e=t.prototype=new r._base;e.render=function(t,e){r._base.render.call(this,t,e),e.addClass("ui-datepicker");var i=this.options||{},n=f.toDate(i.min);n&&e.attr("opt-min",f.toDateString(n,"yyyy-MM-dd"));var a=f.toDate(i.max);a&&e.attr("opt-max",f.toDateString(a,"yyyy-MM-dd"));var s=y.call(this,n,a);return this.isRangeDate()?(e.addClass("is-range"),s&&(e.attr("data-start",f.toDateString(s[0],"yyyy-MM-dd")),e.attr("data-end",f.toDateString(s[1],"yyyy-MM-dd")))):s&&e.attr("data-dt",f.toDateString(s,"yyyy-MM-dd")),o.call(this,t,e),l.call(this,t,e),d.call(this,t,e),c.call(this,t,e,s),this},e.getMinDate=function(){return f.toDate(this.options.min)},e.getMaxDate=function(){return f.toDate(this.options.max)},e.isRangeDate=function(){return f.isTrue(this.options.range)};var o=function(e,t){var i=e("<header></header>").appendTo(t),n=e("<div class='title'></div>").appendTo(i),a=function(){var t=e("<dl class='item'></dl>").appendTo(n);return t.append("<dt class='lbl'>-</dt><dd class='val'>-</dd>"),t.append("<button class='prev y'>&nbsp;</button>"),t.append("<button class='prev m'>&nbsp;</button>"),t.append("<button class='next m'>&nbsp;</button>"),t.append("<button class='next y'>&nbsp;</button>"),t};this.isRangeDate()?(a().addClass("s").children(".lbl").html("开始日期<span class='y'></span>"),a().addClass("e").children(".lbl").html("结束日期<span class='y'></span>")):a(),this.isRenderAsApp()&&(i.append("<button class='today'><label>今天</label></button>"),i.append("<button class='clear'><label>清除</label></button>"))},l=function(t,e){var i=t("<section></section>").appendTo(e);this.isRangeDate()&&!this.isRenderAsApp()?(p(t,i).addClass("s"),p(t,i).addClass("e")):p(t,i).addClass("t0")},d=function(t,e){if(this.isRangeDate()){var i=t("<footer></footer>").appendTo(e);if(this.isRenderAsApp())v.call(this,i,{label:"使用日期",type:"primary",cls:"okbtn"});else{i.append("<div class='vals'><span class='s'>-</span> - <span class='e'>-</span></div>");var n=t("<div class='btns'></div>").appendTo(i);v.call(this,n,{label:"确定",type:"primary",cls:"okbtn"}),v.call(this,n,{label:"取消",type:"cancel",cls:"cancelbtn"})}}},c=function(t,e,i,n){i=f.toArray(i),(n=f.toArray(n))[0]instanceof Date||(n=[],this.isRangeDate()&&!this.isRenderAsApp()?(n.push(i[0]||new Date),n.push(i[1])):n.push(i[0]||new Date)),a.call(this,t,e,n,i),s.call(this,t,e,n,i),u.call(this,t,e,n,i),this.isRangeDate()&&!this.isRenderAsApp()||(b(n[0],new Date)?e.attr("cur-month","1"):e.removeAttr("cur-month"))},a=function(t,e,i,n){var a=e.children("header");if(this.isRangeDate()){var s,r,o="--",l="--",d=" ",c=" ";if(this.isRenderAsApp()){if(n&&0<n.length){s=n[0],r=n[1];var u=(new Date).getFullYear();s&&(s.getFullYear()!=u&&(d=s.getFullYear()),o=f.toDateString(s,"M月d日")+" "+g[s.getDay()]),r&&(r.getFullYear()!=u&&(c=r.getFullYear()),c=r.getFullYear()==u?" ":r.getFullYear(),l=f.toDateString(r,"M月d日")+" "+g[r.getDay()])}a.find(".item.s .y").text(d),a.find(".item.e .y").text(c)}else s=i&&i[0]||new Date,r=i&&i[1]||s,b(s,r)&&(r=new Date(r.getTime())).setMonth(r.getMonth()+1),o=s.getFullYear()+"年 "+C[s.getMonth()]+"月",l=r.getFullYear()+"年 "+C[r.getMonth()]+"月",m(t,e,s,r);a.find(".item.s .val").text(o),a.find(".item.e .val").text(l)}else{var h=i&&i[0]||new Date,p=h.getFullYear()+"年 "+C[h.getMonth()]+"月";a.find(".item .lbl").text(p),h=n&&n[0],a.find(".item .val").text(h?f.toDateString(h,"yyyy.MM.dd"):"-")}},s=function(t,e,i,n){if(this.isRangeDate()&&!this.isRenderAsApp()){var a=i&&i[0]||new Date,s=i&&i[1]||a;b(a,s)&&(s=new Date(s.getTime())).setMonth(s.getMonth()+1),h.call(this,t,e,e.find(".table.s"),a,n),h.call(this,t,e,e.find(".table.e"),s,n)}else{var r=i&&i[0]||new Date;h.call(this,t,e,e.find(".table.t0"),r,n)}},u=function(t,e,i,n){if(this.isRangeDate()&&!this.isRenderAsApp()){var a=" ",s=" ";n&&0<n.length&&(n[0]&&(a=f.toDateString(n[0],"yyyy.MM.dd")),n[1]&&(s=f.toDateString(n[1],"yyyy.MM.dd")));var r=e.find("footer .vals");r.children(".s").text(a),r.children(".e").text(s)}},h=function(t,e,i,n,a){var s=n.getFullYear(),r=n.getMonth();i.attr("data-y",s).attr("data-m",r);var o=new Date,l=I(o),d=a&&a[0],c=a&&a[1],u=I(d),h=I(c)||u,p=I(this.getMinDate()),f=I(this.getMaxDate())||21001231,g=new Date(s,r,1),m=g.getDay();g.setDate(m?2-m:-5);var v=(o.getFullYear()==s?"":s+"年 ")+C[r]+"月";i.find(".month").text(v);for(var b=i.find("table.body tbody").empty();;){for(var y=t("<tr></tr>").appendTo(b),_=0;_<7;_++){var w=g.getFullYear(),D=g.getMonth(),$=g.getDate(),T=1e4*w+100*D+$,x=t("<td></td>").appendTo(y);x.append("<span>"+$+"</span>"),x.attr("data-dt",w+"-"+(D+1)+"-"+$),T==l&&x.addClass("today"),D!=r&&x.addClass("over"),(D!=r||T<p||f<T)&&x.addClass("disabled"),u<=T&&T<=h&&(x.addClass("selected"),T==u&&x.addClass("start"),T==h&&x.addClass("end")),g.setDate($+1)}if(g.getMonth()>r||g.getFullYear()>s)break}},m=function(t,e,i,n){var a=(e=e.children("header")).find(".item.s .next.y, .item.e .prev.y"),s=e.find(".item.s .next.m, .item.e .prev.m"),r=i.getFullYear(),o=i.getMonth(),l=n.getFullYear(),d=n.getMonth();100*(l-1)+d<=100*r+o?a.addClass("disabled"):a.removeClass("disabled"),l<r||r==l&&d-1<=o?s.addClass("disabled"):s.removeClass("disabled")},p=function(t,e){var i;return e=t("<div class='table'></div>").appendTo(e),(i=t("<table class='head'></table>").appendTo(e)).append("<thead><tr><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th><th>日</th></tr></thead>"),(i=t("<table class='body'></table>").appendTo(e)).append("<thead><tr><th colspan='7'><div class='month'>-</div></th></tr></thead>"),i.append("<tbody></tbody>"),e},v=function(t,e){i?new n(this.context,e).render(t):n.create(f.extend({},e,{target:t}))},b=function(t,e){return!(!t||!e)&&(t.getMonth()==e.getMonth()&&t.getFullYear()==e.getFullYear())},y=function(t,e){var i=I(t),n=I(e);if(i&&n&&n<i)return null;if(this.isRangeDate()){var a=f.toDate(this.options.start);if(a){a=new Date(a.getTime());var s=f.toDate(this.options.end)||new Date(a.getTime());s=new Date(s?s.getTime():a.getTime());var r=I(a),o=I(s);if(r<=o&&(i&&r<i&&(a=t),n&&n<o&&(s=e),I(a)<=I(s)))return[a,s]}}else{var l=f.toDate(this.options.date);if(l){l=new Date(l.getTime());var d=I(l);return i&&d<i||n&&n<d?null:l}}return null},I=function(t){return t?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};i?module.exports=t:(t.createTable=p,t.renderDate=c,t.renderPickerDate=h,VRender.Component.Render.datepicker=t)}}("undefined"==typeof VRender),function(){if(!VRender.Component.DatePicker){var h=VRender.Utils,n=VRender.Component,u=n.Render.datepicker,a=window.UIDatePicker=n.DatePicker=function(t,e){if(!n.base.isElement(t))return a.create(t);if(this.init(t,e)!==this)return n.get(t);if(this.$el.on("tap","header .title button",s.bind(this)),this.$el.on("tap","section td",r.bind(this)),this.$el.on("tap","footer .okbtn",o.bind(this)),this.$el.on("tap","footer .cancelbtn",l.bind(this)),this.isRenderAsApp()){this.$el.on("tap",function(t){return!1}),this.$el.on("tap","header .today",d.bind(this)),this.$el.on("tap","header .clear",c.bind(this));var i=this.$el.children("section");i.on("touchstart",p.bind(this)),i.on("touchmove",p.bind(this)),i.on("touchend",p.bind(this))}},t=a.prototype=new n.base;a.find=function(t){return n.find(t,".ui-datepicker",a)},a.create=function(t){return n.create(t,a,u)},t.getDate=function(t){if(!this.isRangeDate()){var e=h.toDate(this.$el.attr("data-dt"));return e&&h.isNotBlank(t)?h.toDateString(e,t):e}var i=h.toDate(this.$el.attr("data-start"));if(i){var n=h.toDate(this.$el.attr("data-end"))||new Date(i.getTime());return n=h.toDate(h.toDateString(n,"yyyy-MM-dd 23:59:59")),h.isNotBlank(t)&&(i=h.toDateString(i,t),n=h.toDateString(n,t)),[i,n]}return null},t.setDate=function(t){var e=this._snapshoot(),i=this.getMinDate(),n=this.getMaxDate(),a=v(i),s=v(n);if(this.isRangeDate()){var r=h.toDate(t),o=null;if(r){o=h.toDate(arguments[1])||new Date(r.getTime());var l=v(r),d=v(o);a&&l<a&&(r=i),s&&s<d&&(o=n),v(r)<=v(o)?(r=h.toDateString(r,"yyyy-MM-dd"),o=h.toDateString(o,"yyyy-MM-dd")):r=o=null}this.$el.attr("data-start",r||""),this.$el.attr("data-end",o||"")}else{var c=h.toDate(t);if(c){var u=v(c);(a&&u<a||s&&s<u)&&(c=null)}this.$el.attr("data-dt",c?h.toDateString(c,"yyyy-MM-dd"):"")}e.compare()||f.call(this,this.getDate()),e.done()},t.getMinDate=function(){return h.toDate(this.$el.attr("opt-min"))},t.setMinDate=function(t){var e=h.toDate(t);if(v(e)!=v(this.getMinDate())){var i=this._snapshoot();if(this.$el.attr("opt-min",e?h.toDateString(e,"yyyy-MM-dd"):""),e){var n=v(e);if(this.isRangeDate()){var a=h.toDate(this.$el.attr("data-end"));if(a&&n>v(a))this.$el.attr("data-start","").attr("data-end","");else{var s=h.toDate(this.$el.attr("data-start"));s&&n>v(s)&&this.$el.attr("data-start",this.$el.attr("opt-min"))}}else{var r=h.toDate(this.$el.attr("data-dt"));r&&n>v(r)&&this.$el.attr("data-dt","")}}f.call(this),i.done()}},t.getMaxDate=function(){return h.toDate(this.$el.attr("opt-max"))},t.setMaxDate=function(t){var e=h.toDate(t);if(v(e)!=v(this.getMaxDate())){var i=this._snapshoot();if(this.$el.attr("opt-max",e?h.toDateString(e,"yyyy-MM-dd"):""),e){var n=v(e);if(this.isRangeDate()){var a=h.toDate(this.$el.attr("data-start"));if(a&&n<v(a))this.$el.attr("data-start","").attr("data-end","");else{var s=h.toDate(this.$el.attr("data-end"));s&&n<v(s)&&this.$el.attr("data-end",this.$el.attr("opt-max"))}}else{var r=h.toDate(this.$el.attr("data-dt"));r&&n<v(r)&&this.$el.attr("data-dt","")}}f.call(this),i.done()}},t.isRangeDate=function(){return this.$el.is(".is-range")},t.submit=function(){o.call(this)},t.cancel=function(){l.call(this)},t._snapshoot_shoot=function(t,e){t.selectedDate=e||this.getDate(),t.pickerDate=m.call(this),t.data=t.selectedDate},t._snapshoot_compare=function(t,e){var i=e||this.getDate();return i&&t.selectedDate?this.isRangeDate()?v(i[0])==v(t.selectedDate[0])&&v(i[1])==v(t.selectedDate[1]):v(i)==v(t.selectedDate):!(i||t.selectedDate)};var s=function(t){var e=$(t.currentTarget),i=null;if(this.isRangeDate()&&!this.isRenderAsApp()){var n=e.parent();n.is(".s")?i=this.$el.find(".table.s"):n.is(".e")&&(i=this.$el.find(".table.e"))}else i=this.$el.find(".table.t0");var a=parseInt(i.attr("data-y")),s=parseInt(i.attr("data-m")),r=new Date(a,s,1);e.is(".y")?r.setFullYear(a+(e.is(".prev")?-1:1)):r.setMonth(s+(e.is(".prev")?-1:1)),i.attr("data-y",r.getFullYear()).attr("data-m",r.getMonth()),f.call(this)},r=function(t){var e=$(t.currentTarget);if(!e.is(".disabled"))if(this.isRangeDate()){if(this.selectedSnapshoot||(this.selectedSnapshoot=this._snapshoot()),this.lastSelectedDate&&1==this.lastSelectedDate.length){var i=h.toDate(e.attr("data-dt"));i.getTime()>=this.lastSelectedDate[0].getTime()?this.lastSelectedDate.push(i):this.lastSelectedDate.unshift(i)}else this.lastSelectedDate=[],this.lastSelectedDate.push(h.toDate(e.attr("data-dt")));f.call(this)}else{var n=this._snapshoot();this.$el.find("td.selected").removeClass("selected"),e.addClass("selected"),this.$el.attr("data-dt",e.attr("data-dt"));var a=h.toDate(e.attr("data-dt"));this.$el.find(".title .item .val").text(h.toDateString(a,"yyyy.MM.dd")),n.done()}},o=function(){if(this.isRangeDate()){if(this.lastSelectedDate&&0<this.lastSelectedDate.length){var t=this.lastSelectedDate[0],e=this.lastSelectedDate[1]||t;this.$el.attr("data-start",h.toDateString(t,"yyyy-MM-dd")),this.$el.attr("data-end",h.toDateString(e,"yyyy-MM-dd")),this.lastSelectedDate=null}g.call(this,!0)}this.trigger("submit",this.getDate())},l=function(){if(this.isRangeDate())if(this.lastSelectedDate=null,this.selectedSnapshoot){var t=this.selectedSnapshoot.getState();g.call(this);var e=t.selectedDate,i=e&&e[0],n=e&&e[1];this.$el.attr("data-start",i?h.toDateString(i,"yyyy-MM-dd"):""),this.$el.attr("data-end",n?h.toDateString(n,"yyyy-MM-dd"):""),f.call(this,t.pickerDate)}else f.call(this);this.trigger("cancel",this.getDate())},d=function(){f.call(this,[new Date])},c=function(){var t=this._snapshoot();this.isRangeDate()?(g.call(this),this.$el.attr("data-start","").attr("data-end","")):this.$el.attr("data-dt",""),f.call(this),t.done(),this.trigger("clear")},p=function(t){var e=t.touches&&t.touches[0];if("touchstart"==t.type)this.touchData={startX:e.pageX,startY:e.pageY},this.touchData.tableContainer=this.$el.find(".table.t0"),this.touchData.mainTable=this.touchData.tableContainer.children("table.body");else if("touchmove"==t.type){if(1<t.touches.length)return;var i=e.pageX-this.touchData.startX;if(!this.touchData.moving&&(Math.abs(i)<10||15<Math.abs(e.pageY-this.touchData.startY)))return;this.touchData.moving=!0,this.touchData.lastOffset=i,this.touchData.mainTable.css("transform","translate("+i+"px,0px)");var n=0<i?this.touchData.prevTable:this.touchData.nextTable;if(!n){var a=parseInt(this.touchData.tableContainer.attr("data-y")),s=parseInt(this.touchData.tableContainer.attr("data-m"));n=u.createTable($,this.$el.children("section")).addClass("t1"),0<i?(s-=1,this.touchData.prevTable=n):(s+=1,this.touchData.nextTable=n);var r=new Date(a,s,1),o=this.lastSelectedDate||this.getDate();u.renderPickerDate.call(this,$,this.$el,n,r,o)}this.touchData.contentWidth||(this.touchData.contentWidth=this.$el.children("section").width()),i+=this.touchData.contentWidth*(0<i?-1:1),n.css("transform","translate("+i+"px,0px)")}else if("touchend"==t.type&&this.touchData.moving){i=0;20<Math.abs(this.touchData.lastOffset)&&(i+=this.touchData.contentWidth*(0<this.touchData.lastOffset?1:-1));var l="transform 200ms";this.touchData.mainTable.css("transition",l),this.touchData.mainTable.css("transform","translate("+i+"px,0px)"),0<this.touchData.lastOffset?(this.touchData.prevTable.css("transition",l),this.touchData.prevTable.css("transform","translate(0px,0px)")):(this.touchData.nextTable.css("transition",l),this.touchData.nextTable.css("transform","translate(0px,0px)"));var d=this.touchData;if(20<Math.abs(d.lastOffset)){var c=0<d.lastOffset?".prev.m":".next.m";this.$el.children("header").find(c).eq(0).tap()}setTimeout(function(){d.prevTable&&d.prevTable.remove(),d.nextTable&&d.nextTable.remove(),d.mainTable.css("transition",""),d.mainTable.css("transform","")},200)}},f=function(e){var i=this,t=function(){var t=i.lastSelectedDate||i.getDate();e=e||m.call(i),u.renderDate.call(i,$,i.$el,t,e)};t._name="ui.datepicker."+this.getViewId(),h.debounce(t,0)},g=function(t){this.lastSelectedDate=null,this.selectedSnapshoot&&(t?this.selectedSnapshoot.done():this.selectedSnapshoot.release(),this.selectedSnapshoot=null)},m=function(){var t=[];if(this.isRangeDate()&&!this.isRenderAsApp()){var e=this.$el.find(".table.s");t.push(new Date(parseInt(e.attr("data-y")),parseInt(e.attr("data-m")),1));var i=this.$el.find(".table.e");t.push(new Date(parseInt(i.attr("data-y")),parseInt(i.attr("data-m")),1))}else{var n=this.$el.find(".table.t0");t.push(new Date(parseInt(n.attr("data-y")),parseInt(n.attr("data-m")),1))}return t},v=function(t){return t?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};n.register(".ui-datepicker",a)}}(),function(o){if(o||!VRender.Component.Render.dateinput){var l=o?require(__vrender__).Utils:VRender.Utils,r=o?require("./_base"):VRender.Component.Render,t=function(t,e){r._base.call(this,t,e)},e=t.prototype=new r._base;e.render=function(t,e){r._base.render.call(this,t,e),e.addClass("ui-dateipt"),l.isTrue(this.options.native)&&e.attr("opt-native","1"),e.attr("opt-box",this.options.container);var i=l.toDate(this.options.min);e.attr("opt-min",i?l.toDateString(i,"yyyy-MM-dd"):null);var n=l.toDate(this.options.max);e.attr("opt-max",n?l.toDateString(n,"yyyy-MM-dd"):null);var a=l.toDate(this.options.date);if(a){var s=u(a);(i&&u(i)>s||n&&u(n)<s)&&(a=null)}return a&&(e.addClass("has-val"),e.attr("data-dt",l.toDateString(a,"yyyy-MM-dd"))),d.call(this,t,e,a),this},e.getDateFormat=function(){return this.options.dateFormat||this.options.format};var d=function(t,e,i){var n=t("<div class='ipt'></div>").appendTo(e),a=t("<input type='text' readonly='readonly'/>").appendTo(n);n.append("<span class='clear'></span>");var s=this.options.prompt;l.isNotBlank(s)&&t("<span class='prompt'></span>").appendTo(n).text(s);var r=this.getDateFormat();a.val(c(i,r)||""),o&&r&&(l.isFunction(r)?e.write("<div class='ui-hidden format format-fn'>"+escape(r)+"</div>"):e.write("<div class='ui-hidden format'>"+r+"</div>"))},c=function(t,e){return t?l.isFunction(e)?e(t):(l.isBlank(e)&&(e="yyyy-MM-dd"),l.toDateString(t,e)):""},u=function(t){return t instanceof Date?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};o?module.exports=t:(t.getFormatDate=c,VRender.Component.Render.dateinput=t)}}("undefined"==typeof VRender),function(){if(!VRender.Component.DateInput){var r=VRender.Utils,n=VRender.Component,e=n.Render,i=e.dateinput,a=window.UIDateInput=n.DateInput=function(t,e){if(!n.base.isElement(t))return a.create(t);if(this.init(t,e)!==this)return n.get(t);var i=this.inputTag=this.$el.children(".ipt");i.on("tap",".clear",o.bind(this)),this.isRenderAsApp()&&this.isNative()?d.call(this):i.on("tap",s.bind(this))},t=a.prototype=new n.base;a.find=function(t){return n.find(t,".ui-dateipt",a)},a.create=function(t){return n.create(t,a,i)},t.getDate=function(t){var e=r.toDate(this.$el.attr("data-dt"));return e&&r.isNotBlank(t)?r.toDateString(e,t):e},t.setDate=function(t){var e=this._snapshoot(),i=r.toDate(t);if(i){var n=f(i),a=this.getMinDate();if(a&&f(a)>n)i=null;else{var s=this.getMaxDate();s&&f(s)<n&&(i=null)}}this.$el.attr("data-dt",i?r.toDateString(i,"yyyy-MM-dd"):""),h.call(this),e.done(i)},t.getMinDate=function(){return r.toDate(this.$el.attr("opt-min"))},t.setMinDate=function(t){var e=r.toDate(t);if(f(e)!=f(this.getMinDate())){var i=this._snapshoot();if(this.$el.attr("opt-min",e?r.toDateString(e,"yyyy-MM-dd"):""),e){var n=this.getDate();n&&f(e)>f(n)&&this.$el.attr("data-dt","")}h.call(this),i.done()}},t.getMaxDate=function(){return r.toDate(this.$el.attr("opt-max"))},t.setMaxDate=function(t){var e=r.toDate(t);if(f(e)!=f(this.getMaxDate())){var i=this._snapshoot();if(this.$el.attr("opt-max",e?r.toDateString(e,"yyyy-MM-dd"):""),e){var n=this.getDate();n&&f(e)<f(n)&&this.$el.attr("data-dt","")}h.call(this),i.done()}},t.getDateFormat=function(){if(this.options.hasOwnProperty("dateFormat"))return this.options.dateFormat;if(this.options.hasOwnProperty("format"))return this.options.format;var t=this.$el.children(".format").text();return t&&0<this.$el.children(".format-fn").length&&(t=new Function("var Utils=VRender.Utils;return ("+unescape(t)+");")()),this.$el.children(".format").remove(),this.options.dateFormat=t},t.setDateFormat=function(t){this.options.dateFormat=t,this.$el.children(".format").remove(),this.setDate(this.getDate())},t.getPrompt=function(){return this.inputTag.children(".prompt").text()},t.setPrompt=function(t){this.inputTag.children(".prompt").remove(),r.isNotNull(t)&&(t=r.trimToEmpty(t),$("<span class='prompt'></span>").appendTo(this.inputTag).text(t))},t.isNative=function(){return 1==this.$el.attr("opt-native")},t._snapshoot_shoot=function(t,e){t.data=e||this.getDate()},t._snapshoot_compare=function(t,e){return(e=e||this.getDate())&&t.data?e.getDate()==t.data.getDate()&&e.getMonth()==t.data.getMonth()&&e.getFullYear()==t.data.getFullYear():e==t.data};var s=function(t){c.call(this)},o=function(t){return this.setDate(null),this.trigger("clear"),!1},l=function(t){e.fn.mouseDebounce(t,u.bind(this))},d=function(){var t=$("<input class='origin-dateipt' type='date'/>").appendTo(this.inputTag);p.call(this,this.getDate(),this.getMinDate(),this.getMaxDate()),t.on("change",function(t){this.setDate(r.toDate($(t.currentTarget).val()))}.bind(this))},c=function(){if(!this.picker){var t={};t.target=$("<div class='picker'></div>").appendTo(this.$el),t.date=this.getDate(),t.min=this.getMinDate(),t.max=this.getMaxDate(),this.picker=n.DatePicker.create(t),this.picker.on("change",function(t,e){this.setDate(e),u.call(this)}.bind(this)),this.picker.on("clear",function(t){this.setDate(null),u.call(this)}.bind(this))}if(!this.$el.is(".show-picker")){var e=this.$el.addClass("show-picker");if(this.isRenderAsApp())$("html, body").addClass("ui-scrollless"),e.children(".picker").on("tap",u.bind(this));else{e.on("mouseenter",l.bind(this)),e.on("mouseleave",l.bind(this));var i=e.children(".picker");r.offset(i,this._getScrollContainer(),0,i[0].scrollHeight).isOverflowY&&e.addClass("show-before")}setTimeout(function(){e.addClass("animate-in")},0)}},u=function(){var t=this.$el.addClass("animate-out");this.isRenderAsApp()?($("html, body").removeClass("ui-scrollless"),t.children(".picker").off("tap")):t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},h=function(){var e=this,t=function(){var t=e.getDate();t?e.$el.addClass("has-val"):e.$el.removeClass("has-val"),e.inputTag.find("input").val(i.getFormatDate(t,e.getDateFormat())),p.call(e,t,e.getMinDate(),e.getMaxDate())};t._name="ui.dateinput."+this.getViewId(),r.debounce(t,0)},p=function(t,e,i){if(this.isRenderAsApp()&&this.isNative()){var n=this.inputTag.children(".origin-dateipt");n.val(t?r.toDateString(t,"yyyy-MM-dd"):""),n.attr("min",e?r.toDateString(e,"yyyy-MM-dd"):""),n.attr("max",i?r.toDateString(i,"yyyy-MM-dd"):"")}else this.picker&&(this.picker.setMinDate(e),this.picker.setMaxDate(i),this.picker.setDate(t))},f=function(t){return t?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};n.register(".ui-dateipt",a)}}(),function(l){if(l||!VRender.Component.Render.daterange){var d=l?require(__vrender__).Utils:VRender.Utils,r=l?require("./_base"):VRender.Component.Render,t=function(t,e){r._base.call(this,t,e)},e=t.prototype=new r._base;e.render=function(t,e){r._base.render.call(this,t,e),e.addClass("ui-daterange"),d.isTrue(this.options.dropdown)&&e.addClass("tools-dropdown"),d.isTrue(this.options.native)&&e.attr("opt-native","1");var i=d.toDate(this.options.min);i&&e.attr("opt-min",d.toDateString(i,"yyyy-MM-dd"));var n=d.toDate(this.options.max);n&&e.attr("opt-max",d.toDateString(n,"yyyy-MM-dd"));var a=d.toDate(this.options.start),s=null;return a&&(s=d.toDate(this.options.end)||new Date(a.getTime()),i&&h(i)>h(a)&&(a=i),n&&h(n)<h(s)&&(s=n),h(a)>h(s)&&(a=s=null)),a&&s&&(e.addClass("has-val"),e.attr("data-start",d.toDateString(a,"yyyy-MM-dd")),e.attr("data-end",d.toDateString(s,"yyyy-MM-dd"))),o.call(this,t,e,this.getShortcutDates()),c.call(this,t,e,a,s),this},e.getDateFormat=function(){return this.options.dateFormat||this.options.format},e.getShortcutDates=function(){return this.options.shortcuts||this.options.quickDates};var o=function(n,t,e){if(t.removeClass("has-tools").children(".tools").remove(),(e=s(e))&&0<e.length){t.addClass("has-tools");var i=n("<div class='tools'></div>").prependTo(t);i.append("<span class='label'>选择日期</span>");var a=n("<div class='items'></div>").appendTo(i);d.each(e,function(t){var e=parseInt(t.value)||0,i=n("<div class='item'></div>").appendTo(a);i.attr("data-val",e),i.text(d.isBlank(t.label)?"最近"+e+"天":t.label)})}},c=function(t,e,i,n){var a=t("<div class='ipt'></div>").appendTo(e),s=t("<input type='text' readonly='readonly'/>").appendTo(a);a.append("<span class='clear'></span>");var r=this.options.prompt;d.isNotBlank(r)&&t("<span class='prompt'></span>").appendTo(a).text(r);var o=this.getDateFormat();s.val(u(i,n,o)||""),l&&o&&(d.isFunction(o)?e.write("<div class='format format-fn'>"+escape(o)+"</div>"):e.write("<div class='format'>"+o+"</div>"))},n=function(t,e){return d.isFunction(e)?e(t):(d.isBlank(e)&&(e="yyyy-MM-dd"),d.toDateString(t,e))},s=function(t){var e=[];return d.each(d.toArray(t),function(t){d.isNotBlank(t)&&("object"!=typeof t&&(t={value:t}),t.value=parseInt(t&&t.value)||0,0<t.value&&e.push(t))}),e},u=function(t,e,i){return t&&e?n(t,i)+" 至 "+n(e,i):""},h=function(t){return t instanceof Date?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};l?module.exports=t:(t.getDateRangeLabel=u,t.renderShortcuts=o,VRender.Component.Render.daterange=t)}}("undefined"==typeof VRender),function(){if(!VRender.Component.DateRange){var d=VRender.Utils,a=VRender.Component,s=a.Render.daterange,r=window.UIDateRange=a.DateRange=function(t,e){if(!a.base.isElement(t))return r.create(t);if(this.init(t,e)!==this)return a.get(t);var i=this.inputTag=this.$el.children(".ipt");if(i.on("tap",".clear",h.bind(this)),this.isRenderAsApp()&&this._isNative())v.call(this);else if(i.on("tap",o.bind(this)),i.on("tap",".picker",function(t){return!1}),!this.isRenderAsApp()){var n=this.$el.children(".tools");n.on("tap",".item",l.bind(this)),n.on("tap",".label",c.bind(this)),n.on("mouseenter",u.bind(this)),n.on("mouseleave",u.bind(this))}},t=r.prototype=new a.base;r.find=function(t){return a.find(t,".ui-daterange",r)},r.create=function(t){return a.create(t,r,s)},t.getDateRange=function(t){var e=this.getStartDate(),i=this.getEndDate();return e&&i?(d.isNotBlank(t)&&(e=d.toDateString(e,t),i=d.toDateString(i,t)),[e,i]):null},t.setDateRange=function(t,e){var i=this._snapshoot();if(e=((t=d.toDate(t))?d.toDate(e):null)||t,t&&e){var n=this.getMinDate(),a=this.getMaxDate();n&&y(n)>y(t)&&(t=n),a&&y(a)<y(e)&&(e=a),y(t)>y(e)&&(t=e=null)}this.$el.attr("data-start",t?d.toDateString(t,"yyyy-MM-dd"):""),this.$el.attr("data-end",e?d.toDateString(e,"yyyy-MM-dd"):""),p.call(this,i),i.done()},t.getStartDate=function(){return d.toDate(this.$el.attr("data-start"))},t.setStartDate=function(t){this.setDateRange(t,this.getEndDate())},t.getEndDate=function(){return d.toDate(this.$el.attr("data-end"))},t.setEndDate=function(t){this.setDateRange(this.getStartDate(),t)},t.getMinDate=function(){return d.toDate(this.$el.attr("opt-min"))},t.setMinDate=function(t){var e=d.toDate(t);if(y(e)!=y(this.getMinDate())){var i=this._snapshoot();if(this.$el.attr("opt-min",e?d.toDateString(e,"yyyy-MM-dd"):""),e){var n=this.getEndDate();if(n&&y(n)<y(e))this.$el.attr("data-start","").attr("data-end","");else{var a=this.getStartDate();a&&y(a)<y(e)&&this.$el.attr("data-start",this.$el.attr("opt-min"))}}p.call(this,i),i.done()}},t.getMaxDate=function(){return d.toDate(this.$el.attr("opt-max"))},t.setMaxDate=function(t){var e=d.toDate(t);if(y(e)!=y(this.getMaxDate())){var i=this._snapshoot();if(this.$el.attr("data-max",e?d.toDateString(e,"yyyy-MM-dd"):""),e){var n=this.getStartDate();if(n&&y(n)>y(e))this.$el.attr("data-start","").attr("data-end","");else{var a=this.getEndDate();a&&y(a)>y(e)&&this.$el.attr("data-end",this.$el.attr("opt-max"))}}p.call(this,i),i.done()}},t.getDateFormat=function(){if(this.hasOwnProperty("_dateFormat"))return this._dateFormat;if(this.options.hasOwnProperty("dateFormat"))return this.options.dateFormat;if(this.options.hasOwnProperty("format"))return this.options.format;var t=this.$el.children(".format").text();return t&&0<this.$el.children(".format-fn").length&&(t=new Function("var Utils=VRender.Utils;return ("+unescape(t)+");")()),this.$el.children(".format").remove(),this._dateFormat=t},t.setDateFormat=function(t){if(this._dateFormat=t,this.$el.children(".format").remove(),this.$el.is("has-val")){var e=this.getStartDate(),i=this.getEndDate(),n="";e&&i&&(n=s.getDateRangeLabel.call(this,e,i,t)),this.inputTag.find("input").val(n||"")}},t.setShortcuts=function(t){s.renderShortcuts.call(this,this.$el,t)},t._snapshoot_shoot=function(t){t.data=this.getDateRange(),t.min=this.getMinDate(),t.max=this.getMaxDate()},t._snapshoot_compare=function(t){var e=this.getDateRange();return t.data&&e?y(t.data[0])==y(e[0])&&y(t.data[1])==y(e[1]):!(t.data||e)},t._isNative=function(){return 1==this.$el.attr("opt-native")};var o=function(t){e.call(this)},l=function(t){var e=$(t.currentTarget);e.addClass("selected").siblings().removeClass("selected"),e.parent().parent().children(".label").text(e.text()),this.$el.removeClass("show-dropdown"),n.call(this,e.attr("data-val"))},c=function(t){this.$el.addClass("show-dropdown")},u=function(t){if(this.t_shortcut&&clearTimeout(this.t_shortcut),"mouseleave"==t.type&&this.$el.is(".show-dropdown")){var e=this;this.t_shortcut=setTimeout(function(){e.t_shortcut=0,e.$el.removeClass("show-dropdown")},1e3)}},h=function(t){return this.setDateRange(null,null),!1},i=function(t){var e=$(t.currentTarget),i=d.toDate(e.val());e.is(".start")?this.setDateRange(i,this.getEndDate()):this.setDateRange(this.getStartDate(),i)},p=function(t){var n=this,e=function(){var t=n.getDateRange(),e=t&&t[0],i=t&&t[1];f.call(n,e,i),g.call(n,e,i),m.call(n,e,i,n.getMinDate(),n.getMaxDate())};e._name="ui.daterange.refresh."+this.getViewId(),d.debounce(e,0)},f=function(t,e){var i=s.getDateRangeLabel(t,e,this.getDateFormat());this.inputTag.find("input").val(i||""),t&&e?this.$el.addClass("has-val"):this.$el.removeClass("has-val")},g=function(t,e){var i=this.$el.children(".tools"),n=i.children(".label").text("选择日期"),a=i.find(".item").removeClass("selected");if(t&&e&&-1==d.getDays(e,new Date))for(var s=d.getDays(e,t)+1,r=0,o=a.length;r<o;r++){var l=a.eq(r);if(l.attr("data-val")==s){l.addClass("selected"),n.text(l.text());break}}},m=function(t,e,i,n){if(this.isRenderAsApp()&&this._isNative()){var a=this.inputTag.children(".origin-dateipt.start"),s=this.inputTag.children(".origin-dateipt.end");a.val(t?d.toDateString(t,"yyyy-MM-dd"):""),s.val(e?d.toDateString(e,"yyyy-MM-dd"):""),i=i?d.toDateString(i,"yyyy-MM-dd"):"",n=n?d.toDateString(n,"yyyy-MM-dd"):"",a.attr("min",i).attr("max",n),s.attr("min",i).attr("max",n)}else this.picker&&(this.picker.setMinDate(i),this.picker.setMaxDate(n),this.picker.setDate(t,e))},n=function(t){if(0<(t=parseInt(t)||0)){var e=new Date,i=new Date;e.setDate(e.getDate()-t),i.setDate(i.getDate()-1),this.setDateRange(e,i)}},v=function(){var t=$("<input class='origin-dateipt start' type='date'/>").appendTo(this.inputTag),e=$("<input class='origin-dateipt end' type='date'/>").appendTo(this.inputTag);m.call(this,this.getStartDate(),this.getEndDate(),this.getMinDate(),this.getMaxDate()),t.on("change",i.bind(this)),e.on("change",i.bind(this))},e=function(){if(!this.picker){var t={range:!0};t.target=$("<div class='picker'></div>").appendTo(this.inputTag),t.min=this.getMinDate(),t.max=this.getMaxDate(),t.start=this.getStartDate(),t.end=this.getEndDate(),this.picker=a.DatePicker.create(t),this.picker.on("submit",function(t,e){b.call(this),this.setDateRange(e&&e[0],e&&e[1])}.bind(this)),this.picker.on("cancel",function(t){b.call(this)}.bind(this))}if(!this.$el.is(".show-picker")){var e=this.$el.addClass("show-picker");if(this.isRenderAsApp())$("html, body").addClass("ui-scrollless"),this.inputTag.children(".picker").on("tap",function(t){b.call(this),this.picker&&this.picker.cancel()}.bind(this));else{var i=this.inputTag.children(".picker"),n=d.offset(i,this._getScrollContainer(),0,i[0].scrollHeight);n.isOverflowX&&e.addClass("show-right"),n.isOverflowY&&e.addClass("show-before")}setTimeout(function(){e.addClass("animate-in")},0)}},b=function(){var t=this.$el.addClass("animate-out");this.isRenderAsApp()&&($("html, body").removeClass("ui-scrollless"),this.$el.children(".picker").off("tap")),setTimeout(function(){t.removeClass("show-picker").removeClass("show-before").removeClass("show-right"),t.removeClass("animate-in").removeClass("animate-out")},300)},y=function(t){return t instanceof Date?1e4*t.getFullYear()+100*t.getMonth()+t.getDate():0};a.register(".ui-daterange",r)}}(),function(s){if(s||!VRender.Component.Render.popupmenu){var r=s?require(__vrender__).Utils:VRender.Utils,o=s?require("./_base"):VRender.Component.Render,t=function(t,e){o._item.call(this,t,e)},e=t.prototype=new o._item;e.render=function(t,e){e.addClass("ui-popupmenu"),o._item.render.call(this,t,e);var i=this.options||{};if(s){var n=i.actionTarget;n&&("string"==typeof n?e.attr("opt-target",r.trimToEmpty(n)):r.isFunction(n.getViewId)&&e.attr("opt-target","[vid='"+n.getViewId()+"']")),i.actionType&&e.attr("opt-trigger",i.actionType);var a=i.iconFunction;r.isFunction(a)?o.fn.renderFunction(e,"icfunc",a):i.iconField&&e.attr("opt-ic",i.iconField),i.childrenField&&e.attr("opt-child",i.childrenField),i.disabledField&&e.attr("opt-disable",i.disabledField),i.offsetLeft&&e.attr("opt-offsetl",i.offsetLeft),i.offsetTop&&e.attr("opt-offsett",i.offsetTop)}return this},e._renderItems=function(t,e){},e._renderEmptyView=function(){},e._renderLoadView=function(){},e._doAdapter=function(t,e){if(r.isArray(t)){var i=this,n=r.map(t,function(t){return o.fn.doAdapter.call(i,t)});return t.title&&(s?n.unshift({__group__:t.title}):n.title=t.title),n}return o.fn.doAdapter.call(this,t,e)},s?module.exports=t:VRender.Component.Render.popupmenu=t}}("undefined"==typeof VRender),function(){if(!VRender.Component.PopupMenu){var o=VRender.Utils,l=VRender.Component,t=l.Render,e=t.popupmenu,i=window.UIPopupMenu=l.PopupMenu=function(t,e){return l.base.isElement(t)?this.init(t,e)!=this?l.get(t):(this.options.autoLoad=!1,this.setActionTarget(this.getActionTarget()),this.$el.on("tap",s.bind(this)),this.$el.on("tap",".menu",r.bind(this)),this.$el.on("tap",".more",d.bind(this)),void(this.isRenderAsApp()?this.$el.on("tap",".back",c.bind(this)):(this.$el.on("mouseenter",".menu",u.bind(this)),this.$el.on("mouseleave",".menu",h.bind(this)),this.$el.on("mouseenter",".menu-container > .btn",p.bind(this)),this.$el.on("mouseleave",".menu-container > .btn",f.bind(this))))):i.create(t)},n=i.prototype=new l.item;i.find=function(t){return l.find(t,".ui-popupmenu",i)},i.create=function(t){return l.create(t,i,e)},n.open=function(){var t=this.$el.show();if(g.call(this,t),this.isRenderAsApp())$("body").addClass("ui-scrollless"),setTimeout(function(){t.addClass("animate-open")},0);else{var e=this;setTimeout(function(){$("body").on("tap._"+e.getViewId(),function(){e.close(),e.trigger("cancel")})},0)}},n.close=function(){var t=this.$el;this.isRenderAsApp()?($("body").removeClass("ui-scrollless"),t.removeClass("animate-open"),t.children(".menu-container").last().height(0),setTimeout(function(){t.empty().hide()},300)):(t.empty().hide(),$("body").off("tap._"+this.getViewId()))},n.destory=function(){this.close();var t=this;setTimeout(function(){t.$el.remove()},300)},n.getActionTarget=function(){return this.options.hasOwnProperty("actionTarget")||(this.options.actionTarget=o.trimToNull(this.$el.attr("opt-target")),this.$el.removeAttr("opt-target")),this.options.actionTarget},n.setActionTarget=function(t){if(this.actionTarget!=t){var e=(o.trimToNull(this.getActionType())||"click")+"._"+this.getViewId();this.actionTarget&&("string"==typeof this.actionTarget?$("body").off(e,this.actionTarget):this.actionTarget.off(e)),this.actionTarget=t,this.actionTarget&&("string"==typeof this.actionTarget?$("body").on(e,this.actionTarget,a.bind(this)):(this.actionTarget=$(this.actionTarget),this.actionTarget.on(e,a.bind(this)))),this.$el.removeAttr("opt-target")}},n.getActionType=function(){return this.options.hasOwnProperty("actionType")||(this.options.actionType=o.trimToNull(this.$el.attr("opt-trigger")),this.$el.removeAttr("opt-trigger")),this.options.actionType},n.setActionType=function(t){this.options.actionType=t,this.$el.removeAttr("opt-trigger")},n.getIconField=function(){return this.options.hasOwnProperty("iconField")||(this.options.iconField=o.trimToNull(this.$el.attr("opt-ic"))||"icon",this.$el.removeAttr("opt-ic")),this.options.iconField},n.setIconField=function(t){this.options.iconField=t,this.$el.removeAttr("opt-ic")},n.getIconFunction=function(){return t.fn.getFunction.call(this,"iconFunction","icfunc")},n.setIconFunction=function(t){this.options.iconFunction=t,this.$el.children(".ui-fn[name='icfunc']").remove()},n.getOffsetLeft=function(){return this.options.hasOwnProperty("offsetLeft")||(this.options.offsetLeft=this.$el.attr("opt-offsetl"),this.$el.removeAttr("opt-offsetl")),this.options.offsetLeft?o.getFormatSize(this.options.offsetLeft,this.isRenderAsRem()):null},n.setOffsetLeft=function(t){this.options.offsetLeft=t,this.$el.removeAttr("opt-offsetl")},n.getOffsetTop=function(){return this.options.hasOwnProperty("offsetTop")||(this.options.offsetTop=this.$el.attr("opt-offsett"),this.$el.removeAttr("opt-offsett")),this.options.offsetTop?o.getFormatSize(this.options.offsetTop,this.isRenderAsRem()):null},n.setOffsetTop=function(t){this.options.offsetTop=t,this.$el.removeAttr("opt-offsett")},n._getChildrenField=function(){return"children"},n._getDisabledField=function(){return"disabled"},n._getIcon=function(t){var e=this.getIconFunction();if(o.isFunction(e))return e(t);var i=this.getIconField();return t&&i?t[i]:null},n._isDisabled=function(t){if(t){var e=this._getDisabledField();return!(!e||!o.isTrue(t[e]))}return!0},n._isChecked=function(t){return!!t&&!!t.checked},n._checkIfEmpty=function(){};var a=function(t){this._isMounted(this.$el)?this.open():this.setActionTarget(null)},s=function(t){return this.isRenderAsApp()&&$(t.target).is(".ui-popupmenu")&&(this.close(),this.trigger("cancel")),!1},r=function(t){var e=$(t.currentTarget);if(!e.is(".disabled"))if(e.is(".has-child"))this.isRenderAsApp()&&g.call(this,e);else{var i=R.call(this,e);if(i.toggle)if(i.checked)i.toggleRadio||(i.checked=!1);else{var n=this,a=function(t){t&&0<t.length&&o.each(t,function(t){o.isArray(t)?a(t):(t.toggle===i.toggle&&(t.checked=!1),a(N.call(n,t)))})};a(this.getData()),i.checked=!0}this.trigger("itemclick",i),this.close()}},d=function(t){var e=$(t.currentTarget),i=e.parent().parent().parent(),n=T.call(this),a=x.call(this);a.p_no=parseInt(e.attr("page-no"))||1,a.p_no+=1;var s=i.data("itemData");a.pid=this._getDataKey(s),e.parent().remove();var r=s?N.call(this,s):this.getData();r.pop();D.call(this,i,n,a,function(t,e){e&&0<e.length&&o.each(e,function(t){r.push(t)})})},c=function(t){var e=$(t.currentTarget).parent();e.height(0);var i=e.prev();i.height(0),setTimeout(function(){e.remove(),i.height(i.get(0).scrollHeight)},120)},u=function(t){var e=$(t.currentTarget);if(!e.is(".disabled")){var i=e.parent().parent().parent(),n=i.find(".hover");if(n&&0<n.length){n.removeClass("hover"),_.call(this,i);var a=parseInt(n.attr("t-hover"));a&&(clearTimeout(a),n.removeAttr("t-hover"))}e.addClass("hover"),e.is(".has-child")&&g.call(this,e)}},h=function(t){var e=$(t.currentTarget),i=e.data("submenu");if(!i||0==i.length){var n=setTimeout(function(){e.removeClass("hover"),e.removeAttr("t-hover")},100);e.attr("t-hover",n)}},p=function(t){var r=$(t.currentTarget),o=r.parent();o.attr("t_scroll",setTimeout(function(){var e=o.children(".menus"),i=o.height()-e.height(),n=parseInt(o.attr("scroll-top"))||0,a=r.is(".up")?5:-5,s=function(){var t=setTimeout(function(){var t=n+a;r.is(".up")?0<t&&(t=0):t<i&&(t=i),n!=t&&(n=t,o.attr("scroll-top",n),e.css("transform","translate(0px, "+n+"px)")),s()},50);o.attr("t_scroll",t)};s()},200))},f=function(t){var e=$(t.currentTarget).parent(),i=parseInt(e.attr("t_scroll"));i&&(clearTimeout(i),e.removeAttr("t_scroll"))},g=function(t){var e=R.call(this,t),i=F.call(this,t),n=m.call(this,t,e,i);if(o.isNull(n)){if(!w.call(this,t))return}else if(!(n&&0<n.length||w.call(this,t)))return;var a=$("<div class='menu-container'></div>").appendTo(this.$el);a.append("<div class='btn up'></div><div class='btn down'></div>"),this.isRenderAsApp()&&!C(t)&&$("<div class='back'></div>").appendTo(a).text(this.options.backText||"返回");var s=$("<div class='menus'></div>").appendTo(a);b.call(this,s,n),t.data("submenu",a),a.data("itemData",e),v.call(this,t,a),this.trigger("open",e)},m=function(t,e,i){var n={type:"open_before"};this.trigger(n,e,i),n.hasOwnProperty("returnValue")&&(i=n.returnValue);var a=i?o.toArray(i):null;e&&(e[this._getChildrenField()]=a);return a},v=function(t,e){if(this.isRenderAsApp());else{var i=C(t);if(i)e.css("left",this.getOffsetLeft()||""),e.css("top",this.getOffsetTop()||"");else(n=t.offset()).top-=3,n.left+=t.outerWidth()+1,e.offset(n);var n,a=(n=o.offset(e)).windowHeight;if(i&&(a-=n.top),e.css("maxHeight",a+"px"),!i){var s=e.offset();n.isOverflowX&&(s.left-=n.width+t.outerWidth()),n.isOverflowY&&(s.top-=n.top+n.height-n.windowHeight),e.offset({left:s.left,top:s.top})}e.height()<e.children(".menus").height()&&e.addClass("scroll").css("minHeight","80px")}},b=function(n,t){if(t&&0!=t.length){var a=this,s=n.children(".grp").last();if(o.each(t,function(t,e){if(o.isArray(t)&&0<t.length)s=$("<div class='grp'></div>").appendTo(n),t.title&&$("<div class='title'></div>").appendTo(s).text(t.title),o.each(t,function(t,e){if(0===e&&t.__group__)$("<div class='title'></div>").appendTo(s).text(t.__group__);else if("more"==t.__type__){var i=$("<div class='more'></div>").appendTo(s);i.attr("page-no",t.page),i.text(a.options.moreText||"加载更多")}else{var n=$("<div class='menu'></div>").appendTo(s);y.call(a,n,t)}}),s=null;else{s&&0!=s.length||(s=$("<div class='grp'></div>").appendTo(n));var i=$("<div class='menu'></div>").appendTo(s);y.call(a,i,t)}}),this.isRenderAsApp()){var e=n.parent();e.height(0),setTimeout(function(){e.height(e.get(0).scrollHeight)},0)}}},y=function(t,e){t.data("itemData",e);var i=this._getIcon(e);o.isNotBlank(i)&&$("<i></i>").appendTo(t).css("backgroundImage","url("+i+")");var n=$("<div></div>").appendTo(t),a=this.getItemRenderer();if(o.isFunction(a)){var s=a($,n,e);o.isNotNull(s)&&n.empty().append(s)}else{var r=this._getDataLabel(e);n.text(o.trimToEmpty(r))}N.call(this,e)&&t.addClass("has-child"),this._isDisabled(e)&&t.addClass("disabled").attr("disabled","disabled"),this._isChecked(e)&&t.addClass("checked")},_=function(t){for(var e=this.$el.children(".menu-container"),i=t.index(),n=e.length-1;0<=n;n--){if(n<=i)return;e.eq(n).remove()}},w=function(s){var t=T.call(this);if(o.isBlank(t))return!1;var e=x.call(this)||{};e.p_no=1,e.pid=I.call(this,s);var r=this;return setTimeout(function(){var a=s.data("submenu");D.call(r,a,t,e,function(t,e){var i=!1;if(e&&0!=e.length||(i=!0,(e=[{label:"没有选项"}])[0][r._getDisabledField()]=!0),C(s))r.options.data=e;else{var n=R.call(r,s);n&&(n[r._getChildrenField()]=e)}i&&b.call(r,a.children(".menus"),e)})},0),!0},D=function(t,e,i,n){var a=t.children(".menus"),s=$("<div class='grp'></div>").appendTo(a);$("<div class='loading'></div>").appendTo(s).append(this.options.loadingText||"正在加载...");var r=this;l.load.call(this,e,i,function(t,e){s.remove();var i=t?null:o.toArray(e);i&&0<i.length&&(i[0].children=[],r.hasMore()&&i.push([{__type__:"more",page:r._pageInfo.page}]),b.call(r,a,i)),n(t,i)})},T=function(){return this.lastLoadApi?this.lastLoadApi:this.options.hasOwnProperty("api")?this.options.api:this.$el.attr("api-name")},x=function(){if(this.lastLoadParams)return this.lastLoadParams;if(this.options.hasOwnProperty("params"))return this.options.params;try{return JSON.parse(this.$el.attr("api-params")||null)}catch(t){}return null},C=function(t){return t.is(".ui-popupmenu")},I=function(t){return this._getDataKey(R.call(this,t))},R=function(t){return C(t)?null:t.data("itemData")},F=function(t){if(C(t))return this.getData();var e=R.call(this,t);return N.call(this,e)},N=function(t){if(t){var e=this._getChildrenField();if(o.isArray(t[e]))return t[e]}return null};l.register(".ui-popupmenu",i)}}(),function(s){if(s||!VRender.Component.Render.radiogroup){var i=s?require(__vrender__).Utils:VRender.Utils,n=s?require("./_base"):VRender.Component.Render,r=s?require("../../../ui/component/UIRadiobox"):VRender.Component.Radiobox,a=1,t=function(t,e){n._select.call(this,t,e)},e=t.prototype=new n._select;e.render=function(t,e){e.addClass("ui-radgrp"),this.radioGroupId="rad-"+i.randomTxt(s?3:4)+a++,n._select.render.call(this,t,e)},e.renderSelection=function(t,e){var i=this.getSelectedIndex(!0);i&&e.attr("data-inds",i.join(","));var n=this.getSelectedKey(!0);n&&e.attr("data-ids",n.join(","))},e.isMultiple=function(){return!1},e._renderItems=function(t,e){var i=this._getItemContainer(t,e);i&&(this._cache_selected_indexs=this.getSelectedIndex(!0),this._cache_selected_ids=this.getSelectedKey(!0)||[],n._item.renderItems.call(this,t,i),delete this._cache_selected_indexs,delete this._cache_selected_ids)},e._renderOneItem=function(t,e,i,n){l.call(this,t,e,i,n)},e._getNewItem=function(t,e){return o.call(this,t,e)},e._renderEmptyView=function(){},e._renderLoadView=function(){};var o=function(t,e){return t("<div class='item'></div>").appendTo(e)},l=function(t,e,i,n){var a={};return a.name=this.radioGroupId,a.checked=this._isSelected(i,n,this._cache_selected_indexs,this._cache_selected_ids),a.label=this._getDataLabel(i,n),s?new r(this.context,a).render(e):(a.target=e,r.create(a))};s?module.exports=t:(t.getNewItem=o,t.renderOneItem=l,VRender.Component.Render.radiogroup=t)}}("undefined"==typeof VRender),function(){if(!VRender.Component.RadioGroup){var n=VRender.Utils,a=VRender.Component,s=a.Render.radiogroup,i=window.UIRadioGroup=a.RadioGroup=function(t,e){return a.base.isElement(t)?this.init(t,e)!==this?a.get(t):void this.$el.on("change","input",r.bind(this)):i.create(t)},t=i.prototype=new a.select;i.find=function(t){return a.find(t,".ui-radgrp",i)},i.create=function(t){return a.create(t,i,s)},t.setSelectedIndex=function(t){var e=this._snapshoot(),i=n.getIndexValue(t);0<=i?a.get(this.$el.children().eq(i).children()).setChecked(!0):0<=e.selectedIndex&&a.get(this.$el.children().eq(e.selectedIndex).children()).setChecked(!1),e.done()},t.isMultiple=function(){return!1},t._getItems=function(){return this.$el.children()},t._getNewItem=function(t,e,i,n){return s.getNewItem.call(this,t,e,i,n)},t._renderItems=function(t,e,i){this._cache_selected_indexs=this.getSelectedIndex(!0),this._cache_selected_ids=this.getSelectedKey(!0)||[],a.item.renderItems.call(this,t,e,i),delete this._cache_selected_indexs,delete this._cache_selected_ids},t._renderOneItem=function(t,e,i,n){s.renderOneItem.call(this,t,e,i,n)};var r=function(t){var e=this._snapshoot(),i=n.index(this.$el.find("input"),function(t){return t.is(":checked")});a.select.setSelectedIndex.call(this,i),e.done()};a.register(".ui-radgrp",i)}}(),function(t){if(t||!VRender.Component.Render.group){var c=t?require(__vrender__).Utils:VRender.Utils,a=t?require("./_base"):VRender.Component.Render,u=function(t,e){a._base.call(this,t,e)},e=u.prototype=new a._base;u.VERTICAL="vertical",u.HORIZONTIAL="horizontial",e.render=function(t,e){a._base.render.call(this,t,e),e.addClass("ui-group");var i=this.options||{},n=i.orientation;return n!==u.HORIZONTIAL&&n!==u.VERTICAL||(e.addClass(n),e.attr("opt-orientation",n)),e.attr("opt-gap",i.gap),e.attr("opt-align",i.align),this.renderSubViews(t,e),this},e.renderSubViews=function(t,e){i.call(this,t,e,this.getChildren())},e.getChildren=function(){return this.options.children||this.options.subViews||this.options.views};var i=function(t,e,i){i=c.toArray(i),c.each(i,function(t){c.isNotNull(t)&&(c.isFunction(t.render)?t.render(e):e.append(t.$el||t))}),n.call(this,t,e)},n=function(t,e){var i="",n="",a="",s="",r=c.getFormatSize(e.attr("opt-gap"),this.isRenderAsRem())||"",o=e.attr("opt-orientation");o==u.HORIZONTIAL?i=r:n=r;var l=e.attr("opt-align")||"";l=l.toLowerCase(),/left/.test(l)?a="left":/center/.test(l)?a="center":/right/.test(l)&&(a="right"),/top/.test(l)?s="top":/middle/.test(l)?s="middle":/bottom/.test(l)&&(s="bottom"),e.css("text-align",a);var d=e.children();d.css("vertical-align",s),d.css("margin-left",i).css("margin-top",n),d.eq(0).css("margin-left","").css("margin-top","")};t?module.exports=u:(u.showSubViews=i,u.updateLayout=n,VRender.Component.Render.group=u)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Group){var r=VRender.Utils,i=VRender.Component,e=i.Render.group,n=window.UIGroup=i.Group=function(t,e){return i.base.isElement(t)?this.init(t,e)!==this?i.get(t):void 0:n.create(t)},t=n.prototype=new i.base;n.find=function(t){return i.find(t,".ui-group",n)},n.create=function(t){return i.create(t,n,e)},t.setOrientation=function(t){this.$el.removeClass(e.HORIZONTIAL).removeClass(e.VERTICAL),this.$el.removeAttr("opt-orientation"),t!==e.HORIZONTIAL&&t!==e.VERTICAL||this.$el.addClass(t).attr("opt-orientation",t),a.call(this)},t.setGap=function(t){this.$el.attr("opt-gap",r.trimToEmpty(t)),a.call(this)},t.setAlign=function(t){this.$el.attr("opt-align",r.trimToEmpty(t)),a.call(this)},t.append=function(t){if(!arguments||0==arguments.length)return this;for(var e=0,i=arguments.length;e<i;e++){var n=arguments[e];if(r.isArray(n))for(var a=0,s=n.length;a<s;a++)this.add(n[a]);else this.add(n)}return this},t.add=function(t,e){if(r.isNotBlank(t)){e=isNaN(e)||""===e?-1:parseInt(e);var i=this.$el.children();0<=e&&e<i.length?i.eq(e).before(t.$el||t):this.$el.append(t.$el||t),a.call(this)}return t},t.removeAt=function(t){var e=this.$el.children().eq(t).remove();return a.call(this),e};var a=function(){r.debounce(e.updateLayout.bind(this),0,$,this.$el)};i.register(".ui-group",n)}}(),function(t){if(t||!VRender.Component.Render.container){var s=t?require(__vrender__).Utils:VRender.Utils,r=t?require("./_base"):VRender.Component.Render,e=function(t,e){r._base.call(this,t,e)};(e.prototype=new r._base).render=function(t,e){r._base.render.call(this,t,e),e.addClass("ui-container");var i=this.options&&this.options.styles||{},n=this.isRenderAsRem();o(e,"display",i.display),o(e,"position",i.position),o(e,"padding",i.padding,n),o(e,"padding-left",i.paddingLeft,n),o(e,"padding-right",i.paddingRight,n),o(e,"padding-top",i.paddingTop,n),o(e,"padding-bottom",i.paddingBottom,n),o(e,"margin",i.margin,n),o(e,"margin-left",i.marginLeft,n),o(e,"margin-right",i.marginRight,n),o(e,"margin-top",i.marginTop,n),o(e,"margin-bottom",i.marginBottom,n),o(e,"border",i.border,n),o(e,"border-radius",i.borderRadius,n),o(e,"border-color",i.borderColor),o(e,"border-width",i.borderWidth,n),o(e,"border-left",i.borderLeft,n),o(e,"border-right",i.borderRight,n),o(e,"border-top",i.borderTop,n),o(e,"border-bottom",i.borderBottom,n),o(e,"background",i.bg||i.background),o(e,"background-color",i.bgcolor||i.backgroundColor),o(e,"background-image",i.image||i.backgroundImage),o(e,"background-size",i.backgroundSize),o(e,"background-position",i.backgroundPosition),o(e,"background-repeat",i.backgroundRepeat),o(e,"width",i.width,n),o(e,"min-width",i.minWidth,n),o(e,"max-width",i.maxWidth,n),o(e,"height",i.height,n),o(e,"min-height",i.minHeight,n),o(e,"max-height",i.maxHeight,n),o(e,"overflow",i.overflow),o(e,"color",i.color),o(e,"font-size",i.fontSize,n),o(e,"text-align",i.align||i.textAlign),o(e,"box-shadow",i.shadow);var a=this.options.content||this.options.view;return s.isNotBlank(a)&&(s.isFunction(a.render)?a.render(e):e.append(a.$el||a)),this};var o=function(t,e,i,n){s.isNotBlank(i)&&(isNaN(i)||(i=s.getFormatSize(i,n)),t.css(e,i))};t?module.exports=e:VRender.Component.Render.container=e}}("undefined"==typeof VRender),function(){if(!VRender.Component.Container){VRender.Utils;var i=VRender.Component,e=i.Render.container,n=window.UIContainer=i.Container=function(t,e){return i.base.isElement(t)?this.init(t,e)!=this?i.get(t):void 0:n.create(t)};n.prototype=new i.base;n.find=function(t){return i.find(t,".ui-container",n)},n.create=function(t){return i.create(t,n,e)}}}(),function(t){if(t||!VRender.Component.Render.panel){var d=t?require(__vrender__).Utils:VRender.Utils,i=t?require("./_base"):VRender.Component.Render,e=function(t,e){i._base.call(this,t,e)},n=e.prototype=new i._base;n.render=function(t,e){return e.addClass("ui-panel"),i._base.render.call(this,t,e),this._viewports=u.call(this,this.options.viewports),a.call(this,t,e),s.call(this,t,e),this},n.getTitle=function(){return this.options.hasOwnProperty("title")?this.options.title:!(this._viewports&&0<this._viewports.length)&&"标题"};var a=function(t,e){var i=this.options||{},n=t("<header></header>").appendTo(e);if(i.focusHtmlTitle)t("<div class='title'></div>").appendTo(n).html(i.focusHtmlTitle);else{var a=this.getTitle();!1!==a&&d.isNotBlank(a)&&t("<div class='title'></div>").appendTo(n).text(a)}r.call(this,t,e,this._viewports);var s=d.toArray(this.options.buttons);o.call(this,t,e,s)},r=function(n,t,e){var i=t.children("header");if(i.children(".tabbar").remove(),e&&0<e.length){var a=n("<div class='tabbar'></div>").prependTo(i);i.children(".title").after(a),a.append("<div class='thumb'></div>");var s=d.getIndexValue(this.options.viewIndex);d.each(e,function(t,e){var i=n("<div class='tab'></div>").appendTo(a);i.attr("name",t.name),t.focusHtmlLabel?i.html(t.focusHtmlLabel):n("<span></span>").appendTo(i).text(t.label||t.name),e==s&&i.addClass("selected")})}},o=function(e,t,i){var n=t.children("header");if(n.children(".btnbar").remove(),i&&0<i.length){var a=this,s=e("<div class='btnbar'></div>").appendTo(n);this.isRenderAsApp()?(s.append("<button class='popbtn'>&nbsp;</button>"),t.attr("data-btns",JSON.stringify(i))):d.each(i,function(t){l.call(a,e,s,t)})}},l=function(a,t,s){if(!d.isBlank(s)){"string"==typeof s&&(s={name:s});var e=a("<div class='item'></div>").appendTo(t);e.attr("name",d.trimToNull(s.name));var r=d.isTrue(s.toggle);r&&e.attr("opt-toggle","1"),d.isNotBlank(s.tooltip)&&e.attr("title",s.tooltip);var i=a("<button class='btn'></button>").appendTo(e);if(s.icon){var n=a("<i>&nbsp;</i>").appendTo(i);"string"==typeof s.icon&&n.css("backgroundImage","url("+s.icon+")")}if(!s.icon||!1!==s.label)a("<span></span>").appendTo(i).text(d.trimToNull(s.label)||"按钮");if(d.isArray(s.items)&&0<s.items.length){var o=a("<ul></ul>").appendTo(e.attr("has-dropdown","1")),l=!1;d.each(s.items,function(t,e){var i=a("<li></li>").appendTo(o);i.attr("name",d.trimToNull(t.name)),d.isNotBlank(t.icon)&&(l=!0,a("<i>&nbsp;</i>").appendTo(i).css("backgroundImage","url("+t.icon+")"));var n=d.trimToNull(t.label);a("<span></span>").appendTo(i).text(n||"选项"),r&&n&&n==s.label&&i.addClass("active")}),l&&o.attr("show-ic","1")}}},s=function(t,e,i){var n=t("<section></section>").appendTo(e);n=t("<div class='container'></div>").appendTo(n);var a=t("<div></div>").appendTo(n),s=this.options.content||this.options.view;d.isNotNull(s)&&(d.isFunction(s.render)?s.render(a):a.append(s.$el||s)),i=i||this._viewports,c.call(this,t,n,i),0==n.children(".selected").length&&a.addClass("selected")},c=function(n,a,t){if(a.children(":not(:first-child)").remove(),t&&0<t.length){var s=d.getIndexValue(this.options.viewIndex);d.each(t,function(t,e){if(contentView=t.content||t.view,d.isNotNull(contentView)){var i=n("<div></div>").appendTo(a);i.attr("name",t.name),e==s&&i.addClass("selected"),d.isFunction(contentView.render)?contentView.render(i):i.append(contentView.$el||contentView)}})}},u=function(t){var i=[];return d.each(d.toArray(t),function(t,e){d.isNotBlank(t)&&"object"==typeof t&&(t.name=t.name||"view_"+e,i.push(t))}),i};t?module.exports=e:(e.renderTabs=r,e.renderButtons=o,e.renderViewports=c,e.getFormatViewports=u,VRender.Component.Render.panel=e)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Panel){var l=VRender.Utils,i=VRender.Component,n=i.Render.panel,a=window.UIPanel=i.Panel=function(t,e){return i.base.isElement(t)?this.init(t,e)!=this?i.get(t):(this.header=this.$el.children("header"),this.container=this.$el.children("section").children(),this.header.on("tap",".tabbar > .tab",c.bind(this)),this.isRenderAsApp()?this.header.on("tap",".btnbar > .popbtn",r.bind(this)):(this.header.on("tap",".btnbar > .item > .btn",s.bind(this)),this.header.on("tap",".btnbar > .item > ul > li",d.bind(this))),void u.call(this)):a.create(t)},t=a.prototype=new i.base;a.find=function(t){return i.find(t,".ui-panel",a)},a.create=function(t){return i.create(t,a,n)},t.getTitle=function(){return this.header.children(".title").text()},t.setTitle=function(t){if(l.isNotNull(t)){t=l.trimToEmpty(t);var e=this.header.children(".title");e&&0<e.length?t?e.empty().append(t):e.remove():t&&(e=$("<div class='title'></div>").prependTo(this.header)).append(t)}},t.getButtons=function(){if(this.options.hasOwnProperty("buttons"))return l.toArray(this.options.buttons);var t=this.$el.attr("data-btns");if(t)try{t=JSON.parse(t)}catch(t){}return this.$el.removeAttr("data-btns"),this.options.buttons=l.toArray(t),t},t.setButtons=function(t){this.options.buttons=t,n.renderButtons.call(this,$,this.$el,l.toArray(t)),this.popupMenu&&(this.popupMenu.destory(),this.popupMenu=null)},t.setViewports=function(t,e){var i=n.getFormatViewports.call(this,t);n.renderTabs.call(this,$,this.$el,i),n.renderViewports.call(this,$,this.container,i),this.setViewActive(e)},t.isViewActive=function(e){var t=l.each(this.header.find(".tabbar .tab"),function(t){return t.attr("name")==e});return t&&t.is(".selected")},t.setViewActive=function(t){l.isNotBlank(t)&&h.call(this,t)};var s=function(t){var e=$(t.currentTarget),i=e.parent();1==i.attr("has-dropdown")?f.call(this,i):1==i.attr("opt-toggle")&&i.toggleClass("active");var n=i.attr("name");l.isNotBlank(n)&&this.trigger("btnclick",n,e.is(".active"))},r=function(t){if(this.popupMenu)this.popupMenu.open();else{var e=m.call(this,this.getButtons());e&&0<e.length&&(this.popupMenu=new i.PopupMenu({target:this.$el,data:e}),this.popupMenu.on("itemclick",o.bind(this))),this.popupMenu&&this.popupMenu.open()}},o=function(t,e){e&&l.isNotBlank(e.name)&&this.trigger("btnclick",e.name,!!e.checked)},d=function(t){var e=$(t.currentTarget),i=e.parent().parent();if(1==i.attr("opt-toggle")&&!e.is(".active")){e.addClass("active").siblings().removeClass("active");var n=i.children(".btn"),a=n.children("span");a&&0<a.length&&a.text(e.children("span").text());var s=n.children("i");if(s&&0<s.length){s.attr("data-src")||s.attr("data-src",s.css("backgroundImage"));var r=e.children("i").css("backgroundImage")||s.attr("data-src");s.css("backgroundImage",r)}}g.call(this,i);var o=e.attr("name");l.isNotBlank(o)&&this.trigger("btnclick",o,e.is(".active"))},e=function(t){var e=$(t.currentTarget),i=parseInt(e.attr("timerid"));if(i&&(clearTimeout(i),e.removeAttr("timerid")),"mouseleave"==t.type){var n=this;i=setTimeout(function(){e.removeAttr("timerid"),g.call(n,e)},400),e.attr("timerid",i)}},c=function(t){var e=$(t.currentTarget);e.is(".selected")||h.call(this,e.attr("name"))},u=function(){this.getButtons();var t=this.header.find(".tabbar .tab.selected");t&&0<t.length&&p.call(this,t)},h=function(e){var t=this.header.find(".tabbar .tab"),i=l.find(t,function(t){return t.attr("name")==e});if(i&&0!=i.length&&!i.is(".selected")){var n=t.filter(".selected").removeClass("selected");i.addClass("selected"),p.call(this,i);var a=this.container.children(),s=l.find(a,function(t){return t.attr("name")==e});if(s&&0!=s.length||(s=a.eq(0)),!s.is(".selected")){var r=a.filter(".selected"),o=n.index()<i.index();s.addClass("animate-in"),s.addClass(o?"animate-in-right":"animate-in-left"),r.addClass("animate-out"),setTimeout(function(){s.removeClass("animate-in-left animate-in-right"),r.addClass(o?"animate-out-left":"animate-out-right"),setTimeout(function(){s.addClass("selected").removeClass("animate-in"),r.removeClass("selected animate-out animate-out-left animate-out-right")},400)},0)}this.trigger("change",i.attr("name"),n.attr("name"))}},p=function(t){var e=this.header.children(".tabbar").children(".thumb");e&&0<e.length&&(e.css("left",t.position().left),e.css("width",t.outerWidth()))},f=function(t){t.is(".show-dropdown")||(t.addClass("show-dropdown"),t.on("mouseenter",e.bind(this)),t.on("mouseleave",e.bind(this)),setTimeout(function(){t.addClass("animate-in")},0))},g=function(t){t.addClass("animate-out"),t.off("mouseenter").off("mouseleave"),setTimeout(function(){t.removeClass("show-dropdown"),t.removeClass("animate-in").removeClass("animate-out")},300)},m=function(t){if(t&&0<t.length){var i=function(t){var e={};return e.name=t.name,e.label=t.label||t.name||"按钮",t.icon&&(e.icon=t.icon),t.toggle&&(e.toggle=t.toggle),t.disabled&&(e.disabled=t.disabled),e};return l.map(t,function(t){var e=i(t);return e.children=l.map(t.items,i),0==e.children.length&&delete e.children,e})}return null};i.register(".ui-panel",a)}}(),function(a){if(a||!VRender.Component.Render.paginator){var o=a?require(__vrender__).Utils:VRender.Utils,s=a?require("./_base"):VRender.Component.Render,e=function(t,e){s._base.call(this,t,e)},t=e.prototype=new s._base;e.getMode=function(t){return!1!==t&&("spread"==t||"dropdown"==t?t:"normal")},e.getShowNum=function(t){return 0<(t=parseInt(t)||0)?t:10},e.getSizes=function(t){if(t){var e=[];return o.each(o.toArray(t),function(t){0<(t=parseInt(t)||0)&&e.indexOf(t)<0&&e.push(t)}),0<e.length?e:null}return null},e.getStatus=function(t){return!0===t?"_default":!1===t?null:o.trimToNull(t)},e.getSkip=function(t){return o.isNull(t)||!0===t?"1":o.isArray(t)?o.trimToEmpty(t[0])+"♮"+o.trimToEmpty(t[1]):null},t.render=function(t,e){s._base.render.call(this,t,e),e.addClass("ui-paginator");var i=m.call(this);if(e.attr("data-no",i.pageNo),e.attr("data-size",i.pageSize),e.attr("data-pages",i.pageCount),e.attr("data-total",i.totalCount),e.attr("opt-mode",i.mode||""),e.attr("opt-nums",i.showNum),i.status&&e.attr("opt-status",i.status),i.skip&&e.attr("opt-skip",i.skip),1<i.pageSizes.length&&e.attr("opt-sizes",i.pageSizes.join(",")),r.call(this,t,e,i),a){var n=this.options.buttons;!1===n?e.attr("opt-btns",""):!0!==n&&o.isNotBlank(n)&&e.attr("opt-btns",JSON.stringify(n))}},t._getButtons=function(){return this.options.buttons};var r=function(t,e,i){var n=t("<div class='pagebar'></div>").appendTo(e);if(l.call(this,t,e,n,i),!this.isRenderAsApp()){if(1<i.pageSizes.length){var a=t("<div class='sizebar'></div>").appendTo(e);p.call(this,t,e,a,i)}if(o.isNotBlank(i.status)){var s=t("<div class='statusbar'></div>").appendTo(e);f.call(this,t,e,s,i)}if(o.isNotBlank(i.skip)){var r=t("<div class='skipbar'></div>").appendTo(e);g.call(this,t,e,r,i)}}},l=function(t,e,i,n){var a=v.call(this,"first");a&&t("<button class='btn first'></button>").appendTo(i).text(a);var s=v.call(this,"prev");s&&t("<button class='btn prev'></button>").appendTo(i).text(s),d.call(this,t,e,i,n);var r=v.call(this,"next");r&&t("<button class='btn next'></button>").appendTo(i).text(r);var o=v.call(this,"last");o&&t("<button class='btn last'></button>").appendTo(i).text(o),e.removeClass("is-first").removeClass("is-last"),n.isFirstPage&&e.addClass("is-first"),n.isLastPage&&e.addClass("is-last")},d=function(t,e,i,n){var a=n.mode;if(!1!==a&&"false"!==a){var s=t("<div class='pages'></div>").appendTo(i);"spread"==a?u.call(this,t,e,s,n):"dropdown"==a?h.call(this,t,e,s,n):c.call(this,t,e,s,n)}},c=function(t,e,i,n){var a=[];a.push("<span class='pageno'>"+n.pageNo+"</span>"),a.push("<span class='pagecount'>"+n.pageCount+"</span>"),i.html(a.join("/"))},u=function(t,e,i,n){var a=n.showNum;3<(a=0<a?a:10)&&this.isRenderAsApp()&&(a=3);var s=n.pageNo-Math.floor(a/2);s+a-1>n.pageCount&&(s=n.pageCount-a+1),s<1&&(s=1),i.removeClass("has-prev").removeClass("has-next"),1<s&&i.addClass("has-prev");for(var r=0;r<a&&s<=n.pageCount;r++){var o=t("<span class='page'></span>").appendTo(i);o.text(s),s==n.pageNo&&o.addClass("selected"),s+=1}s-1<n.pageCount&&i.addClass("has-next")},h=function(t,e,i,n){t("<div class='lbl'></div>").appendTo(i).text(n.pageNo+"/"+n.pageCount);for(var a=this.isRenderAsApp(),s=t("<div class='dropdown'></div>").appendTo(i),r=t("<ul></ul>").appendTo(s),o=1;o<=n.pageCount;o++){var l=t("<li class='page'></li>").appendTo(r);a?l.append("<span>"+o+"</span>"):l.text(o),o==n.pageNo&&l.addClass("selected")}},p=function(t,e,i,n){t("<div class='lbl'></div>").appendTo(i).text(n.pageSize);var a=t("<div class='dropdown'></div>").appendTo(i),s=t("<ul></ul>").appendTo(a);o.each(n.pageSizes,function(t){s.append("<li>"+t+"</li>")})},f=function(t,e,i,n){i.html(b.call(this,n.status,n))},g=function(t,e,i,n){var a=/♮/.test(n.skip)?n.skip.split("♮"):["",""];o.isBlank(a[0])&&n.status&&(a[0]="到第"),o.isNotBlank(a[0])&&t("<span class='txt t1'></span>").appendTo(i).text(a[0]),i.append("<input type='number'/>"),o.isBlank(a[1])&&n.status&&(a[1]="页"),o.isNotBlank(a[1])&&t("<span class='txt t2'></span>").appendTo(i).text(a[1]);var s=v.call(this,"skip")||"GO";t("<button class='btn skip'></button>").appendTo(i).text(s)},m=function(){var t={};return t.totalCount=parseInt(this.options.total)||0,t.totalCount=Math.max(0,t.totalCount),t.pageSize=parseInt(this.options.size)||0,t.pageSizes=e.getSizes(this.options.sizes)||[],t.pageSize<=0&&t.pageSizes&&0<t.pageSizes.length&&(t.pageSize=t.pageSizes[0]),t.pageSize<=0&&(t.pageSize=20),t.pageSizes.indexOf(t.pageSize)<0&&t.pageSizes.push(t.pageSize),t.pageSizes.sort(function(t,e){return t-e}),t.pageCount=Math.ceil(t.totalCount/t.pageSize)||1,t.pageNo=parseInt(this.options.page)||0,t.pageNo=Math.max(1,Math.min(t.pageNo,t.pageCount)),t.pageStart=Math.min((t.pageNo-1)*t.pageSize+1,t.totalCount),t.pageEnd=Math.min(t.pageNo*t.pageSize,t.totalCount),t.mode=e.getMode(this.options.mode),t.showNum=e.getShowNum(this.options.showNum),t.status=e.getStatus(this.options.status),t.skip=e.getSkip(this.options.skip),t.isFirstPage=1==t.pageNo,t.isLastPage=t.pageNo==t.pageCount,t},v=function(t){var e=this._getButtons();if(!1===e)return!1;var i=null;return o.isArray(e)&&("first"==t?i=e[0]:"prev"==t?i=e[1]:"next"==t?i=e[2]:"last"==t?i=e[3]:"skip"==t&&(i=e[4])),!1!==i&&(!0!==i&&o.isNotBlank(i)?""+i:"first"==t?"|<":"last"==t?">|":"prev"==t?"<":"next"==t?">":"skip"==t?"GO":""+t)},b=function(t,e){return!0===t||"_default"==t?"共"+e.totalCount+"条":(o.isNotBlank(t)&&(t=(t=(t=(t=(t=(t=t.replace(/\{pageNo\}/g,e.pageNo)).replace(/\{pageSize\}/g,e.pageSize)).replace(/\{pageCount\}/g,e.pageCount)).replace(/\{totalCount\}/g,e.totalCount)).replace(/\{pageStart\}/g,e.pageStart)).replace(/\{pageEnd\}/g,e.pageEnd)),o.trimToEmpty(t))};a?module.exports=e:(e.renderView=r,e.renderPageBar=l,e.renderPageSizeBar=p,e.renderPageStatusBar=f,VRender.Component.Render.paginator=e)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Paginator){var s=VRender.Utils,i=VRender.Component,r=i.Render,a=r.paginator,n=window.UIPaginator=i.Paginator=function(t,e){return i.base.isElement(t)?this.init(t,e)!==this?i.get(t):(this.$el.on("tap","button.btn",o.bind(this)),this.$el.on("tap",".pagebar .page",l.bind(this)),this.$el.on("tap",".pagebar .lbl",d.bind(this)),void(this.isRenderAsApp()?this.$el.on("tap",".pagebar .dropdown",u.bind(this)):(this.$el.on("tap",".sizebar .lbl",h.bind(this)),this.$el.on("tap",".sizebar li",p.bind(this)),this.$el.on("keydown",".skipbar input",g.bind(this))))):n.create(t)},t=n.prototype=new i.base;n.find=function(t){return i.find(t,".ui-paginator",n)},n.create=function(t){return i.create(t,n,a)},t.set=function(t,e,i){var n=this._snapshoot();m.call(this,t,e,i),n.done()},t.getPage=function(){return parseInt(this.$el.attr("data-no"))||1},t.setPage=function(t){var e=this._snapshoot();m.call(this,null,t),e.done()},t.getSize=function(){return parseInt(this.$el.attr("data-size"))||0},t.setSize=function(t){m.call(this,null,null,t)},t.getTotal=function(){return parseInt(this.$el.attr("data-total"))||0},t.setTotal=function(t){var e=this._snapshoot();m.call(this,t),e.done()},t.getPageNo=function(){return this.getPage()},t.setPageNo=function(t){this.setPage(t)},t.getPageCount=function(){return parseInt(this.$el.attr("data-pages"))||1},t.getMode=function(){return this.$el.attr("opt-mode")||!1},t.setMode=function(t){this.$el.attr("opt-mode",a.getMode(t)||""),b.call(this)},t.getSizes=function(){var t=this.$el.attr("opt-sizes")||"";return a.getSizes(t.split(","))},t.setSizes=function(t){var e=s.isArray(t)?t:null;e&&(e=a.getSizes(e)),e&&0<e.length?this.$el.attr("opt-sizes",e.join(",")):this.$el.removeAttr("opt-sizes"),b.call(this)},t.getShowNum=function(){return parseInt(this.$el.attr("opt-nums"))||a.getShowNum(-1)},t.setShowNum=function(t){0<(t=parseInt(t)||0)&&(this.$el.attr("opt-nums",t),b.call(this))},t.getStatus=function(){var t=this.$el.attr("opt-status");return"_default"===t?"共{totalCount}条":t||""},t.setStatus=function(t){(t=a.getStatus(t))?this.$el.attr("opt-status",t):this.$el.removeAttr("opt-status"),b.call(this)},t.getSkip=function(){var t=this.$el.attr("opt-skip");return 1==t||!!t&&t.split("♮")},t.setSkip=function(t){(t=a.getSkip(t))?this.$el.attr("opt-skip",t):this.$el.removeAttr("opt-skip"),b.call(this)},t.getButtons=function(){if(this.options.hasOwnProperty("buttons"))return this.options.buttons;var t=this.$el.attr("opt-btns");return""!==t&&(t?JSON.parse(t):null)},t.setButtons=function(t){this.options.buttons=t,this.$el.removeAttr("opt-btn"),b.call(this)},t._snapshoot_shoot=function(t){t.data={page:this.getPageNo(),size:this.getSize()}},t._snapshoot_compare=function(t){return t.data.page==this.getPageNo()},t._getButtons=function(){return this.getButtons()},t._isFirst=function(){return this.$el.is(".is-first")},t._isLast=function(){return this.$el.is(".is-last")};var o=function(t){var e=$(t.currentTarget);if(e.is(".disabled"))return!1;if(e.is(".skip")){var i=this.$el.find(".skipbar input"),n=parseInt(i.val())||0;0<n&&n!=this.getPageNo()&&this.setPageNo(n),i.val("")}else{var a=this.getPageNo();e.is(".prev")?this._isFirst()||this.setPageNo(a-1):e.is(".next")?this._isLast()||this.setPageNo(a+1):e.is(".first")?this._isFirst()||this.setPageNo(1):e.is(".last")&&(this._isLast()||this.setPageNo(this.getPageCount()))}},l=function(t){var e=$(t.currentTarget);if(e.is(".selected"))return!1;if("dropdown"==this.getMode()){_.call(this);var i=this;setTimeout(function(){i.setPageNo(e.text())},300)}else this.setPageNo(e.text());return!1},d=function(t){e.call(this)},c=function(t){r.fn.mouseDebounce(t,_.bind(this))},u=function(t){_.call(this)},h=function(t){w.call(this)},p=function(t){var e=parseInt($(t.currentTarget).text());e&&e!=this.getSize()&&this.setSize(e),D.call(this)},f=function(t){r.fn.mouseDebounce(t,D.bind(this))},g=function(t){if("keydown"==t.type){if(13==t.which){var e=$(t.currentTarget),i=parseInt(e.val())||0;return 0<i&&i!=this.getPageNo()&&this.setPageNo(i),e.val(""),!0}return s.isControlKey(t)||s.isNumberKey(t)}},m=function(t,e,i){t=Math.max(0,s.isBlank(t)||isNaN(t)?this.getTotal():parseInt(t)),e=Math.max(1,s.isBlank(e)||isNaN(e)?this.getPageNo():parseInt(e)),i=s.isBlank(i)||isNaN(i)?this.getSize():parseInt(i);var n=Math.ceil(t/i)||1;e=Math.min(e,n),this.$el.attr("data-total",t),this.$el.attr("data-size",i),this.$el.attr("data-no",e),this.$el.attr("data-pages",n),y.call(this),this.$el.find(".sizebar .lbl").text(i)},v=function(){var t={};return t.totalCount=this.getTotal(),t.pageSize=this.getSize(),t.pageSizes=this.getSizes()||[],t.pageSizes.indexOf(t.pageSize)<0&&t.pageSizes.push(t.pageSize),t.pageSizes.sort(function(t,e){return t-e}),t.pageNo=this.getPageNo(),t.pageCount=this.getPageCount(),t.pageStart=Math.min((t.pageNo-1)*t.pageSize+1,t.totalCount),t.pageEnd=Math.min(t.pageNo*t.pageSize,t.totalCount),t.mode=this.getMode(),t.showNum=this.getShowNum(),t.status=this.getStatus(),t.skip=this.getSkip(),t.isFirstPage=1==t.pageNo,t.isLastPage=t.pageNo==t.pageCount,t},b=function(){this.t_renderview&&(clearTimeout(this.t_renderview),this.t_renderview=0),this.t_renderpage&&(clearTimeout(this.t_renderpage),this.t_renderpage=0);var t=this;this.t_renderview=setTimeout(function(){t.t_renderview=0,a.renderView.call(t,$,t.$el.empty(),v.call(t))},0)},y=function(){if(!this.t_renderview){this.t_renderpage&&(clearTimeout(this.t_renderpage),this.t_renderpage=0);var n=this;this.t_renderpage=setTimeout(function(){n.t_renderpage=0;var t=v.call(n),e=n.$el.children(".pagebar").empty();a.renderPageBar.call(n,$,n.$el,e,t);var i=n.$el.children(".statusbar");i&&0<i.length&&a.renderPageStatusBar.call(n,$,n.$el,i,t)},0)}},e=function(){var t=this.$el.children(".pagebar");if(!t.is(".show-dropdown")){t.addClass("show-dropdown");var e=t.find(".dropdown");if(this.isRenderAsApp())$("html,body").addClass("ui-scrollless"),e=e.children("ul");else{t.on("mouseenter",c.bind(this)),t.on("mouseleave",c.bind(this));var i=r.fn.getDropdownHeight.call(this,e);s.offset(e,this._getScrollContainer(),0,i).isOverflowY&&t.addClass("show-before")}var n=e.find(".selected");if(n&&0<n.length){var a=e.scrollTop();a+=n.offset().top-e.offset().top,e.scrollTop(a)}setTimeout(function(){t.addClass("animate-in")},0)}},_=function(){var t=this.$el.children(".pagebar");t.find(".dropdown");this.isRenderAsApp()?$("html,body").removeClass("ui-scrollless"):t.off("mouseenter").off("mouseleave"),t.addClass("animate-out"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)},w=function(){var t=this.$el.children(".sizebar");if(!t.is(".show-dropdown")){t.addClass("show-dropdown"),t.on("mouseenter",f.bind(this)),t.on("mouseleave",f.bind(this));var e=t.children(".dropdown"),i=r.fn.getDropdownHeight.call(this,e,210);s.offset(e,this._getScrollContainer(),0,i).isOverflowY&&t.addClass("show-before"),setTimeout(function(){t.addClass("animate-in")},0)}},D=function(){var t=this.$el.children(".sizebar");t.off("mouseenter").off("mouseleave"),t.addClass("animate-out"),setTimeout(function(){t.removeClass("show-dropdown").removeClass("show-before"),t.removeClass("animate-in").removeClass("animate-out")},300)};i.register(".ui-paginator",n)}}(),function(t){if(t||!VRender.Component.Render.listview){var p=t?require(__vrender__).Utils:VRender.Utils,s=t?require("./_base"):VRender.Component.Render,f=t?require("../../../ui/component/UIButton"):VRender.Component.Button,i=function(t,e){s._select.call(this,t,e)},e=i.prototype=new s._select;i.itemRenderer_simple=function(t){var e={style:"ui-listview-item1",title:null,desc:null};return"string"==typeof t?(e.title=t,e.desc=arguments&&arguments[1]):t&&(e.title=t.titleField,e.desc=t.descField),i.itemRendererFunction.call(this,e)},i.itemRenderer_icon=function(t){var e={style:"ui-listview-item2",icon:null,title:null,desc:null};return"string"==typeof t?(e.icon=t,e.title=arguments&&arguments[1],e.desc=arguments&&arguments[2]):t&&(e.icon=t.iconField,e.title=t.titleField,e.desc=t.descField,e.defIcon=t.defaultIconUrl),i.itemRendererFunction.call(this,e)},i.itemRenderer_button=function(t){var e={style:"ui-listview-item3",buttons:null,title:null,desc:null};return"string"==typeof t?(e.title=t,e.desc=arguments&&arguments[1]):p.isArray(t)?(e.buttons=t,e.title=arguments&&arguments[1],e.desc=arguments&&arguments[2]):t&&(e.buttons=t.buttons,e.title=t.titleField,e.desc=t.descField),i.itemRendererFunction.call(this,e)},i.itemRenderer_icon_button=function(t){var e={style:"ui-listview-item4",buttons:null,icon:null,title:null,desc:null};return"string"==typeof t?(e.icon=t,e.buttons=arguments&&arguments[1],e.title=arguments&&arguments[2],e.desc=arguments&&arguments[3]):p.isArray(t)?(e.buttons=t,e.title=arguments&&arguments[1],e.desc=arguments&&arguments[2]):t&&(e.icon=t.iconField,e.buttons=t.buttons,e.title=t.titleField,e.desc=t.descField),i.itemRendererFunction.call(this,e)},i.itemRendererFunction=function(h){var t=function(t,e,a,s){var i=h||{},r=this,n=function(t,e){if(p.isNotNull(t))return a&&a[t];if(a&&e)for(var i in e){var n=e[i];if(p.isNotBlank(n)&&a.hasOwnProperty(n))return a[n]}return"title"==t&&p.isFunction(r._getDataLabel)?r._getDataLabel(a,s):void 0};e=t("<div></div>").addClass(i.style);if(i.hasOwnProperty("icon")){var o=n(i.icon,["icon","image","img"]);t("<img class='icon'/>").appendTo(e).attr("src",p.trimToEmpty(o)||i.defIcon||null)}var l=t("<div class='content'></div>").appendTo(e),d=n(i.title,["title"]);t("<div class='title'></div>").appendTo(l).html(d||"&nbsp;");var c=n(i.desc,["desc","description","remark"]);if(p.isNotBlank(c)&&t("<div class='desc'></div>").appendTo(l).html(c),i.hasOwnProperty("buttons")){var u=t("<div class='btnbar'></div>").appendTo(e);p.each(p.toArray(i.buttons),function(t){"undefined"==typeof VRender?new f(r.context,t).render(u):f.create(p.extend({},t,{target:u}))})}return e};return t._state=1,t._data=JSON.stringify(h),t},e.render=function(t,e){return e.addClass("ui-listview"),this.isChkboxVisible()&&e.addClass("show-chkbox"),e.append("<ul></ul>"),s._select.render.call(this,t,e),this},e.isChkboxVisible=function(){return p.isTrue(this.options.chkbox)},e._renderOneItem=function(t,e,i,n){a.call(this,t,e,i,n)},e._getItemContainer=function(t,e){return e.children("ul")},e._renderEmptyView=function(t,e){s._item.renderEmptyView.call(this,t,e)},e._renderLoadView=function(t,e){s._item.renderLoadView.call(this,t,e)};var a=function(t,e,i,n){var a=t("<div class='box'></div>").appendTo(e);s._item.renderOneItem.call(this,t,e,a,i,n),this.isChkboxVisible()&&e.prepend("<span class='chkbox'></span>")};t?module.exports=i:(i.renderOneItem=a,VRender.Component.Render.listview=i)}}("undefined"==typeof VRender),function(){if(!VRender.Component.ListView){var a=VRender.Utils,s=VRender.Component,r=s.Render.listview,i=window.UIListView=s.ListView=function(t,e){return s.base.isElement(t)?this.init(t,e)!==this?s.get(t):void(this.list=this.$el.children("ul")).on("tap","li",n.bind(this)):i.create(t)},t=i.prototype=new s.select;i.find=function(t){return s.find(t,".ui-listview",i)},i.create=function(t){return s.create(t,i,r)},t.isChkboxVisible=function(){return this.$el.is(".show-chkbox")},t._getItemContainer=function(){return this.$el.children("ul")},t._renderOneItem=function(t,e,i,n,a){r.renderOneItem.call(this,t,e,i,n,a)};var n=function(t){var e=$(t.currentTarget);if(e.parent().is(this.list)){if(e.is(".disabled"))return;var i=this._snapshoot();e.is(".selected")?e.removeClass("selected"):(e.addClass("selected"),this.isMultiple()||e.siblings().removeClass("selected"));var n=a.map(this.list.children(".selected"),function(t){return t.index()});s.select.setSelectedIndex.call(this,n),i.done()}};s.register(".ui-listview",i)}}(),function(t){if(t||!VRender.Component.Render.tabbar){var s=t?require(__vrender__).Utils:VRender.Utils,r=t?require("./_base"):VRender.Component.Render,e=function(t,e){r._select.call(this,t,e)},i=e.prototype=new r._select;i.render=function(t,e){e.addClass("ui-tabbar");var i=t("<div class='bar'></div>").appendTo(e);return i.append("<ul class='tabs'></ul>"),i.append("<div class='thumb'></div>"),r._select.render.call(this,t,e),o.call(this,t,e),this},i.isMultiple=function(){return!1},i._renderOneItem=function(t,e,i,n){a.call(this,t,e,i,n)},i._getItemContainer=function(t,e){return e.find(".tabs")},i._getNewItem=function(t,e){return n.call(this,t,e)},i._renderEmptyView=function(){},i._renderLoadView=function(){};var a=function(t,e,i,n){var a=e.children(".box");r._item.renderOneItem.call(this,t,e,a,i,n),i=i||{},s.isNotBlank(i.name)&&e.attr("name",i.name),s.isTrue(i.closable)&&e.addClass("closable").append("<i class='close'></i>")},n=function(t,e){var i=t("<li class='tab'></li>").appendTo(e);return i.append("<div class='box'></div>"),i},o=function(t,e){(e=t("<div class='btns'></div>").appendTo(e)).append("<span class='btn prev'>&lt;</span>"),e.append("<span class='btn next'>&gt;</span>")};t?module.exports=e:(e.renderOneItem=a,e.getNewItem=n,VRender.Component.Render.tabbar=e)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Tabbar){var n=VRender.Utils,r=VRender.Component,a=r.Render.tabbar,i=window.UITabbar=r.Tabbar=function(t,e){return r.base.isElement(t)?this.init(t,e)!=this?r.get(t):(this.tabsView=this.$el.find(".tabs"),this.$el.on("tap",".tab",s.bind(this)),this.$el.on("tap",".close",d.bind(this)),this.isRenderAsApp()?(this.$el.on("touchstart",l.bind(this)),this.$el.on("touchmove",l.bind(this)),this.$el.on("touchend",l.bind(this))):(this.$el.on("mousedown",".btn",o.bind(this)),this.$el.on("mouseup",".btn",o.bind(this)),this.$el.on("mouseleave",".btn",o.bind(this)),c.call(this)),void u.call(this)):i.create(t)},t=i.prototype=new r.select;i.find=function(t){return r.find(t,".ui-tabbar",i)},i.create=function(t){return r.create(t,i,a)},t.setSelectedIndex=function(t){var e=n.getIndexValue(t);g.call(this,0<=e?this._getItems().eq(e):null),u.call(this)},t.removeItemAt=function(t){this.close(n.getIndexValue(t))},t.close=function(t){var e=null;if("number"==typeof t?0<=t&&(e=this.tabsView.find(".tab").eq(t)):n.isNotBlank(t)&&(e=this.tabsView.find(".tab[name='"+t+"']")),e&&0<e.length){var i=this._getItemData(e);return m.call(this,e),i}return null},t.isMultiple=function(){return!1},t.isClosable=function(t){if("number"==typeof t){var e=this._getItemAt(t);return e&&e.is(".closable")}return"string"==typeof t&&this.isClosable(this.getIndexByName(t))},t.setColsable=function(t,e){if("string"==typeof e)return this.setColsable(t,this.getIndexByName(e));if("number"==typeof e){var i=this._getItemAt(e);i&&0<i.length&&(n.isNull(t)||n.isTrue(t)?i.is(".closable")||i.addClass("closable").append("<i class='close'></i>"):i.is(".closable")&&i.removeClass("closable").children(".close").remove())}},t._getItemContainer=function(){return this.$el.find(".tabs")},t._getItems=function(){return this.$el.find(".tab")},t._getNewItem=function(t,e,i,n){return a.getNewItem.call(this,t,e,i,n)},t._renderOneItem=function(t,e,i,n){return a.renderOneItem.call(this,t,e,i,n)};var s=function(t){var e=$(t.currentTarget);e.is(".disabled")||(this.trigger("itemclick",this._getItemData(e)),g.call(this,e))},o=function(t){$(t.currentTarget);if(this.btnMouseTimerId&&(clearInterval(this.btnMouseTimerId),this.btnMouseTimerId=0),"mousedown"==t.type){var e=this,i=this.tabsView,n=parseInt(i.attr("opt-l"))||0,a=20*($(t.currentTarget).is(".prev")?1:-1);this.btnMouseTimerId=setInterval(function(){n+=a,p.call(e,n)},50)}},l=function(t){var e=t.touches&&t.touches[0];if("touchstart"===t.type)this.touchData={startX:e.pageX},this.touchData.startL=parseInt(this.tabsView.attr("opt-l"))||0;else if("touchmove"===t.type){if(1<t.touches.length||!this.$el.is(".over"))return;var i=e.pageX-this.touchData.startX;if(!this.touchData.moving&&Math.abs(i)<10)return;this.touchData.moving=!0;var n=this.touchData.startL+i;p.call(this,n)}else t.type},d=function(t){var e=$(t.currentTarget).parent();return m.call(this,e),!1},e=function(t){this._isMounted()?h.call(this):$(window).off("resize._"+this.getViewId())},c=function(){var t="resize._"+this.getViewId();$(window).off(t).on(t,e.bind(this)),e.call(this)},u=function(){if(h.call(this),this.$el.is(".over")){var t=this.tabsView.find(".tab.selected");if(t&&0<t.length){var e=this.tabsView.parent(),i=t.offset().left,n=e.offset().left,a=parseInt(this.tabsView.attr("opt-l"))||0;i<n?p.call(this,a+n-i):i-n>e.width()&&p.call(this,a-(i-n-e.width()+t.outerWidth()))}}f.call(this)},h=function(){var t=this.tabsView;t.width()<=this.$el.width()?(this.$el.removeClass("over over-l over-r"),p.call(this,0)):(this.$el.addClass("over"),p.call(this,parseInt(t.attr("opt-l"))||0))},p=function(t){var e=this.tabsView.width(),i=this.tabsView.parent().width();0<=t?t=0:t+e<i&&(t=i-e),this.$el.removeClass("over-l over-r"),t<0&&this.$el.addClass("over-l"),i<t+e&&this.$el.addClass("over-r"),t?(this.tabsView.css("transform","translate("+t+"px,0px)"),this.tabsView.attr("opt-l",t)):this.tabsView.css("transform","").removeAttr("opt-l"),f.call(this)},f=function(){this.thumbTimerId&&clearTimeout(this.thumbTimerId);var s=this;this.thumbTimerId=setTimeout(function(){s.thumbTimerId=0;var t=s.$el.find(".thumb"),e=s.tabsView.find(".tab.selected");if(e&&0<e.length){var i=e.offset().left;i-=s.tabsView.parent().offset().left;var n=e.outerWidth();if(s.isRenderAsApp()){var a=e.width();i+=(n-a)/2,n=a}t.css("left",i+"px"),t.width(n)}else t.width(0)},100)},g=function(t){var e=t&&0<t.length;if(!e||!t.is(".selected")){var i=e?t.index():[];r.select.setSelectedIndex.call(this,i);var n=v.call(this),a=null;n&&0<n.length&&(n.removeClass("selected"),a=this._getItemData(n),this.trigger("hide",a));var s=null;e&&(t.addClass("selected"),s=this._getItemData(t),this.trigger("show",s)),f.call(this),this.trigger("change",s,a)}},m=function(t){var e=t.is(".selected"),i=this._getItemData(t),n=null,a=null;e&&((n=t.next())&&0!=n.length||(n=t.prev()),this.trigger("hide",i)),r.item.removeItem.call(this,t),this.trigger("close",i),n&&0<n.length?(n.addClass("selected"),a=this._getItemData(n),this.trigger("show",a),r.select.setSelectedIndex.call(this,n.index())):r.select.setSelectedIndex.call(this,[]),e&&this.trigger("change",a,i),h.call(this)},v=function(){return this.tabsView.find(".tab.selected")};r.register(".ui-tabbar",i)}}(),function(c){if(c||!VRender.Component.Render.treeview){var u=c?require(__vrender__).Utils:VRender.Utils,h=c?require("./_base"):VRender.Component.Render,a=function(t,e){h._select.call(this,t,e)},t=a.prototype=new h._select;a.getNewItem=function(t,e,i,n){var a=t("<li></li>").appendTo(e),s=t("<div class='tree-node'></div>").appendTo(a);return s.append("<span class='ep'></span>"),this.isChkboxVisible()&&s.append("<span class='chkbox'><i></i></span>"),this._isIconVisible()&&s.append("<span class='ic'><i></i></span>"),s.append("<div class='lbl'></div>"),a},t.render=function(t,e){return e.addClass("ui-treeview"),e.append("<ul class='root' level='0'></ul>"),h._select.render.call(this,t,e),i.call(this,t,e),this},t.getData=function(){var t=u.toArray(this.options.data);if(t._vr_adapter_flag)return t;var i=this,n=0,a=this.getChildrenField()||"children",s=function(t){return u.map(t,function(t,e){return t=h.fn.doAdapter.call(i,t,n++),u.isArray(t[a])&&(t[a]=s(t[a])),t})};return(t=s(t))._vr_adapter_flag=!0,this.options.data=t},t.isChkboxVisible=function(){return u.isTrue(this.options.chkbox)},t.getChildrenField=function(){return this.options.childrenField},t.getLeafField=function(){return this.options.leafField},t._getItemContainer=function(t,e){return e.children("ul")},t._renderItems=function(t,e){var i=this._getItemContainer(t,e);n.call(this,t,e,i,this.getData())},t._renderEmptyView=function(){},t._renderLoadView=function(){},t._getNewItem=function(t,e,i,n){return a.getNewItem.call(this,t,e,i,n)},t._isIconVisible=function(){return u.isTrue(this.options.icon)},t._getIcon=function(t,e){return b.call(this,this.options.icon,t,e)},t._getOpenProps=function(){var t=o.call(this,this.options.openIndex);t=t&&0<t.length?t:null;var e=l.call(this,this.options.openId);return{indexs:t,ids:e=e&&0<e.length?e:null}};var n=function(t,e,i,n){p.call(this,t,i,n,0,1),s.call(this,t,i),r.call(this,t,i),c&&i.find("li").removeData("_node_data")},p=function(a,s,t,r,o){var l=this,d=this.getChildrenField()||"children";return u.each(t,function(t){var e=l._getNewItem(a,s,t,r);f.call(l,a,e,t,r,o),r+=1;var i=t&&t[d];if(u.isArray(i)&&0<i.length){var n=a("<ul></ul>").appendTo(e);n.attr("level",o),r=p.call(l,a,n,i,r,o+1)}}),r},f=function(t,e,i,n,a){c&&e.data("_node_data",i);var s=this.getLeafField()||"leaf";u.isTrue(i&&i[s])&&e.addClass("is-leaf");var r=e.children(".tree-node"),o=r.children(".ic");if(o&&0<o.length){var l=this._getIcon(i,n);u.isNotBlank(l)&&o.children("i").css("backgroundImage","url("+l+")")}var d=r.children(".lbl");h._item.renderOneItem.call(this,t,r,d,i,n)},s=function(t,e){var i=this._getOpenProps()||{},n=i.indexs;if(n&&0<n.length)for(var a=0,s=n.length;a<s;a++){(o=d.call(this,e,n[a],!0))&&o.addClass("open")}else{var r=i.ids;if(r&&0<r.length)for(a=0,s=r.length;a<s;a++){var o;if(o=g.call(this,e,r[a]))for(o.addClass("open");;){var l=o.parent();if(l.is(".root"))break;(o=l.parent()).addClass("open")}}}},r=function(t,e){var i=this.getSelectedIndex(!0);if(i)for(var n=0,a=i.length;n<a;n++){if((r=d.call(this,e,i[n],!0))&&(r.addClass("selected"),!this.isMultiple()))break}else{var s=this.getSelectedKey(!0);if(s)for(n=0,a=s.length;n<a;n++){var r;if((r=g.call(this,e,s[n]))&&(r.addClass("selected"),!this.isMultiple()))break}}v.call(this,e,!1)},i=function(t,e){this.isChkboxVisible()&&e.attr("opt-chk","1");var i=this.getChildrenField();if(u.isNotBlank(i)&&e.attr("opt-child",i),this.options.apiName){var n=this._getOpenProps()||{},a=n.indexs&&n.indexs.join(",");e.attr("opt-openinds",a||null);var s=n.ids&&n.ids.join(",");e.attr("opt-openids",s||null)}if(c){var r=this.options.icon;u.isFunction(r)?r=escape(r):"string"!=typeof r&&(r=u.isTrue(r)?1:0),r&&e.attr("opt-icon",r)}},d=function(t,s,r){var o=0,l=function(t){for(var e=t.children(),i=0,n=e.length;i<n;i++){var a=e.eq(i);if(o==s)return a;if(o+=1,(!r||a.is(".open"))&&(a=l(a.children("ul"))))return a}return null};return l(t)},g=function(t,s,r){var o=this,l=function(t){for(var e=t.children(),i=0,n=e.length;i<n;i++){var a=e.eq(i);if(o._getDataKey(m.call(o,a))==s)return a;if((!r||a.is(".open"))&&(a=l(a.children("ul"))))return a}return null};return l(t)},m=function(t){return c?t.data("_node_data"):t.data("itemData")},v=function(t,e){var i=t.children();if(i&&0<i.length){for(var n=!1,a=!0,s=0,r=i.length;s<r;s++){var o=i.eq(s),l=o.children("ul");if(e||o.is(".selected"))n=!0,o.addClass("selected"),this.isMultiple()&&v.call(this,l,!0);else{var d=v.call(this,l,!1);"all"==d?(o.addClass(this.isMultiple()?"selected":"selected_"),n=!0):"part"==d?(o.addClass("selected_"),a=!(n=!0)):a=!1}}return a?"all":n?"part":null}return null},o=function(t){if(u.isBlank(t))return[];u.isArray(t)||(t=(""+t).split(","));var e=[];return u.each(t,function(t){isNaN(t)||(t=parseInt(t),!isNaN(t)&&0<=t&&e.push(t))}),e},l=function(t){if(u.isBlank(t))return[];u.isArray(t)||(t=(""+t).split(","));var e=[];return u.each(t,function(t){(t||0===t)&&e.push(isNaN(t)?t:parseInt(t))}),e},b=function(t,e,i){return u.isFunction(t)?t(e,i):(!0!==t&&1!=t||(t="icon"),"string"==typeof t?/\/|\./.test(t)?t:e&&e[t]||null:null)};c?module.exports=a:(a.getIcon=b,a.getOpenIndex=o,a.getOpenId=l,a.renderItems=n,a.renderOneNode=f,VRender.Component.Render.treeview=a)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Tree){var h=VRender.Utils,i=VRender.Component,o=i.Render,d=o.treeview,n=window.UITreeView=i.Tree=function(t,e){return i.base.isElement(t)?this.init(t,e)!==this?i.get(t):(this.$el.on("tap",".tree-node",l.bind(this)),this.$el.on("tap",".tree-node > .chkbox",u.bind(this)),this.$el.on("tap","li.more > div",f.bind(this)),this.isRenderAsApp()||this.$el.on("tap",".tree-node > .ep",c.bind(this)),void a.call(this)):n.create(t)},t=n.prototype=new i.select;n.find=function(t){return i.find(t,".ui-treeview",n)},n.create=function(t){return i.create(t,n,d)},t.getDataAt=function(t,e){var i=w.call(this,t,e);return i?this._getItemData(i):null},t.getDataIndex=function(t,e){var i=T.call(this,t,e);return i?x.call(this,i,e):-1},t.getDataById=function(t,e){var i=D.call(this,t,e);return i?this._getItemData(i):null},t.getIndexById=function(t,e){var i=D.call(this,t,e);return i?x.call(this,i,e):-1},t.getDataByName=function(i,n){if(h.isBlank(i))return null;var a=this,s=null;return R.call(this,function(t){var e=a._getItemData(t);return e&&e.name==i?(s=e,!1):!n&&!t.is(".open")||void 0}),s},t.getIndexByName=function(n,a){if(h.isBlank(n))return-1;var s=this,r=-1;return R.call(this,function(t,e){var i=s._getItemData(t);return i&&i.name==n?(r=e,!1):!a&&!t.is(".open")||void 0}),r},t.isChkboxVisible=function(){return"1"==this.$el.attr("opt-chk")},t.setChkboxVisible=function(t){if(t=!!h.isNull(t)||h.isTrue(t),this.isChkboxVisible()!=t){var e=this._snapshoot(),i=this.$el.find(".tree-node");t?(this.$el.attr("opt-chk","1"),i.children(".ep").after("<span class='chkbox'><i></i></span>")):(this.$el.removeAttr("opt-chk"),i.parent().removeClass("selected").removeClass("selected_"),i.children(".chkbox").remove()),e.done()}},t.getChildrenField=function(){return this.$el.attr("opt-child")||null},t.getLeafField=function(){return this.options.leafField},t.getSelectedIndex=function(t,i){var n=[],a=this.isChkboxVisible(),s=this.isMultiple();return R.call(this,function(t,e){if(a){if(t.is(".selected")){if(n.push(e),!s)return!1;if(!i)return!0}}else if(t.children(".tree-node").is(".active"))return n.push(e),!1;if(!i&&!t.is(".open"))return!0}),t||s?0<n.length?n:null:0<n.length?n[0]:-1},t.setSelectedIndex=function(t,i){var n=this.isChkboxVisible(),a=this.isMultiple(),s=o.fn.getIntValues(t,0);!(1<s.length)||n&&a||(s=[s.pop()]);var e=this._snapshoot(),r=this.$el.find(".tree-node");n?r.parent().removeClass("selected").removeClass("selected_"):r.removeClass("active"),0<s.length&&R.call(this,function(t,e){if(0<=s.indexOf(e)){if(!n)return t.children(".tree-node").addClass("active"),!1;if(!t.is(".selected")){if(t.addClass("selected"),v(t),!a)return!1;m(t,!0)}}if(!i&&!t.is(".open"))return!0}),e.done()},t.getSelectedKey=function(t,e){var i=[],n=this.isChkboxVisible(),a=this.isMultiple(),s=this;return R.call(this,function(t){if(n){if(t.is(".selected")){if(i.push(C.call(s,t)),!a)return!1;if(!e)return!0}}else if(t.children(".tree-node").is(".active"))return i.push(C.call(s,t)),!1;if(!e&&!t.is(".open"))return!0}),t||a?0<i.length?i:null:0<i.length?i[0]:-1},t.setSelectedKey=function(t,n){var a=this.isChkboxVisible(),s=this.isMultiple(),r=h.isArray(t)?t:h.isBlank(t)?[]:h.trimToEmpty(t).split(",");!(1<r.length)||a&&s||(r=[r.pop()]);var e=this._snapshoot(),i=this.$el.find(".tree-node");if(a?i.parent().removeClass("selected").removeClass("selected_"):i.removeClass("active"),0<r.length){var o=this;R.call(this,function(t,e){var i=C.call(o,t);if(0<=h.index(r,function(t){return t==i})){if(!a)return t.children(".tree-node").addClass("active"),!1;if(!t.is(".selected")){if(t.addClass("selected"),v(t),!s)return!1;m(t,!0)}}if(!n&&!t.is(".open"))return!0})}e.done()},t.getSelectedData=function(t,e){var i=[],n=this.isChkboxVisible(),a=this.isMultiple(),s=this;return R.call(this,function(t){if(n){if(t.is(".selected")){if(i.push(I.call(s,t)),!a)return!1;if(!e)return!0}}else if(t.children(".tree-node").is(".active"))return i.push(I.call(s,t)),!1;if(!e&&!t.is(".open"))return!0}),t||a?0<i.length?i:null:0<i.length?i[0]:null},t.isAllSelected=function(){var e=!0;return R.call(this,function(t){return!!t.is(".selected")||(e=!1)}),e},t.open=function(t){var e=T.call(this,t,!0);e&&s.call(this,e)},t.openAt=function(t,e){var i=w.call(this,t,e);i&&s.call(this,i)},t.openById=function(t){var e=D.call(this,t,!0);e&&s.call(this,e)},t.close=function(t){var e=T.call(this,t,!0);e&&r.call(this,e)},t.closeAt=function(t,e){var i=w.call(this,t,e);i&&r.call(this,i)},t.closeById=function(t){var e=D.call(this,t,!0);e&&r.call(this,e)},t.addItem=function(t,e,i){if(h.isBlank(t))return!1;var n=this._getItemContainer();if(h.isNotBlank(e)){var a=T.call(this,e,!0);a&&((n=a.children("ul"))&&0<n.length||(n=$("<ul></ul>").appendTo(a)).attr("level",parseInt(a.parent().attr("level"))+1))}var s=n.children(),r=n.is(".root")?0:x.call(this,n.parent(),!0);0<=(i=h.getIndexValue(i))&&i<s.length-1&&(r+=i);var o=this._snapshoot();return b.call(this,n,t,i,r),o.done(),!0},t.updateItem=function(i,t,e){if(h.isBlank(i))return!1;isNaN(t)||!t&&0!==t||(e=t,t=null);var n=this._snapshoot();if(t){var a=T.call(this,t,!0);if(!a)return n.release(),!1;var s=a.children("ul").children();if(h.isBlank(e)){var r=this,o=this._getDataKey(i);(l=h.find(s,function(t){var e=r._getItemData(t);return i==e||o==r._getDataKey(e)}))&&y.call(this,l,i)}else isNaN(e)||0<=(e=parseInt(e))&&e<s.length&&y.call(this,s.eq(e),i)}else if(h.isBlank(e)){(l=T.call(this,i,!0))&&y.call(this,l,i)}else if(!isNaN(e)){var l;e=parseInt(e),(l=w.call(this,e))&&y.call(this,l,i)}return n.done(),!0},t.removeItem=function(i,t){if(h.isBlank(i))return!1;var e=this._snapshoot();if(t){var n=T.call(this,t,!0);if(!n)return e.release(),!1;var a=this,s=this._getDataKey(i),r=n.children("ul").children();(o=h.find(r,function(t){var e=a._getItemData(t);return i==e||s==a._getDataKey(e)}))&&_.call(this,o)}else{var o;(o=T.call(this,i,!0))&&_.call(this,o)}return e.done(),!0},t.removeItemAt=function(t,e){if((t=h.getIndexValue(t))<0)return!1;var i=this._snapshoot();if(e){var n=T.call(this,e,!0);if(!n)return i.release(),!1;var a=n.children("ul").children();t<a.length&&_.call(this,a.eq(t))}else{var s=w.call(this,t);s&&_.call(this,s)}return i.done(),!0},t.addOrUpdateItem=function(t,e){h.isBlank(t)||this.updateItem(t,e)||this.addItem(t,e)},t.setItems=function(t,e){if(t=h.toArray(t),e){var i=T.call(this,e,!0);if(!i)return;for(var n=this._snapshoot(),a=i.children("ul").children(),s=a.length-1;0<=s;s--)_.call(this,a.eq(s));if(t&&0<t.length){var r=i.children("ul");r&&0<r.length||(r=$("<ul></ul>").appendTo(i)).attr("level",parseInt(i.parent().attr("level"))+1);for(var o=x.call(this,i,!0),l=(s=0,t.length);s<l;s++)b.call(this,r,t[s],s,o),o+=1}n.done()}else this.setData(t)},t.load=function(i,a,s){if(i=i||this.lastLoadApi,h.isBlank(i))return!1;var r=this._getOpenProps()||{};r.indexs&&(r.ids=null);var o=this,l=0,d=[],c=[],u=function(t,e){l+=1,p.call(o,t,i,e,function(t,e){if(l-=1,t?d.push(t):e&&0<e.length&&(c=c.concat(e)),r.indexs&&0<r.indexs.length){var i=w.call(o,r.indexs.shift(),!0);if(i&&!i.is(".is-loaded")){var n=C.call(o,i);u(i.addClass("open"),h.extend(a,{pid:n}))}}else r.ids&&h.each(r.id,function(t){var e=D.call(o,t,!0);if(e&&!e.is(".is-loaded")){var i=C.call(o,e);u(e.addClass("open"),h.extend(a,{pid:i}))}});l<=0&&h.isFunction(s)&&(d=d.join("\n"),s(d||!1,c),o.trigger("loaded",d,c))})};u(this._getItemContainer().empty(),a)},t._renderItems=function(t,e,i){d.renderItems.call(this,t,this.$el,e,i)},t._getItemContainer=function(){return this.$el.children("ul")},t._getNewItem=function(t,e,i,n){return d.getNewItem.call(this,t,e,i,n)},t._isIconVisible=function(){if(h.isTrue(this.options.icon))return!0},t._getIcon=function(t,e,i){return d.getIcon.call(this,this.options.icon,t,e)},t._getOpenProps=function(){var t={},e=this.$el.attr("opt-openinds");h.isNotBlank(e)&&(e=d.getOpenIndex.call(this,e),t.indexs=e&&0<e.length?e:null);var i=this.$el.attr("opt-openids");return h.isNotBlank(i)&&(i=d.getOpenId.call(this,i),t.ids=i&&0<i.length?i:null),this.$el.removeAttr("opt-openinds").removeAttr("opt-openids"),t},t._getItemData=function(t){return I.call(this,t)},t._doAdapter=function(t){var e=h.toArray(t);if(e._vr_adapter_flag)return e;var i=this,n=0,a=this.getChildrenField()||"children",s=function(t){return h.map(t,function(t,e){return t=o.fn.doAdapter.call(i,t,n++),h.isArray(t[a])&&(t[a]=s(t[a])),t})};return(e=s(e))._vr_adapter_flag=!0,e},t._snapshoot_shoot=function(t){t.selectedIndex=this.getSelectedIndex(!0)},t._snapshoot_compare=function(t){var e=this.getSelectedIndex(!0);return o.fn.equalIndex(t.selectedIndex,e)};var a=function(){if(!this.options.hasOwnProperty("icon")){var t=this.$el.attr("opt-icon");"1"==t?t=!0:/^function/.test(t)?t=new Function("var Utils=VRender.Utils;return ("+unescape(t)+");")():h.isBlank(t)&&(t=!1),this.options.icon=t}this.$el.removeAttr("opt-icon"),this.$el.removeAttr("data-inds").removeAttr("data-ids")},p=function(a,t,e,s){var r=a;if(a.is("li")&&((r=a.children("ul"))&&0<r.length||(r=$("<ul></ul>").appendTo(a)).attr("level",parseInt(a.parent().attr("level"))+1)),a.is(".is-loaded,.is-loading"))return!1;a.addClass("is-loading");var o=$("<li class='loading'></li>").appendTo(r);o.append("<div>"+(this.loadingText||"正在加载...")+"</div>"),r.children(".more").remove();var l=this,d=x.call(this,a.is("li")?a:a.children().last);i.load.call(this,t,e,function(t,e){o.remove();var i=t?null:h.toArray(e);if(i&&0<i.length)if(h.each(i,function(t){b.call(l,r,t,-1,d),d+=1}),l.hasMore()){var n=$("<li class='more'></li>").appendTo(r);n.append("<div>"+(l.moreText||"加载更多..")+"</div>"),n.attr("page-no",l._pageInfo.page)}else a.addClass("is-loaded");else a.addClass("is-loaded"),0==r.children().length&&a.addClass("is-leaf").removeClass("open");a.removeClass("is-loading"),h.isFunction(s)&&s(t,i)})},s=function(t){for(var e=[],i=t.parent();!i.is(".root");)i=i.parent(),e.push(i),i=i.parent();var n=this;if(h.each(e,function(t){t.is(".open")||(t.addClass("open"),n.trigger("open",n._getItemData(t)))}),!t.is(".open")&&!t.is(".is-leaf")){F.call(this,t);var a=this._getItemData(t);if(this.lastLoadApi&&!t.is(".is-loaded")&&0==t.children("ul").children().length){var s={pid:C.call(this,t),p_no:1};s=h.extend(this.lastLoadParams,s),p.call(this,t,this.lastLoadApi,s,function(t,e){n.trigger("loaded",t,e,a)})}this.trigger("open",a)}},r=function(t){t.is(".open")&&(N.call(this,t),this.trigger("close",this._getItemData(t)))},l=function(t){var e=$(t.currentTarget);if(e.is(".active")||(this.$el.find(".tree-node.active").removeClass("active"),e.addClass("active"),this.trigger("itemclick",this._getItemData(e.parent()))),this.isRenderAsApp()){var i=e.parent();i.is(".open")?r.call(this,i):s.call(this,i)}},c=function(t){var e=$(t.currentTarget).parent().parent();return e.is(".open")?r.call(this,e):s.call(this,e),!1},u=function(t){var e=$(t.currentTarget).parent().parent();return g.call(this,e,!e.is(".selected")),!1},f=function(t){var e=$(t.currentTarget).parent(),i={p_no:parseInt(e.attr("page-no"))+1},n=e.parent();n.is(".root")?i.pid=null:(n=n.parent(),i.pid=C.call(this,n)),i=h.extend(this.lastLoadParams,i);var a=this,s=this._getItemData(n);p.call(this,n,this.lastLoadApi,i,function(t,e){a.trigger("loaded",t,e,s)})},g=function(t,e){var i=this.isMultiple();if(e){if(t.is(".selected"))return;if(i||(this.$el.find("li.selected").removeClass("selected"),this.$el.find("li.selected_").removeClass("selected_")),t.addClass("selected").removeClass("selected_"),i)m(t,!0),v(t);else for(;;){var n=t.parent();if(n.is(".root"))break;(t=n.parent()).addClass("selected_")}}else{if(t.is(".selected"))t.removeClass("selected");else{if(!t.is(".selected_"))return;t.removeClass(".selected_")}i&&m(t,!1),v(t)}},m=function(t,e){h.each(t.children("ul").children(),function(t){t.is(".more,.loading")||(t.removeClass("selected_"),e?t.addClass("selected"):t.removeClass("selected"),m(t,e))})},v=function(t){var e=t.parent();if(!e.is(".root")){var i=!1,n=!0;h.each(e.children(),function(t){t.is(".more,.loading")||(t.is(".selected")?i=!0:n=!!t.is(".selected_")&&!(i=!0))});var a=e.parent();a.removeClass("selected").removeClass("selected_"),n?a.addClass("selected"):i&&a.addClass("selected_"),v(a)}},b=function(t,e,i,n){i=h.getIndexValue(i);var a=this._getNewItem($,t,e,n);0<=i&&i<t.children().length-1&&t.children().eq(i).before(a);var s=parseInt(t.attr("level"));if(d.renderOneNode.call(this,$,a,e,n,s),!t.is(".root")){var r=t.parent().removeClass("is-leaf");this.isChkboxVisible()&&this.isMultiple()&&r.is(".selected")&&a.addClass("selected")}var o=null;if(t.is(".root"))o=this.getData();else if(o=this._getItemData(t.parent())){var l=this.getChildrenField()||"children";h.isArray(o[l])||(o[l]=[]),o=o[l]}h.isArray(o)&&(0<=i&&i<o.length?o.splice(i,0,e):o.push(e))},y=function(t,e){var i=t.parent(),n=x.call(this,t,!0);t.children(".tree-node .lbl").empty();var a=parseInt(i.attr("level"));d.renderOneNode.call(this,$,t,e,n,a);var s=null;s=i.is(".root")?this.getData():this._getItemData(i.parent());var r=t.index();if(h.isArray(s)&&r<s.length){var o=this.getChildrenField()||"children";h.isArray(e[o])||(e[o]=s[r][o]),s.splice(r,1,e)}},_=function(e){N.call(this,e);var i=e.parent(),t=e.index();if(i.is(".root")){var n=this.getData();n&&t<n.length&&n.splice(t,1)}else{var a=this._getItemData(i.parent()),s=this.getChildrenField()||"children";h.isArray(a[s])&&t<a[s].length&&a[s].splice(t,1)}var r=this;setTimeout(function(){if(e.remove(),!i.is(".root")){e=i.parent();var t=i.children();0<t.length?v.call(r,t.eq(0)):(i.remove(),e.is(".selected_")&&(e.removeClass("selected_"),v.call(r,e)))}},220)},w=function(i,n){if((i=h.getIndexValue(i))<0)return null;var a=null;return R.call(this,function(t,e){return i==e?(a=t,!1):!n&&!t.is(".open")||void 0}),a},D=function(i,n){if(h.isBlank(i))return null;var a=this,s=null;return R.call(this,function(t){var e=C.call(a,t);return i==e?(s=t,!1):!n&&!t.is(".open")||void 0}),s},T=function(n,a){var s=this,r=null,o=this._getDataKey(n);return R.call(this,function(t){var e=s._getItemData(t),i=n==e;i||(i=s._getDataKey(e)==o);return i?(r=t,!1):!a&&!t.is(".open")||void 0}),r},x=function(i,n){var a=-1;return i&&0<i.length&&R.call(this,function(t,e){return t.is(i)?(a=e,!1):!n&&!t.is(".open")||void 0}),a},C=function(t){return this._getDataKey(this._getItemData(t))},I=function(t){var e=t.children(".tree-node").data("itemData");if(h.isBlank(e)){var a=0,s=x.call(this,t,!0),r=this.getChildrenField()||"children",o=function(t){for(var e=0,i=t.length;e<i;e++){var n=t[e];if(a==s)return n;if(a+=1,h.isArray(n[r])&&(n=o(n[r])))return n}};e=o(this.getData())}return e},R=function(o){var l=0,d=function(t){for(var e=parseInt(t.attr("level"))||0,i=t.children(),n=0,a=i.length;n<a;n++){var s=i.eq(n);if(!s.is(".more,.loading")){var r=o(s,l,e);if(l+=1,!1===r)return!0;if(!0!==r&&(r=d(s.children("ul"))))return!0}}};d(this._getItemContainer())},F=function(t){t.addClass("open");var e=t.children("ul");e&&0<e.length&&(e.height(0),h.nextTick(function(){e.addClass("animate-in"),e.height(e[0].scrollHeight),setTimeout(function(){e.css("height","")},300)}))},N=function(t){var e=t.children("ul");e&&0<e.length?(e.addClass("animate-out"),e.height(e[0].scrollHeight),setTimeout(function(){e.height(0),setTimeout(function(){t.removeClass("open"),e.removeClass("animate-in").removeClass("animate-out"),e.css("height","")},300)},0)):t.removeClass("open")};i.register(".ui-treeview",n)}}(),function(c){if(c||!VRender.Component.Render.datagrid){var u=c?require(__vrender__).Utils:VRender.Utils,r=c?require("./_base"):VRender.Component.Render,o={date:"yyyy-MM-dd",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss"},h={asc:"/VRender/icons/020c.png",desc:"/VRender/icons/021c.png"},t=function(t,e){r._select.call(this,t,e)},e=t.prototype=new r._select;(t.rowRenderer=function(t,e,i,n){a.call(this,t,e,this.__columns,i,n)})._state=1,e.render=function(t,e){e.addClass("ui-datagrid");var i=u.getFormatSize(this.options.height,this.isRenderAsRem());i&&e.attr("opt-fixed","1").css("height",i),this.isChkboxVisible()&&e.attr("opt-chk","1");var n=parseInt(this.options.expandcols);n&&e.attr("opt-expcols",n);var a=t("<div class='table'></div>").appendTo(e);a.append("<header><div></div></header>"),a.append("<section><div><table><thead></thead><tbody></tbody></table></div></section>");var s=this.__columns=this.getColumns();return r._select.render.call(this,t,e),l.call(this,t,e,s),b.call(this,t,e,s),this.renderComplete=!0,this},e._getItemContainer=function(t,e){return(e=e.children(".table").children("section").children()).children("table").children("tbody")},e._getNewItem=function(t,e,i,n){return t("<tr class='datagrid-row'></tr>").appendTo(e)},e._renderItems=function(t,e){var i=this.getData(),a=!1,n=null,s=[].concat(i);if(i&&0<i.length){var r=this;u.each(this.__columns,function(i){if(u.isTrue(i.filter)&&u.isNotBlank(i.filterValue)){var n=r._getFilterFunction(i,i.filterValue);s=u.filter(s,function(t,e){return n(i,t,i.filterValue)}),a=!0}});var o=u.find(this.__columns,function(t){return u.isTrue(t.sortable)&&t.sortType});if(o){var l=this._getSortFunction(o,o.sortType);s.sort(function(t,e){return l(o,t,e,o.sortType)}),a=!0}}a&&(n=u.map(s,function(e){return u.index(i,function(t){return t==e})})),this._renderDatas=s,m.call(this,t,e,s,n)},e.getItemRenderer=function(){return t.rowRenderer},e._renderEmptyView=function(t,e){r._item.renderEmptyView.call(this,t,e)},e._renderLoadView=function(t,e){r._item.renderLoadView.call(this,t,e)},e._getSortFunction=function(t,e){return D.call(this,t,e)},e._getFilterFunction=function(t,e){return $.call(this,t,e)},e._hasExpand=function(){return 0<=u.index(this.__columns,function(t){return!!t.expand})},e.getColumns=function(){return i(this.options.columns)},e.isChkboxVisible=function(){return u.isTrue(this.options.chkbox)},e.isHeaderVisible=function(){return!this.options.hasOwnProperty("showHeader")||u.isTrue(this.options.showHeader)},e.getHeadRenderer=function(){return this.options.headRenderer},e.getColumnRenderer=function(){return this.options.columnRenderer||this.options.renderer},e.getExpandRenderer=function(){return this.options.expandRenderer},e.getRowStyleFunction=function(){return this.options.rowStyleFunction},e.getCellStyleFunction=function(){return this.options.cellStyleFunction};var l=function(a,t,e){if(this.isHeaderVisible()){var i=this.isRenderAsApp(),n=(t=t.removeClass("no-head").children(".table")).children("section").children().children("table").children("thead").empty();row=a("<tr></tr>").appendTo(n),this.isAllSelected(this._renderDatas||[])&&row.addClass("selected"),this._hasExpand()&&!i&&row.append("<th class='col-exp'></th>"),this.isChkboxVisible()&&row.append("<th class='col-chk'><span class='chkbox'></span></th>");var s=this;u.each(e,function(t,e){if(!t.expand){var i=a("<th></th>").appendTo(row);i.addClass("col-"+e),u.isNotBlank(t.name)&&i.attr("col-name",t.name),u.isNotBlank(t.dataType)&&i.attr("col-type",t.dataType);var n=u.getFormatSize(t.width,s.isRenderAsRem());n&&i.css("width",n),d.call(s,a,i,t,e),p.call(s,a,i,t,e)}}),this._hasExpand()&&i&&row.append("<th class='col-exp'></th>");var r=t.children("header").children().empty();c?r.write("<table><thead>"+n.html()+"</thead></table>"):r.html("<table><thead>"+n.html()+"</thead></table>"),row.find(".dropdown").remove()}else t.addClass("no-head")},d=function(t,e,i,n){if(!i.html){var a=this.getHeadRenderer();if(u.isFunction(a)){var s=a(i,n);if(s)return void(c&&u.isFunction(s.render)?s.render(e):e.append(s.$el||s))}}i.icon&&t("<i>&nbsp;</i>").appendTo(e).css("backgroundImage","url("+i.icon+")");var r=t("<div class='title'></div>").appendTo(e);i.html?r.html(i.html):r.text(i.title||i.name||"列 "+(n+1))},p=function(t,e,i,n){if(i.sortable||i.filter){var a=t("<div class=toolbar></div>").appendTo(e);i.sortable&&(i.sortType&&e.attr("opt-sort",i.sortType),s.call(this,t,a,i)),i.filter&&(i.filterValue&&e.attr("opt-filter",i.filterValue),f.call(this,t,a,i))}},s=function(t,e,i){var n=t("<div class='sort'><i title='排序'></i></div>").appendTo(e);this.isRenderAsApp()||u.isArray(i.sortable)&&0<i.sortable.length&&g.call(this,t,n,i.sortable,i.sortType,"无")},f=function(t,e,i){var n=t("<div class='filter'><i title='筛选'></i></div>").appendTo(e),a=i.filter;if("enum"==a&&(a=(a=y.call(this,i))&&0<a.length?u.map(a,function(t){return{label:t,value:t}}):[{label:"无选项",value:""}]),!this.isRenderAsApp())if(u.isArray(a))g.call(this,t,n,a,i.filterValue,"空");else{var s=t("<div class='dropdown ipt'></div>").appendTo(n),r=t("<input/>").appendTo(s);i.filterValue&&r.val(i.filterValue)}},g=function(r,o,t,l,d){var c=r("<ul class='dropdown'></ul>").appendTo(o);u.each(t,function(t){var e=r("<li></li>").appendTo(c),i=!1;t.hasOwnProperty("type")&&(e.attr("data-type",t.type),i=t.type==l),t.hasOwnProperty("value")&&(e.attr("data-val",t.value),i=t.value==l);var n=r("<i></i>").appendTo(e),a=t.icon||h[t.type];if(a&&n.css("backgroundImage","url("+a+")"),r("<span></span>").appendTo(e).text(t.label||d),i){e.addClass("selected");var s=o.children("i");a&&s.css("backgroundImage","url("+a+")"),t.label&&s.attr("title",t.label)}})},m=function(a,t,e,s,i){var r=this._getItemContainer(a,t).empty(),o=i||this.getSelectedIndex(!0),l=this.getSelectedKey(!0)||[],d=this;u.each(e,function(t,e){var i=s?s[e]:e,n=d._getNewItem(a,r,t,i);n&&(d._renderOneItem(a,n,t,i),d._isSelected(t,e,o,l)&&n.addClass("selected"))})},a=function(n,a,t,s,r){a.attr("opt-ind",r);var e=this.isRenderAsApp(),i=this.getRowStyleFunction();if(u.isFunction(i)){var o=i(s,r);o&&a.css(o)}this._hasExpand()&&!e&&a.append("<td class='col-exp'><span class='expbtn'></span></td>"),this.isChkboxVisible()&&a.append("<td class='col-chk'><span class='chkbox'></span></td>");var l=this;u.each(t,function(t,e){if(!t.expand){var i=n("<td></td>").appendTo(a);v.call(l,n,i,t,s,r,e)}}),this._hasExpand()&&e&&a.append("<td class='col-exp'><span class='expbtn'></span></td>")},v=function(t,e,i,n,a,s){var r=this.getCellStyleFunction();if(u.isFunction(r)){var o=r(i.name,n,a,s);o&&e.css(o)}e.addClass("col-"+s),u.isNotBlank(i.name)&&e.attr("col-name",i.name);var l=null,d=this.getColumnRenderer();u.isFunction(d)&&(l=d(i.name,n,a,s,i)),u.isNull(l)&&(l=C.call(this,i,n,s)),u.isBlank(l)&&(l="&nbsp;"),c&&u.isFunction(l.render)?l.render(e):e.append(l.$el||l)},b=function(t,e,i){if(c){var n=u.map(i,function(t){var e=u.extend({},t);return e.html&&(e.html=escape(e.html)),u.isFunction(e.sortFunction)?e.sortFunction=escape(e.sortFunction):u.isArray(e.sortable)&&u.each(e.sortable,function(t){u.isFunction(t.handler)&&(t.handler=escape(t.handler))}),u.isFunction(e.filterFunction)?e.filterFunction=escape(e.filterFunction):u.isArray(e.filter)&&u.each(e.filter,function(t){u.isFunction(t.handler)&&(t.handler=escape(t.handler))}),e});e.write("<div class='ui-hidden' name='columns' data='"+JSON.stringify(n)+"'></div>"),r.fn.renderFunction(e,"hrender",this.getHeadRenderer()),r.fn.renderFunction(e,"crender",this.getColumnRenderer()),r.fn.renderFunction(e,"erender",this.getExpandRenderer()),r.fn.renderFunction(e,"rstyle",this.getRowStyleFunction()),r.fn.renderFunction(e,"cstyle",this.getCellStyleFunction())}},y=function(t,e){var i=[],n=t&&t.name;return n&&(e=e||this.getData(!0),u.each(e,function(t){var e=t&&t[n];u.index(i,function(t){return t==e})<0&&i.push(e)})),i.sort()},i=function(t){t=u.map(u.toArray(t),n);var e=null,i=!0;return u.each(t,function(t){t.sortType&&(e&&(e.sortType=null),e=t),t.expand||(i=!1)}),i&&0<t.length&&(t[0].expand=!1),t},n=function(t,e){var i={};return u.isNull(t)?i.title="列 "+(e+1):u.isPrimitive(t)?i.name=u.trimToEmpty(t):(i.name=u.trimToEmpty(t.name),i.title=u.trimToNull(t.title),i.html=u.trimToNull(t.focusHtmlTitle),i.icon=u.trimToNull(t.icon),i.width=u.trimToNull(t.width),i.expand=u.isTrue(t.expand),u.isTrue(t.sortable)&&_(i,t),u.isTrue(t.filter)&&w(i,t)),i},_=function(t,e){u.isFunction(e.sortFunction)?t.sortFunction=e.sortFunction:u.isFunction(e.sortable)&&(t.sortFunction=e.sortable),u.isArray(e.sortable)&&0<e.sortable.length?t.sortable=u.map(e.sortable,function(t){return{type:t.type,label:t.label,icon:t.icon,handler:t.handler,custom:t.custom}}):t.sortable="custom"!=e.sortable||"custom",t.sortType=e.sortType?u.trimToNull(e.sortType):null},w=function(t,e){u.isFunction(e.filterFunction)?t.filterFunction=e.filterFunction:u.isFunction(e.filter)&&(t.filterFunction=e.filter),u.isArray(e.filter)&&0<e.filter.length?t.filter=u.map(e.filter,function(t){return{label:t.label,value:t.value,icon:t.icon,handler:t.handler,custom:t.custom}}):t.filter=!/^(custom|enum)$/.test(e.filter)||e.filter,t.filterValue=e.filterValue?u.trimToNull(e.filterValue):null},D=function(a,t){if(a){if(u.isNotNull(t)&&u.isArray(a.sortable)){var s=u.findBy(a.sortable,"type",t);if(s&&u.isFunction(s.handler))return function(t,e,i,n){return s.handler(e,i,n)}}if(u.isFunction(a.sortFunction))return function(t,e,i,n){return a.sortFunction(e,i,n)}}if(u.isFunction(this.options.sortFunction)){var r=this.options.sortFunction;return function(t,e,i,n){return r(e,i,n,t)}}return T},$=function(n,t){if(n){if(u.isNotNull(t)&&u.isArray(n.filter)){var a=u.findBy(n.filter,"value",t);if(a&&u.isFunction(a.handler))return function(t,e,i){return a.handler(e,i)}}if(u.isFunction(n.filterFunction))return function(t,e,i){return n.filterFunction(e,i)}}if(u.isFunction(this.options.filterFunction)){var s=this.options.filterFunction;return function(t,e,i){return s(e,i,t)}}return x},T=function(i,t,e,n){if(i&&i.name&&/^(asc|desc)$/i.test(n)){var a=t?t[i.name]:null,s=e?e[i.name]:null;return function(){if(u.isNull(a))return u.isNull(s)?0:-1;if(u.isNull(s))return u.isNull(a)?0:1;var t=i.dataType;if(/date/i.test(t)){if(a=u.toDate(a),s=u.toDate(s),!a)return s?1:0;if(!s)return a?-1:0;var e=/^date$/i.test(t)?"yyyyMMddHHmmss":"yyyyMMdd";return a=u.toDateString(a,e),s=u.toDateString(s,e),a<s?-1:s<a?1:0}return/num/i.test(t)||!isNaN(a)&&!isNaN(s)?parseFloat(a)-parseFloat(s):a.localeCompare(s)}()*(/^asc$/i.test(n)?1:-1)}return 0},x=function(t,e,i){if(!t&&!t.name)return!0;if(u.isNull(e))return!1;var n=e[t.name];if(n===i)return!0;var a=t.dataType;if(/date/i.test(a)){if(!(i=u.toDate(i)))return!0;if(n=u.toDate(n)){var s=/^date$/i.test(a)?"yyyyMMdd":"yyyyMMddHHmmss";return i=u.toDateString(i,s),0===(n=u.toDateString(n,s)).indexOf(i)}return!1}return u.isNull(n)?u.isNull(i):u.isNull(i)?u.isNull(n):/num/i.test(a)||!isNaN(i)&&!isNaN(n)?parseFloat(i)==parseFloat(n):i==n||(i=u.trimToEmpty(i),0<=(n=u.trimToEmpty(n)).indexOf(i))},C=function(t,e,i){if(u.isBlank(e))return null;if(u.isBlank(t.name))return""+e;var n=e[t.name];if(t.dataType&&u.isNotBlank(n)){var a=t.dataType;if("localtime"===a)n=u.toLocalDateString(u.toDate(n));else if(/^(date|datetime|time)$/.test(a))(n=u.toDate(n))&&(n=u.toDateString(n,o[a]));else if("money"===a)n=parseFloat(n),n=isNaN(n)?null:"<span class='val'>￥<span class='v1'>"+(n=n.toFixed(2).split("."))[0]+"</span>.<span class='v2'>"+n[1]+"</span></span>";else if("number"===a||"num"===a)if(n=parseFloat(n),isNaN(n))n=null;else{var s=parseFloat(t.decimals);(isNaN(s)||s<0)&&(s=0),n=n.toFixed(s)}}return n};c?module.exports=t:(t.dateFormats=o,t.defaultIcons=h,t.getFormatColumns=i,t.getSortFunction=D,t.getFilterFunction=$,t.renderHeader=l,t.renderItems=m,t.renderCell=v,t.getColumnValueSet=y,t.renderToolDropdown=g,VRender.Component.Render.datagrid=t)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Datagrid){var c=VRender.Utils,o=VRender.Component,a=o.Render,u=a.datagrid,s=window.UIDatagrid=o.Datagrid=function(t,e){if(!o.base.isElement(t))return s.create(t);if(this.init(t,e)!==this)return o.get(t);this.__columns=this.getColumns();var i=this.$el,n=this.gridHead=i.children(".table").children("header").children(),a=this.gridBody=i.children(".table").children("section").children();n.on("tap","th.col-chk",d.bind(this)),a.on("tap","tr",r.bind(this)),a.on("tap","td.col-exp .expbtn",h.bind(this)),this.isRenderAsApp()?(n.on("tap","th",l.bind(this)),i.on("tap",".sort-and-filter",v.bind(this)),i.on("tap",".sort-and-filter .item",b.bind(this)),i.on("tap",".sort-and-filter input",y.bind(this)),i.on("tap",".sort-and-filter .clearbtn",_.bind(this)),i.on("tap",".sort-and-filter .submitbtn",w.bind(this)),i.on("keyup",".sort-and-filter input",D.bind(this))):(n.on("tap",".toolbar > *",p.bind(this)),n.on("tap",".toolbar .dropdown li",g.bind(this)),n.on("mouseenter",".toolbar > *",f.bind(this)),n.on("mouseleave",".toolbar > *",f.bind(this))),C.call(this),this.renderComplete=!0},t=s.prototype=new o.select;s.find=function(t){return o.find(t,".ui-datagrid",s)},s.create=function(t){return o.create(t,s,u)},t.getData=function(t){if(t)return this.options.data=this._doAdapter(this.options.data),this.options.data;var n=this.getData(!0);return c.map(this._getItems(),function(t){var e=t.data("itemData");if(!e){var i=parseInt(t.attr("opt-ind"))||0;e=n[i]}return e})},t.setData=function(t){var e=this._snapshoot();this.options.data=this._doAdapter(t),o.select.setSelectedIndex.call(this,[]),this._getItems().removeClass("selected").removeClass("expand"),T.call(this),e.done([],[])},t.getColumns=function(){if(this.options.hasOwnProperty("columns"))return this.options.columns;var e=function(t){return new Function("var Utils=VRender.Utils;return ("+unescape(t)+");")()},i=this.$el.children("[name='columns']");if(i&&0<i.length)try{i=JSON.parse(i.remove().attr("data")),c.each(i,function(t){t.html&&(t.html=unescape(t.html)),/^function/.test(t.sortable)?t.sortable=e(t.sortable):c.isArray(t.sortable)&&c.each(t.sortable,function(t){/^function/.test(t.handler)&&(t.handler=e(t.handler))}),/^function/.test(t.sortFunction)&&(t.sortFunction=e(t.sortFunction)),/^function/.test(t.filter)?t.filter=e(t.filter):c.isArray(t.filter)&&c.each(t.filter,function(t){/^function/.test(t.handler)&&(t.handler=e(t.handler))}),/^function/.test(t.filterFunction)&&(t.filterFunction=e(t.filterFunction))})}catch(t){i=[]}else i=[];return this.options.columns=i,this.options.columns},t.setColumns=function(t){this.options.columns=u.getFormatColumns(t);var i=this.__columns=this.options.columns;if(this.currentSort&&this.currentSort.name){var e=c.findBy(i,"name",this.currentSort.name);e&&c.isTrue(e.sortable)&&e.sortType==this.currentSort.type?this.currentSort.column=e:this.currentSort=null}this.currentFilters&&c.remove(this.currentFilters,function(t){if(t.name){var e=c.findBy(i,"name",t.name);if(!e)return!0;t.column=e}}),n.call(this)},t.isHeaderVisible=function(){return!this.$el.is(".no-head")},t.setHeaderVisible=function(t){c.isNull(t)||c.isTrue(t)?this.isHeaderVisible()||(this.$el.removeClass("no-head"),i.call(this)):this.isHeaderVisible()&&(this.$el.addClass("no-head"),i.call(this))},t.isChkboxVisible=function(){return"1"==this.$el.attr("opt-chk")},t.setChkboxVisible=function(t){c.isNull(t)||c.isTrue(t)?this.isChkboxVisible()||(this.$el.attr("opt-chk","1"),n.call(this)):this.isChkboxVisible()&&(this.$el.removeAttr("opt-chk"),n.call(this))},t.getItemRenderer=function(){return u.rowRenderer},t.setItemRenderer=function(t){},t.getHeadRenderer=function(){return o.list.getFunction.call(this,"headRenderer","hrender")},t.setHeadRenderer=function(t){var e=this.getHeadRenderer()!=t;this.options.headRenderer=t,e&&i.call(this)},t.getColumnRenderer=function(){return this.options.hasOwnProperty("renderer")?this.options.renderer:a.fn.getFunction.call(this,"columnRenderer","crender")},t.setColumnRenderer=function(t){var e=this.getColumnRenderer()!=t;this.options.columnRenderer=t,delete this.options.renderer,e&&T.call(this)},t.getExpandRenderer=function(){return a.fn.getFunction.call(this,"expandRenderer","erender")},t.setExpandRenderer=function(t){var e=this.getExpandRenderer()!=t;if(this.options.expandRenderer=t,e){var i=this._getItemContainer();i.children(".row-expand").remove(),i.children(".expand").removeClass("expand").children(".col-exp").children(".expbtn").trigger("tap")}},t.getExpandColspan=function(){return parseInt(this.$el.attr("opt-expcols"))||0},t.setExpandColsapn=function(t){if(!isNaN(t)&&(t||0===t)&&(t=parseInt(t),!isNaN(t)&&0<t&&this.getExpandColspan()!=t)){this.$el.attr("opt-expcols",t);var e=this._getItemContainer();e.children(".row-expand").remove(),e.children(".expand").removeClass("expand").children(".col-exp").children(".expbtn").trigger("tap")}},t.getRowStyleFunction=function(){return a.fn.getFunction.call(this,"rowStyleFunction","rstyle")},t.setRowStyleFunction=function(t){var e=this.getRowStyleFunction()!=t;this.options.rowStyleFunction=t,e&&T.call(this)},t.getCellStyleFunction=function(){return a.fn.getFunction.call(this,"cellStyleFunction","cstyle")},t.setCellStyleFunction=function(){var t=this.getCellStyleFunction()!=value;this.options.cellStyleFunction=value,t&&T.call(this)},delete t.getLabelField,delete t.setLabelField,delete t.getLabelFunction,delete t.setLabelFunction,delete t.setItemRenderer,t.sort=function(t,e,i){c.isFunction(t)&&(i=t,t=e=null),c.isFunction(e)&&(i=e,e=null),t&&(t=L.call(this,""+t)),I.call(this,t,e,i)},t.filter=function(t,e,i){c.isFunction(t)&&(i=t,t=e=null),c.isFunction(e)&&(i=e,e=null),t&&(t=L.call(this,""+t)),R.call(this,t,e,i)},t.addItem=function(t,e){if(!c.isNull(t)){e=c.getIndexValue(e);var i=this.getData(!0);t=a.fn.doAdapter.call(this,t,e),0<=e&&e<i.length?i.splice(e,0,t):i.push(t);var n=this._snapshoot();T.call(this),n.done()}},t.updateItem=function(t,e){if(!c.isNull(t)){var i=this.getData(!0);if(e||0===e?(e=c.getIndexValue(e),t=a.fn.doAdapter.call(this,t,e)):(t=a.fn.doAdapter.call(this,t),e=this.getDataRealIndex(t,i)),0<=e){i.splice(e,1,t);var n=this._snapshoot();T.call(this),n.done()}}},t.removeItem=function(t){c.isNotNull(t)&&this.removeItemAt(this.getDataRealIndex(t))},t.removeItemAt=function(t){if(0<=(t=c.getIndexValue(t))){var e=this.getData(!0);if(t<e.length){e.splice(t,1);var i=this._snapshoot();T.call(this),i.done()}}},t.addOrUpdateItem=function(t){var e=this.getDataRealIndex(t);0<=e?this.updateItem(t,e):this.addItem(t,e)},t.getDataRealIndex=function(e,t){if((t=t||this.getData(!0))&&0<t.length){var i=this,n=this._getDataId(e);return c.index(t,function(t){return t==e||i._getDataId(t)==n})}return-1},t._getItemContainer=function(){if(!this.itemContainer){var t=this.$el.children(".table").children("section").children();this.itemContainer=t.children("table").children("tbody")}return this.itemContainer},t._getNewItem=function(t,e,i,n){return t("<tr class='datagrid-row'></tr>").appendTo(e)},t._getItemData=function(t){var e=t.data("itemData");if(!e){var i=this.getData(!0);if(c.isArray(i)&&0<i.length){var n=parseInt(t.attr("opt-ind"));if(!isNaN(n)&&0<=n)return i[n]}}return e},t._getSortFunction=function(t,e){return u.getSortFunction.call(this,t,e)},t._getFilterFunction=function(t,e){return u.getFilterFunction.call(this,t,e)},t._hasExpand=function(){return 0<=c.index(this.__columns,function(t){return!!t.expand})},t._rerender=function(){n.call(this)};var r=function(t){var e=$(t.currentTarget);if(e.parent().is(this._getItemContainer())){if(e.is(".disabled"))return;e.is(".selected")?e.removeClass("selected"):(e.addClass("selected"),this.isMultiple()||e.siblings().removeClass("selected")),z.call(this)}},l=function(t){var e=$(t.currentTarget),i=e.attr("col-name"),n=i&&L.call(this,i);if(n)if(n.filter||c.isArray(n.sortable))V.call(this,n,e);else if(n.sortable){var a=e.attr("opt-sort");a="desc"==a?null:"asc"==a?"desc":"asc",I.call(this,n,a)}},d=function(t){var e=this.gridHead.find("tr"),i=[];if(e.is(".selected"))e.removeClass("selected");else{e.addClass("selected");for(var n=0,a=this.length();n<a;n++)i.push(n)}this.setSelectedIndex(i)},h=function(t){var e=$(t.currentTarget).parent().parent();if(e.parent().is(this._getItemContainer())){if(e.is(".disabled"))return!1;if(e.is(".expand"))e.removeClass("expand"),e.next().remove();else{e.addClass("expand");var i=parseInt(e.attr("opt-ind"))||0,n=this._getItemData(e,i);x.call(this,$,e,n,i)}return!1}},p=function(t){var e=$(t.currentTarget),i=e.parent().parent(),n=L.call(this,i.attr("col-name")),a=e.children(".dropdown");if(a&&0<a.length)e.addClass("show-dropdown"),a.is(".ipt")&&a.find("input").focus().off("keydown").on("keydown",m.bind(this));else if(e.is(".sort")){var s=i.attr("opt-sort");s="desc"==s?null:"asc"==s?"desc":"asc",I.call(this,n,s)}else e.is(".filter")},f=function(t){var e=$(t.currentTarget),i=parseInt(e.attr("opt-t"))||0;i&&(clearTimeout(i),e.removeAttr("opt-t")),"mouseleave"==t.type&&(i=setTimeout(function(){if(e.removeClass("show-dropdown"),e.removeAttr("opt-t"),e.is(".filter")){var t=e.find("input");t&&0<t.length&&VRender.onInputChange(t,null)}},400),e.attr("opt-t",i))},g=function(t){var e=$(t.currentTarget),i=e.parent().parent(),n=i.parent().parent(),a=L.call(this,n.attr("col-name")),s=parseInt(i.attr("opt-t"))||0;return s&&clearTimeout(s),i.removeClass("show-dropdown").removeAttr("opt-t"),i.is(".sort")?I.call(this,a,e.is(".selected")?null:e.attr("data-type")):i.is(".filter")&&R.call(this,a,e.is(".selected")?null:e.attr("data-val")),!1},m=function(t){if(13==t.which){var e=$(t.currentTarget),i=c.parentUntil(e,"th").attr("col-name");if(i){var n=L.call(this,i);R.call(this,n,e.val()||null)}}},v=function(t){if($(t.target).is(".sort-and-filter"))return B.call(this),!1},b=function(t){var e=$(t.currentTarget),i=this.$el.children(".sort-and-filter").data("column");if(e.parent().parent().is(".sort")){var n=e.is(".selected")?null:e.attr("data-type");I.call(this,i,n)}else{var a=e.is(".selected")?null:e.attr("data-val");R.call(this,i,a)}B.call(this)},y=function(t){this.$el.children(".sort-and-filter").addClass("inputing")},_=function(t){var e=this.$el.children(".sort-and-filter"),i=e.find("input").val("");e.is(".inputing")&&setTimeout(function(){i.focus()},0)},w=function(t){var e=this.$el.children(".sort-and-filter"),i=e.data("column"),n=e.find("input").val()||null;R.call(this,i,n),B.call(this)},D=function(t){13==t.which&&this.$el.children(".sort-and-filter").find(".submitbtn").tap()},n=function(){this.t_rerender&&(clearTimeout(this.t_rerender),this.t_rerender=0),this.t_rerenderheader&&(clearTimeout(this.t_rerenderheader),this.t_rerenderheader=0),this.t_rerenderitems&&(clearTimeout(this.t_rerenderitems),this.t_rerenderitems=0);var t=this;this.t_rerender=setTimeout(function(){t.t_rerender=0,u.renderHeader.call(t,$,t.$el,t.__columns),F.call(t,!0)},0)},i=function(){if(!this.t_rerender){this.t_rerenderheader&&(clearTimeout(this.t_rerenderheader),this.t_rerenderheader=0);var t=this;this.t_rerenderheader=setTimeout(function(){t.t_rerenderheader=0,u.renderHeader.call(t,$,t.$el,t.__columns)},0)}},T=function(){if(!this.t_rerender){this.t_rerenderitems&&(clearTimeout(this.t_rerenderitems),this.t_rerenderitems=0);var t=this;this.t_rerenderitems=setTimeout(function(){t.t_rerenderitems=0,F.call(t,!0),e.call(t)},0)}},x=function(a,t,s,r){var e=a("<tr class='row-expand'></tr>").insertAfter(t),i=a("<td></td>").appendTo(e);i.attr("colspan",t.children().length);var n=a("<div class='container'></div>").appendTo(i),o=this.getExpandRenderer();if(c.isFunction(o)){var l=o(s,r);c.isNotNull(l)&&n.append(l.$el||l)}else{var d=this;(l=a("<div class='datagrid-expand'></div>").appendTo(n)).attr("cols",this.getExpandColspan()),c.each(this.__columns,function(t,e){if(c.isTrue(t.expand)){var i=a("<div></div>").appendTo(l);i.addClass("col-"+e).attr("col-name",t.name),i=a("<dl></dl>").appendTo(i),a("<dt></dt>").appendTo(i).text(t.title||t.name||"");var n=a("<dd></dd>").appendTo(i);u.renderCell.call(d,a,n,t,s,r,e),i.removeClass("col-"+e).removeAttr("col-name")}})}},e=function(){if(!this.isRenderAsApp()){var s=this;c.each(S.call(this),function(t){if(t.attr("col-name")){var e=L.call(s,t.attr("col-name"));if(e&&"enum"==e.filter){var i=t.find(".toolbar .filter"),n=u.getColumnValueSet.call(s,e),a=t.attr("opt-filter");n=n&&0<n.length?c.map(n,function(t){return{label:t,value:t}}):[{label:"无选项",value:""}],i.children(".dropdown").remove(),u.renderToolDropdown.call(s,$,i,n,a,"空")}}})}},C=function(){this.$el.children("[name='irender']").remove(),E.call(this)},I=function(t,e,i){var n=S.call(this);n.removeAttr("opt-sort"),n.find(".sort > i").css("backgroundImage",""),n.find(".sort .dropdown li").removeClass("selected");var a=t&&"custom"==t.sortable;if(t&&t.name&&c.isNotNull(e)){var s=n.filter("[col-name='"+t.name+"']");if(s&&0<s.length){s.attr("opt-sort",e);var r=u.defaultIcons[e];if(c.isArray(t.sortable)){this.isRenderAsApp()||s.find(".sort li[data-type='"+e+"']").addClass("selected");var o=c.findBy(t.sortable,"type",e)||{};r=o.icon||r,a=c.isTrue(o.custom)}r&&s.find(".sort > i").css("backgroundImage","url("+r+")")}}if(this.currentSort={column:t,type:e,fn:i,name:t&&t.name},c.isFunction(i)){var l=i;this.currentSort.fn=function(t,e,i,n){return l(e,i,n,t)}}else c.isNotNull(e)&&!a&&(this.currentSort.fn=this._getSortFunction(t,e));!c.isFunction(this.currentSort.fn)&&a||F.call(this),this.trigger("sort",t&&t.name,e)},R=function(t,e,i){var n=t&&"custom"==t.filter,a=c.isNull(e)||!1===e;if(t&&t.name){var s=S.call(this).filter("[col-name='"+t.name+"']");if(s&&0<s.length&&(s.removeAttr("opt-filter"),s.find(".filter > i").css("backgroundImage",""),s.find(".filter li").removeClass("selected"),(!a||c.isFunction(i))&&(s.attr("opt-filter",!!a||e),this.isRenderAsApp()||(s.find(".filter .dropdown").is(".ipt")?s.find(".filter input").val(a?"":e):a||s.find(".filter li[data-val='"+e+"']").addClass("selected")),c.isArray(t.filter)))){var r=c.findBy(t.filter,"value",e)||{};r.icon&&s.find(".filter > i").css("backgroundImage","url("+r.icon+")"),n=c.isTrue(r.custom)}}if(c.isFunction(i)){var o=i;i=function(t,e,i){return o(e,i,t)}}else a||n||(i=this._getFilterFunction(t,e));var l=t&&t.name||"";if(this.currentFilters)if(!a||c.isFunction(i)){var d=c.findBy(this.currentFilters,"name",l);d||(d={name:l,column:t},this.currentFilters.push(d)),d.value=e,d.fn=i}else c.removeBy(this.currentFilters,"name",l);n||F.call(this,!0),this.trigger("filter",l,e)},F=function(t){var n=this.getData(!0);if(t||!this.lastFilterDatas){var a=[].concat(n);a&&0<a.length&&(this.currentFilters||A.call(this),c.each(this.currentFilters,function(e){a=c.filter(a,function(t){return e.fn(e.column,t,e.value)})})),this.lastFilterDatas=a}if(a=this.lastFilterDatas,this.currentSort||N.call(this),this.currentSort&&c.isFunction(this.currentSort.fn)){var i=this.currentSort;a=a.slice(0).sort(function(t,e){return i.fn(i.column,t,e,i.type)})}var e=c.map(a,function(e){return c.index(n,function(t){return t==e})}),s=[],r=[];c.each(this._getItems(),function(t){if(t.is(".selected")){var e=parseInt(t.attr("opt-ind"))||0,i=n&&n[e];i&&0<=(e=c.index(a,function(t){return t==i}))&&s.push(e)}t.is(".expand")&&r.push(t.attr("opt-ind"))}),u.renderItems.call(this,$,this.$el,a,e,s),z.call(this),t&&o.item.checkIfEmpty.call(this),0<r.length&&c.each(this._getItems(),function(t){0<=r.indexOf(t.attr("opt-ind"))&&t.children(".col-exp").children(".expbtn").trigger("tap")})},N=function(){var t=c.find(S.call(this),function(t){return!!t.attr("opt-sort")});if(this.currentSort=null,t&&0<t.length){var e=t.attr("col-name"),i=t.attr("opt-sort"),n=L.call(this,e),a=this._getSortFunction(n,i);this.currentSort={name:e,column:n,type:i,fn:a}}},A=function(){var s=this.currentFilters=[],r=this;c.each(S.call(this),function(t){var e=t.attr("col-name"),i=t.attr("opt-filter");if(e&&c.isNotNull(i)&&!1!==i){var n=L.call(r,e),a=r._getFilterFunction(n,i);s.push({name:e,column:n,value:i,fn:a})}})},S=function(){return this.gridHead.children("table").children("thead").children("tr").children("th")},V=function(t,e){$("body").addClass("ui-scrollless");var i=$("<div class='sort-and-filter'></div>").appendTo(this.$el),n=$("<div class='container'></div>").appendTo(i);i.data("column",t);var a=c.isTrue(t.sortable),s=c.isTrue(t.filter);a&&k.call(this,n,t,e.attr("opt-sort")),s&&M.call(this,n,t,e.attr("opt-filter")),a||!s||"enum"==t.filter||c.isArray(t.filter)||(i.addClass("inputing"),i.find(".filter").focus()),setTimeout(function(){i.addClass("show")},0)},k=function(t,e,a){var i=$("<div class='sort'></div>").appendTo(t);i.append("<div class='title'>排序</div>");var n=e.sortable;c.isArray(n)||(n=[{label:"升序",type:"asc"},{label:"降序",type:"desc"}]);var s=$("<div class='content'></div>").appendTo(i);c.each(n,function(t){var e=$("<div class='item'></div>").appendTo(s);e.attr("data-type",t.type);var i=$("<i></i>").appendTo(e),n=t.icon||u.defaultIcons[t.type];n&&i.css("backgroundImage","url("+n+")"),$("<span></span>").appendTo(e).text(t.label||"无"),t.type==a&&e.addClass("selected")})},M=function(t,e,n){var i=$("<div class='filter'></div>").appendTo(t);i.append("<div class='title'>筛选</div>");var a=e.filter;"enum"==e.filter&&(a=(a=u.getColumnValueSet.call(this,e))&&0<a.length?c.map(a,function(t){return{label:t,value:t}}):[{label:"无选项",value:""}]);var s=$("<div class='content'></div>").appendTo(i);if(c.isArray(a))c.each(a,function(t){var e=$("<div class='item'></div>").appendTo(s);e.attr("data-val",t.value);var i=$("<i></i>").appendTo(e);t.icon&&i.css("backgroundImage","url("+t.icon+")"),$("<span></span>").appendTo(e).text(t.label||"空"),t.value==n&&e.addClass("selected")});else{var r=$("<div class='filterinput'></div>").appendTo(s);r.append("<input placeholder='请输入文本'/>"),r.append("<div class='clearbtn'></div>"),r.append("<div class='submitbtn'>确定</div>"),n&&r.children("input").val(n)}},B=function(){$("body").removeClass("ui-scrollless");var t=this.$el.children(".sort-and-filter");t.removeClass("show").removeClass("inputing"),setTimeout(function(){t.remove()},300)},E=function(){this.t_layout&&(clearTimeout(this.t_layout),this.t_layout=0);var t=this;this.t_layout=setTimeout(function(){t.t_layout=0,t._isMounted()&&(P.call(t),O.call(t),E.call(t))},50)},P=function(){if(this.isHeaderVisible()){var a=S.call(this),t=this.gridBody.children("table").children("thead").children("tr").children("th");c.each(t,function(t,e){var i=a.eq(e);if(t.is(".is-expand"))i.addClass("is-expand");else{var n=t.width();n!=parseInt(i.attr("opt-w"))&&i.attr("opt-w",n).width(n)}})}},O=function(){},z=function(){var t=this._snapshoot(),e=c.map(this._getItems(".selected"),function(t){return t.index()});if(o.select.setSelectedIndex.call(this,e),this.isMultiple()){var i=this.gridHead.find("tr");this.isAllSelected()?i.addClass("selected"):i.removeClass("selected")}t.done()},L=function(t){return c.findBy(this.__columns,"name",t)};o.register(".ui-datagrid",s)}}(),function(a){if(a||!VRender.Component.Render.scrollbox){var o=a?require(__vrender__).Utils:VRender.Utils,s=a?require("./_base"):VRender.Component.Render,t=function(t,e){s._base.call(this,t,e)};(t.prototype=new s._base).render=function(t,e){if(e.addClass("ui-scrollbox"),e.append("<div class='top'></div>"),e.append("<div class='container'></div>"),e.append("<div class='bottom'></div>"),s._base.render.call(this,t,e),r.call(this,t,e),l.call(this,t,e),d.call(this,t,e),c.call(this,t,e),a){var i=this.options||{},n=h.call(this);n&&e.attr("opt-scroll",n),(i.topDistance||0===i.topDistance)&&e.attr("opt-top",i.topDistance),(i.bottomDistance||0===i.bottomDistance)&&e.attr("opt-bottom",i.bottomDistance),s.fn.renderFunction(e,"refresh",i.refreshFunction),s.fn.renderFunction(e,"more",i.moreFunction)}return this};var r=function(t,e){e=e.children(".container");var i=this.options.content||this.options.view;i&&u(e,i)},l=function(t,e){e=e.children(".top").empty();var i=this.options||{};if(i.refreshView)u(e,this.options.refreshView);else{var n=t("<div class='scrollbox-refreshdef'></div>").appendTo(e),a=o.isNull(i.refreshPullText)?"下拉刷新":o.trimToEmpty(i.refreshPullText);a&&t("<div class='pull'></div>").appendTo(n).text(a);var s=o.isNull(i.refreshDropText)?"松开刷新":o.trimToEmpty(i.refreshDropText);s&&t("<div class='drop'></div>").appendTo(n).text(s);var r=o.isNull(i.refreshLoadText)?"正在刷新..":o.trimToEmpty(i.refreshLoadText);r&&t("<div class='load'></div>").appendTo(n).text(r)}},d=function(t,e){e=e.children(".bottom").empty();var i=t("<div class='scrollbox-load'></div>").appendTo(e);if(this.options.loadingView)u(i,this.options.loadingView);else{var n=t("<div class='scrollbox-loaddef'></div>").appendTo(i),a=this.options.loadingText;(a=o.isNull(a)?"正在加载..":o.trimToEmpty(a))&&t("<p></p>").appendTo(n).text(a)}if(i=t("<div class='scrollbox-bottom'></div>").appendTo(e),this.options.bottomView)u(i,this.options.bottomView);else{var s=t("<div class='scrollbox-bottomdef'></div>").appendTo(i),r=this.options.bottomText;(r=o.isNull(r)?"没有更多了":o.trimToEmpty(r))&&t("<p></p>").appendTo(s).text(r)}},c=function(t,e){s._item.renderEmptyView.call(this,t,e)},u=function(t,e){o.isFunction(e.render)?e.render(t):t.append(e.$el||e)},h=function(){var t=this.options.scroller;if(t){if(o.isFunction(t.getViewId))return"[vid='"+t.getViewId()+"']";if("string"==typeof t)return o.trimToNull(t)}return null};a?module.exports=t:VRender.Component.Render.scrollbox=t}}("undefined"==typeof VRender),function(){if(!VRender.Component.ScrollBox){var d=VRender.Utils,i=VRender.Component,t=i.Render,e=t.scrollbox,n=window.UIScrollBox=i.ScrollBox=function(t,e){return i.base.isElement(t)?this.init(t,e)!==this?i.get(t):void s.call(this):n.create(t)},a=n.prototype=new i.base;n.find=function(t){return i.find(t,".ui-scrollbox",n)},n.create=function(t){return i.create(t,n,e)},a.reset=function(){},a.getContentView=function(){if(!this.contentView){var t=this.$el.children(".container").children();t&&0<t.length&&(1===t.length&&(this.contentView=i.get(t)),this.contentView||(this.contentView=t))}return this.contentView},a.setContentView=function(t){c.call(this);var e=this.options.content=t;(delete this.options.view,this.contentView=null,e)&&this.$el.children(".container").empty().append(e.$el||e);l.call(this)},a.getScrollContainer=function(){return this.scroller||(this.options.hasOwnProperty("scroller")?this.scroller=this.options.scroller:this.scroller=this.$el.attr("opt-scroll"),this.$el.removeAttr("opt-scroll"),this.scroller=this.scroller?$(this.scroller):this.$el),this.scroller},a.setScrollContainer=function(t){o.call(this),this.options.scroller=t,this.scroller=null,r.call(this)},a.getRefreshFunction=function(){return t.fn.getFunction.call(this,"refreshFunction","refresh")},a.setRefreshFunction=function(t){this.options.refreshFunction=t},a.getMoreFunction=function(){return t.fn.getFunction.call(this,"moreFunction","more")},a.setMoreFunction=function(t){this.options.moreFunction=t},a.getTopDistance=function(){return d.isNull(this.topDistance)&&(this.options.hasOwnProperty("topDistance")?this.topDistance=this.options.topDistance:(this.topDistance=this.$el.attr("opt-top"),this.$el.removeAttr("opt-top")),this.topDistance||(this.topDistance=this.isRenderAsRem()?"0.5rem":"50px"),this.topDistance=d.toPx(this.topDistance)),this.topDistance},a.setTopDistance=function(t){this.options.topDistance=t,this.$el.removeAttr("opt-top"),this.topDistance=null},a.getBottomDistance=function(){return d.isNull(this.bottomDistance)&&(this.options.hasOwnProperty("bottomDistance")?this.bottomDistance=this.options.bottomDistance:(this.bottomDistance=this.$el.attr("opt-bottom"),this.$el.removeAttr("opt-bottom")),this.bottomDistance||0===this.bottomDistance||(this.bottomDistance=this.isRenderAsRem()?"0.7rem":"70px"),this.bottomDistance=d.toPx(this.bottomDistance)),this.bottomDistance},a.setBottomDistance=function(t){this.options.bottomDistance=t,this.$el.removeAttr("opt-bottom"),this.bottomDistance=null};var s=function(){r.call(this),l.call(this);var t=this;setTimeout(function(){D.call(t),x.call(t)&&t.$el.addClass("is-loading")},10)},r=function(){var t=this.getScrollContainer();t.on("scroll.scrollbox",u.bind(this)),this.isRenderAsApp()?(t.on("touchstart.scrollbox",p.bind(this)),t.on("touchend.scrollbox",p.bind(this)),t.on("touchmove.scrollbox",p.bind(this)),t.on("touchcancel.scrollbox",p.bind(this))):(t.on("mousedown.scrollbox",h.bind(this)),t.on("mouseup.scrollbox",h.bind(this)),t.on("mousemove.scrollbox",h.bind(this)),t.on("mouseleave.scrollbox",h.bind(this)))},o=function(){var t=this.getScrollContainer();t.off("scroll.scrollbox"),this.isRenderAsApp()?(t.off("touchstart.scrollbox"),t.off("touchend.scrollbox"),t.off("touchmove.scrollbox"),t.off("touchcancel.scrollbox")):(t.off("mousedown.scrollbox"),t.off("mouseup.scrollbox"),t.off("mousemove.scrollbox"),t.off("mouseleave.scrollbox"))},l=function(){var t=this.getContentView();if(t&&d.isFunction(t.on)){t.scrollbox_loaded=function(){f.call(this)}.bind(this),t.on("loaded",t.scrollbox_loaded)}},c=function(){var t=this.getContentView();t&&d.isFunction(t.off)&&t.scrollbox_loaded&&t.off("loaded",t.scrollbox_loaded)},u=function(t){var e=g.call(this,t);e.isUp&&e.bottom<=this.getBottomDistance()&&m.call(this,e)},h=function(t){return"mousedown"==t.type?v.call(this,t):"mousemove"==t.type?b.call(this,t):"mouseup"==t.type?y.call(this,t):"mouseleave"==t.type&&y.call(this,t),!1},p=function(t){return"touchstart"==t.type?v.call(this,t):"touchmove"==t.type?b.call(this,t):"touchend"==t.type?y.call(this,t):"touchcancel"==t.type&&y.call(this,t),!1},f=function(){if(this.$el.removeClass("is-loading").removeClass("is-refresh"),D.call(this),this.$el.children(".container").outerHeight()<this.$el.height()){var t=this;setTimeout(function(){m.call(t)},10)}},g=function(t){var e={offset:0,isUp:!0};e.time=Date.now();var i=this.getScrollContainer();e.scrollerHeight=i.height();var n=this.$el.children(".container");return e.containerHeight=n.height(),e.top=0-i.scrollTop(),e.bottom=e.containerHeight+e.top-e.scrollerHeight,e.isTop=0<=e.offsetTop,e.isBottom=e.offsetBottom<=0,this.lastState?(e.offset=e.top-this.lastState.top,30<e.time-this.lastState.time?(e.isUp=e.offset<0,this.lastState=e):e.isUp=this.lastState.isUp):this.lastState=e,e},m=function(t){if(!this.$el.is(".is-loading, .is-refresh, .no-more")){var e=this.$el.addClass("is-loading"),i=this,n=function(t){t||e.addClass("no-more"),e.removeClass("is-loading"),D.call(i)},a=!1,s=this.getContentView();if(s&&d.isFunction(s.more))var r=a=s.more(function(){setTimeout(function(){!1!==r&&n(!d.isFunction(s.hasMore)||s.hasMore())},0)});if(!1===a){var o=this.getMoreFunction();if(d.isFunction(o))var l=a=o(function(t){setTimeout(function(){!1!==l&&n(!t||!t.hasOwnProperty("hasMore")||d.isTrue(t.hasMore))},0)})}this.trigger("more"),!1===a&&n()}},v=function(t){if("touchstart"==t.type){if(1<t.touches.length)return;t=t.touches[0]}var e=this.dragData={};e.scroller=this.getScrollContainer(),e.startTop=e.scroller.scrollTop(),e.startX=t.pageX,e.startY=t.pageY},b=function(t){if("touchmove"==t.type&&(t=t.touches[0]),this.dragData){var e=this.dragData,i=t.pageY-e.startY;if(e.offset=i,!e.moveing)if("mousemove"==t.type){if(-10<i&&i<10)return;var n=t.pageX-e.startX;if(n<-10||10<n)return;e.moveing=!0}else{if(-20<i&&i<20)return;e.moveing=!0}if(e.moveing){var a=this.$el.is(".is-loading, .is-refresh"),s=e.startTop-i;0==s?(e.scroller.scrollTop(0),a||this.$el.children(".top").height(0)):0<s?e.scroller.scrollTop(s):(e.scroller.scrollTop(0),a||_.call(this,0-s))}}},y=function(t){if(this.dragData){var e=this.dragData;e.moveing&&e.startTop-e.offset<0&&(this.$el.is(".is-refresh")||w.call(this)),this.dragData=null}},_=function(t){this.$el.addClass("show-top");var e=this.$el.children(".top"),i=e.children();if(i&&0<i.length){var n=this.getTopDistance();if(t<=n)i.attr("state","pull");else{i.attr("state","drop");var a=(t-n-1)/(t-n+2);t=n+a*a*40}var s=Math.min(1,t/n);i.css("transform","scale("+s.toFixed(5)+")")}e.height(t)},w=function(){if(this.$el.is(".show-top")){var t=this.$el.children(".top"),e=t.children();t.addClass("animate");var i=this,n=function(){t.height(0),e.removeAttr("state"),setTimeout(function(){i.$el.removeClass("show-top"),t.removeClass("animate")},200)};e&&0<e.length?(e.css("transform",""),"drop"==e.attr("state")?(e.attr("state","load"),t.height(this.getTopDistance()),function(){if(!this.$el.is(".is-refresh, .is-loading")){var t=this.$el.addClass("is-refresh"),e=this,i=function(){t.removeClass("is-refresh"),t.removeClass("no-more"),w.call(e),D.call(e)},n=!1,a=this.getContentView();if(a&&d.isFunction(a.reload))var s=n=a.reload(1,function(){setTimeout(function(){!1!==s&&i()},0)});if(!1===n){var r=this.getRefreshFunction();if(d.isFunction(r))var o=n=r(function(){setTimeout(function(){!1!==o&&i()},0)})}this.trigger("refresh"),!1===n&&i()}}.call(this)):n()):n()}},D=function(){T.call(this)?this.$el.addClass("is-empty"):this.$el.removeClass("is-empty")},T=function(){var t=this.getContentView();return!t||(d.isFunction(t.isEmpty)?t.isEmpty():t.length<=0)},x=function(){var t=this.getContentView();if(t){if(d.isFunction(t.isLoading))return t.isLoading();if(t.$el)return t.$el.is(".is-loading");if(t instanceof $)return t.is(".is-loading")}return!1};i.register(".ui-scrollbox",n)}}(),function(s){if(s||!VRender.Component.Render.dialog){var r=s?require(__vrender__).Utils:VRender.Utils,o=s?require("./_base"):VRender.Component.Render,l=s?require("../../../ui/component/UIButton"):VRender.Component.Button,d=[{name:"cancel",label:"取消",type:"cancel"},{name:"ok",label:"确定",type:"primary"}],t=function(t,e){o._base.call(this,t,e)},e=t.prototype=new o._base;e.render=function(t,e){e.addClass("ui-dialog").css("display","none"),e.attr("opt-trans","translate"),o._base.render.call(this,t,e);var i=this.options||{};/^small|big|auto$/.test(i.size)&&e.attr("opt-size",i.size),r.isTrue(i.fill)&&e.attr("opt-fill","1"),e.attr("opt-active",r.trimToNull(this.getActiveButton()));var n=t("<div class='dialog-container'></div>").appendTo(e),a=t("<div class='dialog-view'></div>").appendTo(n);c.call(this,t,e,a),u.call(this,t,e,a),h.call(this,t,e,a)},e.getTitle=function(){var t=this.options.title;return r.isNull(t)?"标题":r.isBlank(t)?"&nbsp;":t},e.getActiveButton=function(){var t=this.options.openbtn;if(s&&t){if("string"==typeof t)return t;if(r.isFunction(t.getViewId))return"[vid='"+t.getViewId()+"']"}return null};var c=function(t,e,i){var n=t("<header></header>").appendTo(i);t("<div class='title'></div>").appendTo(n).html(this.getTitle()),n.append("<button class='closebtn'>x</button>")},u=function(t,e,i){i.append("<section></section>");var n=this.options.content||this.options.view;a.call(this,t,e,n)},h=function(t,e,i){i.append("<footer></footer>"),n.call(this,t,e,this.options.buttons)},a=function(t,e,i){var n=e.find(".dialog-view").children("section").empty();n=t("<div class='container'></div>").appendTo(n),r.isNotBlank(i)&&(r.isFunction(i.render)?i.render(n):i.$el?i.$el.appendTo(n):n.append(i))},n=function(i,t,e){t.removeClass("has-btns");var n=t.find(".dialog-view").children("footer");if(n.children(".btnbar").remove(),(e=r.toArray(e||d))&&0<e.length){t.addClass("has-btns");var a=i("<div class='btnbar'></div>").appendTo(n);a.attr("opt-len",e.length),r.each(e,function(t){var e=i("<div class='btn'></div>").appendTo(a);e.attr("name",t.name),!0===t.waitclose?e.attr("opt-wait","-1"):!t.waitclose&&0!==t.waitclose||isNaN(t.waitclose)||e.attr("opt-wait",Math.max(0,parseInt(t.waitclose))),s?new l(this.context,t).render(e):l.create(r.extend({},t,{target:e}))})}};s?module.exports=t:(t.renderContentView=a,t.renderFootButtons=n,VRender.Component.Render.dialog=t)}}("undefined"==typeof VRender),function(){if(!VRender.Component.Dialog){var o=VRender.Utils,a=VRender.Component,i=a.Render.dialog,l=[],s=window.UIDialog=a.Dialog=function(t,e){if(!a.base.isElement(t))return s.create(t);if(this.init(t,e)!==this)return a.get(t);var i=this.dialogView=this.$el.children().children();i.children("header").on("tap",".closebtn",r.bind(this)),i.children("footer").on("tap",".btnbar > .btn",d.bind(this));var n=this.$el.attr("opt-active");n&&(this.$el.removeAttr("opt-active"),(n=this.activeBtn=$(n))&&0<n.length&&n.on("tap",c.bind(this))),this.isRenderAsApp()?this.$el.on("tap",u.bind(this)):p.call(this),h.call(this)},t=s.prototype=new a.base;s.find=function(t){return a.find(t,".ui-dialog",s)},s.create=function(t){if(!(t=t||{}).target){var e=$("body").children(".ui-dialog-wrap");e&&0!=e.length||(e=$("<div class='ui-dialog-wrap'></div>").appendTo($("body"))),t.target=e}return a.create(t,s,i)},s.close=function(t,e,i){if(t.is(".ui-dialog")||(t=o.parentUntil(t,".ui-dialog")),t&&0<t.length){var n=a.get(t);n&&n instanceof s&&n.close(e,i)}},t.getTitle=function(){return this.$el.find(".dialog-view > header > .title").text()},t.setTitle=function(t){t=o.isBlank(t)?"&nbsp;":t,this.$el.find(".dialog-view > header > .title").html(t)},t.getContent=function(){var t=this._getContentView();return t&&(t=a.get(t)||t),t},t.setContent=function(t){i.renderContentView.call(this,$,this.$el,t),h.call(this)},t.setButtons=function(t){i.renderFootButtons.call(this,$,this.$el,t)},t.getSize=function(){return this.$el.attr("opt-size")||"normal"},t.setSize=function(t){/^small|big|auto$/.test(t)?this.$el.attr("opt-size",t):this.$el.removeAttr("opt-size")},t.isFill=function(){return 1==this.$el.attr("opt-fill")},t.setFill=function(t){o.isNull(t)||o.isTrue(t)?this.$el.attr("opt-fill","1"):this.$el.removeAttr("opt-fill")},t.open=function(){if(this.isopened)return this;this.isopened=!0;var t=$("body").addClass("ui-scrollless");0==t.children(".ui-dialog-mask").length&&t.append("<div class='ui-dialog-mask'></div>"),this.$el.css("display","").addClass("show-dialog"),l.push(this),this._getContentView().trigger("dialog_open");var e=this.$el.attr("opt-trans");if(e){var i=this.$el.addClass(e+"-open");setTimeout(function(){i.addClass(e+"-opened")},0),setTimeout(function(){i.removeClass(e+"-open").removeClass(e+"-opened")},300)}return this.trigger("opened"),this},t.close=function(t,n){if(this.isopened){o.isFunction(t)&&(n=t,t=!1);var e={type:"dialog_close"};if(this._getContentView().trigger(e),t||!e.isPreventDefault){this.isopened=!1;var a=this.$el.removeClass("show-dialog"),s=a.attr("opt-trans");s&&(a.addClass(s+"-close"),setTimeout(function(){a.addClass(s+"-closed")},0));var r=this;setTimeout(function(){s&&a.removeClass(s+"-close").removeClass(s+"-closed");var t=$("body").children(".ui-dialog-wrap");r.$el.parent().is(t)&&r.$el.remove();for(var e=l.length-1;0<=e;e--)l[e]===r&&l.splice(e,1);if(0==l.length){var i=$("body").removeClass("ui-scrollless").children(".ui-dialog-mask").fadeOut(200);setTimeout(function(){i.remove()},200)}o.isFunction(n)&&n()},s?200:0),this.trigger("closed")}}},t.destory=function(){var t=this;this.close(!0,function(){t.$el.remove()})},t.isOpen=function(){return!!this.isopened},t.waiting=function(t,e){var i=null;o.isNotBlank(e)&&((i=this.dialogView.children("footer").find(".btnbar > .btn[name='"+e+"']"))&&0<i.length||(i=null));var n=i&&parseInt(i.attr("opt-wait"))||0;n=o.isNull(t)||!0===t?n||-1:t?isNaN(t)?o.isTrue(t)?n||-1:0:Math.max(0,parseInt(t)):0,f.call(this,n,i)},t.setButtonValue=function(t,e){if(o.isNotBlank(t)&&o.isNotNull(e)){var i=this.dialogView.children("footer").find(".btnbar > .btn[name='"+t+"']");i&&0<i.length&&(i=a.get(i.children())).val(e)}},t._getContentView=function(){return this.dialogView.children("section").children(".container").children()},t._isTouchCloseable=function(){return!1!==this.options.touchCloseEnabled};var r=function(t){this.close()},d=function(t){var e=$(t.currentTarget);if(!e.is(".disabled, .waiting")){var i=e.attr("name")||"";i&&this._getContentView().trigger("dialog_btn_"+i,i,this);var n=!1;if(i){var a="btn_"+i;this.hasListen(a)&&(n=!0,this.trigger(a,i,this))}this.hasListen("btnclk")&&(n=!0,this.trigger("btnclk",i,this));var s=e.attr("opt-wait");if(s||0==s){if(s=parseInt(s)||0,f.call(this,s,e),0<s){var r=this;this.closeTimerId=setTimeout(function(){r.closeTimerId=0,r.close()},s)}}else n||/^ok|cancel|submit|close|save|finish$/.test(i)&&this.close(/^cancel|close$/.test(i))}},c=function(t){this._isMounted()?this.open():this.activeBtn.off("tap",arguments.callee)},n=function(){this._isMounted()?this.$el.find(".dialog-view > section > .container").css("maxHeight",$(window).height()-200):$(window).off("resize._"+this.getViewId())},u=function(t){$(t.target).is(this.$el)&&(console.log("===",this.options.touchCloseEnabled),this._isTouchCloseable()&&this.close())},h=function(){var t=this._getContentView();if(t&&0<t.length){t.off("submit_to_dialog");var i=this;t.on("submit_to_dialog",function(t,e){i.trigger("view_submit",e),i.close()})}},p=function(){var t="resize._"+this.getViewId(),e=$(window).off(t);"auto"==this.getSize()&&(e.on(t,n.bind(this)),n.call(this))},f=function(t,e){var i=e?a.get(e.children()):null;if(t){if(i?(e.addClass("waiting"),i.waiting()):this.$el.addClass("waiting"),0<t){var n=this;setTimeout(function(){f.call(n,!1,e)},t)}}else i?(e.removeClass("waiting"),i.waiting(!1)):this.$el.removeClass("waiting")};a.register(".ui-dialog",s)}}();