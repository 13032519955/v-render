!function(){if(!window.VRender){var a=window.VRender=function(){};a.ENV={},a.event_defined="vrender_defined",a.event_statepush="vrender_statepush",a.event_statereplace="vrender_statereplace",a.event_statepop="vrender_statepop",a.event_routerbefore="vrender_router_before",a.event_routerchange="vrender_router_change";var b=!1,c={},d={},e=[],f=0,g=a.Utils=function(){};window.define=function(d,e,f){if(g.isFunction(d)?(f=d,e=null,d=null):g.isArray(d)?(f=e,e=d,d=null):g.isFunction(e)&&(f=e,e=null),g.isFunction(f)){if(g.isBlank(d)&&(d=g.randomTxt(32)),i(d))return void(g.isFunction(c[d])&&c[d]($,a,g));b?h(d,f,e):(a.cacheDefine||(a.cacheDefine={}),a.cacheDefine[d]={definition:f,deps:e})}};var h=function(b,d,e){e=g.toArray(e);var f=function(){g.isFunction(d)&&(d=d($,a,g)||d),c[b]=d,a.trigger(a.event_defined,b,d)};if(e.length>0){var h=function(){return!g.find(e,function(a){return!i(a)})};h()?f():a.on(a.event_defined,function(){h()&&(a.off(a.event_defined,arguments.callee),f())})}else f()},i=function(a){return c.hasOwnProperty(a)};window.requirejs=function(b,d){if(c.hasOwnProperty(b))return g.isFunction(d)&&d(c[b]),c[b];a.on(a.event_defined,function(c,e){b===c&&(a.off(a.event_defined,arguments.callee),g.isFunction(d)&&d(e))})},a.navigate=function(b,c){if(g.isNotBlank(b)){var d={router:b,replace:!1,trigger:!0,animate:!1};c&&(d=$.extend(d,c)),a.trigger(a.event_routerbefore,d),!0!==d.isDefaultPrevented&&(g.isTrue(d.replace)?window.location.replace(b):window.location=b)}},a.require=function(a,b){g.isFunction(b)&&(g.isBlank(a)?b(!1,null):m(a,null,function(a,c,d,e){b(d,e)}))},a.fetch=function(a,b,c,d){j("GET",a,b,c,d)},a.post=function(a,b,c,d){j("POST",a,b,c,d)};var j=function(b,c,d,e,f){if(g.isFunction(d)&&(f=e,e=d,d=null),g.isFunction(e)||(e=function(){}),g.isBlank(c))return e("服务请求失败：url不能为空"),!1;if(g.isNotBlank(d)){var h={};for(var i in d)g.isNotNull(d[i])&&(h[i]=d[i]);d=h}return/^(\/|http)/.test(c)||(c="/api?n="+c,d=g.isBlank(d)?null:{data:JSON.stringify(d)},b="POST"),"GET"===b&&g.isNotBlank(d)&&(c+=(c.indexOf("?")<0?"?":"&")+$.param(d),d=null),$.ajax({type:b,cache:!1,url:c,dataType:"json",data:d,success:function(b){if(b&&b.hasOwnProperty("code"))if(0===b.code)e(!1,b.data);else{console.error(b);var c=b.hasOwnProperty("msg")?b.msg:b;!f&&g.isFunction(a.onAjaxError)&&a.onAjaxError(c||""),e(c||!0,b)}else e(!1,b)},error:function(b){var c=b.responseText||!0;if(401===b.status)c="请登录";else if(404===b.status)c="请求错误，请稍候重试..";else if(500===b.status){try{c=JSON.parse(c)}catch(b){}c="服务器错误，请重试. "+(c&&c.hasOwnProperty("msg")?c.msg:c)}!f&&g.isFunction(a.onAjaxError)&&a.onAjaxError(c,b),e(c)}})};a.load=function(a,b,c){if(g.isNull(b)&&g.isNull(c)&&(b=a,a=null),g.isFunction(b)&&(c=b,b=a,a=null),a&&"string"==typeof a&&(a=$(a)),b=g.toArray(b),0===b.length)g.isFunction(c)&&c(null);else{var d=b.length,e=[],f=function(a,b,f,h){!f&&h&&g.pushAll(e,h),(d-=1)<=0&&g.isFunction(c)&&c(e)};g.each(b,function(b){if("string"==typeof b&&(b={uri:b}),g.isBlank(b.uri))f();else{var c=b.uri.toLowerCase();/\.js$/.test(c)?k(b.uri,b.attributes,f):/\.css$/.test(c)?l(a,b.uri,b.attributes,f):m(b.uri,b.attributes,f)}})}};var k=function(b,d){$.getScript(b).done(function(a){if(g.isFunction(d)){var e=[];if(a){var f=a.match(/define\(["'][\w-]+["']\)/g);g.each(f,function(a){a=a.substring(8,a.length-1),c.hasOwnProperty(a)&&e.push(c[a])})}d(b,"js",!1,e)}}).fail(function(c){console.error("js load error",c.responseText||c),g.isFunction(a.onAjaxError)&&a.onAjaxError("js load error",c),g.isFunction(d)&&d(b,"js",c)})},l=function(a,b,c,e){var f=d[b];if(!f){var h=$("<link href='"+b+"' rel='stylesheet' type='text/css'>").appendTo("head");f=d[b]={$el:h}}c&&f.$el.attr(c),a&&(g.isArray(f.views)||(f.views=[]),f.views.push(a)),g.isFunction(e)&&e(b,"css")},m=function(b,c,d){g.isNotBlank(b)&&g.isFunction(d)?$.ajax({type:"POST",cache:!1,url:b,data:c,success:function(a){d(b,"html",!1,a)},error:function(c){console.error("html load error",c.responseText||c),g.isFunction(a.onAjaxError)&&a.onAjaxError("html load error",c),d(b,"html",c,null)}}):g.isFunction(d)&&d(b,"html",!1,null)};a.cache=function(a,b){return g.isBlank(a)?null:null===b?($.jStorage.deleteKey(a),null):(void 0!==b&&$.jStorage.set(a,b),$.jStorage.get(a))},a.trigger=function(b,c){a.emitter&&a.emitter.trigger(b,c)},a.on=function(b,c,d){!a.emitter&&a.EventEmitter&&(a.emitter=new a.EventEmitter),a.emitter&&a.emitter.on(b,c,d)},a.one=function(b,c,d){!a.emitter&&a.EventEmitter&&(a.emitter=new a.EventEmitter),a.emitter&&a.emitter.one(b,c,d)},a.off=function(b,c){a.emitter&&a.emitter.off(b,c)},a.onenter=function(a,b,c){if(g.isFunction(b)&&(c=b,b=null),a=$(a),g.isFunction(c)){var d=function(a){13===a.which&&c()};g.isBlank(b)?a.on("keydown",d):a.on("keydown",b,d)}else a.off("keydown",b)},a.onInputChange=function(a,b){var c=$(a);c.is("input, textarea")||(c=c.find("input, textarea")),c.on("focusin",function(a){var b=$(a.currentTarget),c=b.data("vrender-inputchange");c&&c.timer&&clearInterval(c.timer),c={lastValue:b.val()},c.timer=setInterval(function(){d(b,c)},100),b.data("vrender-inputchange",c)}),c.on("focusout",function(a){var b=$(a.currentTarget),c=b.data("vrender-inputchange");c&&c.timer&&clearInterval(c.timer),b.removeData("vrender-inputchange"),d(b,c)});var d=function(a,c){var d=a.val();d!=c.lastValue&&(c.lastValue=d,g.isFunction(b)&&b(a,d))}},a.scheduleTask=function(a,b){if(!g.isBlank(a)){if(g.isFunction(b)){var c=g.find(e,function(b){return b.name===a});c?c.task=b:e.push({name:a,task:b})}else g.removeItems(e,function(b){return b.name===a});0===e.length?(f&&clearInterval(f),f=0):f||(f=setInterval(function(){g.each(e,function(a){a.task()})},400))}};var n=function(){for(var a in d){var b=d[a];if(g.isArray(b.views)){for(var c=b.views.length-1;c>=0;c--)g.isDomExist(b.views[c])||b.views.splice(c,1);0===b.views.length&&(b.$el.remove(),delete d[a])}}};a.plugins={};var o=a.Component=function(){};o.bindName="vrender-component",o.registerList=[],o.dataAdapter=function(a){return a},o.errorHandler=function(a){console.error(a)},o.register=function(a,b){g.isNotBlank(a)&&g.isFunction(b)&&o.registerList.push({s:a,fun:b})},o.build=function(a){if(g.isBlank(a))return[];if(!(a=$(a))||0===a.length)return[];var b=[];return g.each(o.registerList,function(c){a.find(c.s).each(function(){var a=$(this),d=a.data(o.bindName);d||(d=new c.fun(a)),b.push(d)})}),b},o.get=function(a){return $(a).data(o.bindName)},o.find=function(a,b,c){return a=$(a),a&&0!==a.length?g.isBlank(b)?o.build(a):g.map(a.find(b),function(a){return g.isFunction(c)?new c(a):o.get(a)}):[]},o.create=function(a,b,c){a=$.extend({},a);var d=a.tagName||a.tag||"div";d=$("<"+d+"></"+d+">"),g.isNotBlank(a.id)&&d.attr("id",a.id),g.isNotBlank(a.name)&&d.attr("name",a.name),g.isNotBlank(a.clsName)&&(d.addClass(a.clsName),g.isBlank(a.name)&&d.attr("name",a.clsName)),g.isNotBlank(a.style)&&d.addClass(a.style),a.target&&d.appendTo(a.target);var e=c&&new c(a);return e&&g.isFunction(e.render)&&e.render($,d),b&&g.isFunction(b)?new b(d,a,e):d},o.load=function(b,c,d){if(g.isBlank(b))return o.errorHandler("组件试图加载数据错误：api不能为空"),!1;c=$.extend({page:1,rows:20},c),1==c.page&&(c.pageClear=!0),this.lastLoadApi=b,this.lastLoadParams=c;var e=this;a.fetch(b,c,function(a,b){a||(b=o.dataAdapter(b),g.isArray(b)&&(b={total:b.length,results:b}),e._totalSize=parseInt(b&&b.total)||0,b=b&&b.hasOwnProperty("results")?b.results:b);var f=g.isFunction(e.getPaginator)&&e.getPaginator();f&&g.isFunction(f.set)&&f.set(e._totalSize,c.page,c.rows),g.isFunction(d)&&d(a,b)})},a.$ref=function(a){var b=$("[ref='"+a+"']");return b&&b.length>0?(b.length>1&&(b=b.eq(0)),o.get(b)||b):null},window.$ref=a.$ref,$.ajaxSetup({cache:!0}),$(function(){b=!0,o.isMobile=g.getUAState(navigator.userAgent).isMobile;for(var c in a.cacheDefine){var d=a.cacheDefine[c];h(c,d.definition,d.deps)}delete a.cacheDefine,a.scheduleTask("EasyWeb.cssfilemonitor",n)})}}(),function(){VRender.ENV.isApp=!0,VRender.ENV.useRem=document.documentElement.hasAttribute("data-dpr");VRender.ENV.useRem&&function(){var a=parseInt(window.devicePixelRatio)||1;a=Math.min(a,2);var b=1/a,c=document.documentElement.clientWidth*a,d="width="+c+",initial-scale="+b+",maximum-scale="+b+",minimum-scale="+b+",user-scalable=no";$("meta[name='viewport']").attr("content",d);var e=$("html").attr("data-dpr",a);$(window).resize(function(){var b=document.documentElement.clientWidth*a,c=parseInt(e.attr("data-mw"))||640,d=100*b/c;e.css("fontSize",d+"px")}).resize()}(),$(function(){VRender.ENV.isIphone=document.body.hasAttribute("iphone")})}(),function(a){var b=a?VRender.Utils:exports;b.each=function(d,e){if(c(e))if(b.isArray(d))for(var f=0,g=d.length;f<g&&!1!==e(d[f],f);f++);else if(a&&d instanceof $)for(var f=0,g=d.length;f<g&&!1!==e(d.eq(f),f);f++);},b.filter=function(d,e){var f=[];if(c(e))if(b.isArray(d))for(var g=0,h=d.length;g<h;g++){var i=d[g];e(i,g)&&f.push(i)}else if(a&&d instanceof $)for(var g=0,h=d.length;g<h;g++){var i=d.eq(g);e(i,g)&&f.push(i)}return f},b.find=function(d,e){if(c(e))if(b.isArray(d))for(var f=0,g=d.length;f<g;f++){var h=d[f];if(e(h,f))return h}else if(a&&d instanceof $)for(var f=0,g=d.length;f<g;f++){var h=d.eq(f);if(e(h,f))return h}return null},b.index=function(d,e){if(c(e))if(b.isArray(d)){for(var f=0,g=d.length;f<g;f++)if(e(d[f],f))return f}else if(a&&d instanceof $)for(var f=0,g=d.length;f<g;f++)if(e(d.eq(f),f))return f;return-1},b.isArray=function(a){return a&&a instanceof Array},b.map=function(d,e){var f=[];if(c(e))if(b.isArray(d))for(var g=0,h=d.length;g<h;g++)f.push(e(d[g],g));else if(a&&d instanceof $)for(var g=0,h=d.length;g<h;g++)f.push(e(d.eq(g),g));return f},b.removeItems=function(a,d){if(!b.isArray(a))return null;if(!c(d))return null;for(var e=[],f=a.length-1;f>=0;f--){var g=a[f];d(g,f)&&(e.unshift(g),a.splice(f,1))}return e},b.toArray=function(a){return void 0===a||null===a||!1===a?[]:a instanceof Array?a:[a]};var c=function(a){return"function"==typeof a}}("undefined"!=typeof VRender),function(a){var b=a?VRender.Utils:exports;b.compare=function(a,b){var c=a.getTime(),d=b.getTime();return c===d?0:c<d?-1:1},b.getMinutes=function(a){if(!(a instanceof Date))return 0;var b=a.getTime();return String(b).length>13&&(b/=1e3),parseInt(b/6e4)},b.isSameDay=function(a,b){return a instanceof Date&&b instanceof Date&&(a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate())},b.isToday=function(a){return a instanceof Date&&b.isSameDay(a,new Date)},b.isTomorrow=function(a){if(a instanceof Date){var c=new Date;return c.setDate(c.getDate()+1),b.isSameDay(a,c)}return!1},b.isYesterday=function(a){if(a instanceof Date){var c=new Date;return c.setDate(c.getDate()-1),b.isSameDay(a,c)}return!1},b.toDate=function(a){if(a instanceof Date)return a;if("string"==typeof a){a=a.replace(/-/g,"/");var b=Date.parse(a);if(isNaN(b)){var c=a.indexOf(".");if(c>0){var d=parseInt(a.substr(c+1)||0);b=Date.parse(a.substr(0,c))+d}}return isNaN(b)?null:new Date(b)}return"number"==typeof a?new Date(a):null},b.toDateString=function(a,b){b=b||"yyyy-MM-dd",a=a||new Date;var c=a.getMonth()+1,d=a.getDate(),e=a.getHours(),f=a.getMinutes(),g=a.getSeconds(),h=a.getMilliseconds(),i=b.replace("yyyy",a.getFullYear());if(/M/.test(i)&&(i=i.replace(/MM/g,c<10?"0"+c:c).replace(/M/g,c)),/d/.test(i)&&(i=i.replace(/dd/g,d<10?"0"+d:d).replace(/d/g,d)),/H/.test(i)&&(i=i.replace(/HH/g,e<10?"0"+e:e).replace(/H/g,e)),/m/.test(i)&&(i=i.replace(/mm/g,f<10?"0"+f:f).replace(/m/g,f)),/s/.test(i)&&(i=i.replace(/ss/g,g<10?"0"+g:g).replace(/s/g,g)),/SSS/.test(i)&&(i=i.replace(/SSS/g,h<10?"00"+h:h<100?"0"+h:h)),/hh/.test(i)){var j=(e+12)%12;e<1?j="午夜"+j:e>=1&&e<5?j="凌晨"+j:e>=5&&e<6?j="清晨"+j:e>=6&&e<8?j="早上"+j:e>=8&&e<11?j="上午"+j:e>=11&&e<13?j="中午"+j:e>=13&&e<17?j="下午"+j:e>=17&&e<18?j="傍晚"+j:e>=18&&e<=23&&(j="晚上"+j),i=i.replace(/hh/g,j)}return i},b.toLocalDateString=function(a){if(!(a instanceof Date))return"";var c=new Date;return c.getFullYear()>a.getFullYear()?b.toDateString(a,"yyyy年MM月dd日"):b.isSameDay(a,c)?b.toDateString(a,"今天 HH:mm"):(c.setDate(c.getDate()-1),b.isSameDay(a,c)?b.toDateString(a,"昨天 HH:mm"):b.toDateString(a,"MM月dd日"))}}("undefined"!=typeof VRender),function(isFront){var StringUtils=isFront?VRender.Utils:exports;StringUtils.endWith=function(a,b){return!isEmptyStr(a)&&!isEmptyStr(b)&&(!(a.length<b.length)&&a.substring(a.length-b.length)==b)},StringUtils.format=function(text,data){for(var chars=String(text).split(""),length=chars.length,param=null,result="",i=0;i<length;i++){var ch=chars[i];if("{"===ch)if(null===param)param="";else{if(""!==param)break;result+="{",param=null}else if("}"===ch)if(null===param)result+="}";else{try{var value=eval(param);result+=value||0===value?value:""}catch(a){}param=null}else null===param?result+=ch:param+=ch}return result},StringUtils.isBlank=function(a){return a?"string"==typeof a&&0===String(a).replace(/\s+/g,"").length:"0"!==a&&0!==a&&!1!==a},StringUtils.isNotBlank=function(a){return!StringUtils.isBlank(a)},StringUtils.startWith=function(a,b){return!isEmptyStr(a)&&!isEmptyStr(b)&&(!(a.length<b.length)&&a.substr(0,b.length)===b)},StringUtils.strLen=function(a,b){return isEmptyStr(a)?0:(b&&(a=a.replace(/[\u4E00-\u9FFF]/g,"..")),a.length)},StringUtils.trimToEmpty=function(a){return StringUtils.isBlank(a)?"":(""+a).trim()},StringUtils.trimToNull=function(a){return StringUtils.isBlank(a)?null:(""+a).trim()};var isEmptyStr=function(a){return void 0===a||null===a||0===a.length}}("undefined"!=typeof VRender),function(a){var b=a?VRender.Utils:exports,c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),d=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/,e=new RegExp("^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$");b.equal=function(a,c){if(a==c)return!0;if(b.isNull(a))return b.isNull(c);if(b.isNull(c))return!1;if("object"!=typeof a||"object"!=typeof c)return a===c;if(a instanceof Array){if(c instanceof Array){if(a.length!==c.length)return!1;for(var d=0,e=a.length;d<e;d++)if(!b.equal(a[d],c[d]))return!1;return!0}return!1}return a.hasOwnProperty("id")?a.id==c.id:a.hasOwnProperty("code")?a.code==c.code:!!a.hasOwnProperty("value")&&a.value==c.value},b.exec=function(a,c,d,e,f){if(b.isFunction(a)?(e=a,f=c,a=c=d=null):a instanceof Array&&(f=e,e=d,d=c,c=a,a=null),c&&(b.isFunction(c)?(f=d,e=c,c=d=null):c instanceof Array||(f=e,e=d,d=c,c=null)),d&&b.isFunction(d)&&(f=e,e=d,d=null),a||(a=this),b.isFunction(e)||(e=function(){}),c&&0!==c.length){var g=0,h=c.length;if(f){var i=[];for(g=0;g<c.length;g++)c[g].call(a,d,function(b,c){h-=1,b&&i.push(b),h<=0&&e.call(a,i.join("")||!1,c||d)})}else{var j=function(b,f){b?e.call(a,b,d):(g+=1,g<h?c[g].call(a,f||d,j):e.call(a,!1,f||d))};c[0].call(a,d,j)}}else e.call(a,!1,d)},b.getSelection=function(){return window.getSelection?window.getSelection():document.getSelection?document.getSelection():document.selection},b.getSelectionRange=function(){var a=b.getSelection();return a&&a.createRange?a.createRange():a.getRangeAt(0)},b.getUAState=function(a){var b={ie:!1,chrome:!1,firefox:!1,opera:!1,safari:!1},c=a.toLowerCase();return/micromessenger/.test(c)?b.wx=!0:/msie ([\d.]+)/.test(c)?b.ie=!0:/firefox\/([\d.]+)/.test(c)?b.firefox=!0:/chrome\/([\d.]+)/.test(c)?b.chrome=!0:/opera.([\d.]+)/.test(c)?b.opera=!0:/safari/.test(c)&&/version\/([\d.]+)/.test(c)&&(b.safari=!0),b.isIphone=/iphone/.test(c),b.isAndroid=/android/.test(c),b.isMobile=/mobile/.test(c)||b.isIphone||b.isAndroid,b},b.isAlphaKey=function(a,b){return a.which>=65&&a.which<=90||!!(b&&a.which>=97&&a.which<=122)},b.isControlKey=function(a){return!!(a.ctrlKey||a.metaKey||a.shiftKey)||[8,37,38,39,40,116,9,17,16,13,20].indexOf(a.which)>=0},b.isDomExist=function(a){return a&&$("body").find(a).length>0},b.isEmail=function(a){return a&&d.test(""+a)},b.isEmpty=function(a){if(void 0===a)return!0;if(null===a)return!0;if(""===a)return!0;for(var b in a)return!1;return!0},b.isFunction=function(a){return a&&"function"==typeof a},b.isMobile=function(a){return a&&/^1\d{10}$/.test(""+a)},b.isNull=function(a){return void 0===a||null===a},b.isNumberKey=function(a){return!a.shiftKey&&(a.which>=48&&a.which<=57||a.which>=96&&a.which<=105)},b.isNotEmpty=function(a){return!b.isEmpty(a)},b.isNotNull=function(a){return!b.isNull(a)},b.isNumberic=function(a){return!b.isNull(a)&&("number"==typeof a||!isNaN(a))},b.isPhone=function(a){return a&&/^(0(10|2\d|[3-9]\d{2})-)?\d{7,8}(-\d{1,8})?$/.test(""+a)},b.isTrue=function(a){return!!a&&(!0===a||1===a||!("false"===(a=String(a).toLowerCase())||"no"===a||"0"===a))},b.isUrl=function(a){return a&&e.test(""+a)},b.notNull=b.isNotNull,b.parentUntil=function(a,b,c){for(var a=$(a);null!=a&&a.length>0;){if(a.is(b))return a;if(c&&a.is(c))return $("");a=a.parent()}return $("")},b.parseUrl=function(a){var b=document.createElement("a");b.href=a||"";var c={};if(c.origin=a,c.href=b.href,c.protocol=b.protocol.replace(":",""),c.host=b.host,c.hostname=b.hostname,c.port=b.port,c.pathname=b.pathname,c.search=b.search,c.hash=b.hash,c.params={},b.search)for(var d=b.search.substr(1).split("&"),e=0,f=d.length;e<f;e++){var g=d[e].split("=");c.params[g[0]]=g[1]}return c},b.randomTxt=function(a){for(var b=[],d=c,e=0;e<a;e++)b.push(d[Math.ceil(61*Math.random())]);return b.join("")},b.toLocalMobile=function(a,c){if(!b.isMobile(a))return a;var d=[];return c&&d.push("+86"),d.push(a.substr(0,3)),d.push(a.substr(3,4)),d.push(a.substr(7,4)),d.join(" ")}}("undefined"!=typeof VRender),function(){if("undefined"!=typeof VRender&&!VRender.EventEmitter){var a=VRender.Utils,b=VRender.EventEmitter=function(){},c=b.prototype=new Object;c.trigger=function(b,c){for(var d=this,e=[],f=1,g=arguments.length;f<g;f++)e.push(arguments[f]);return a.each(this.events,function(a){if(a.name===b){var c=[{type:b,data:a.data}].concat(e);a.listener.apply(d,c)}}),a.removeItems(this.events,function(a){return a.once&&a.name===b}),this},c.on=function(b,c,d){return"string"==typeof b&&a.isNotBlank(b)&&(a.isFunction(c)&&!a.isFunction(d)&&(d=c,c=null),a.isFunction(d)&&(a.isArray(this.events)||(this.events=[]),this.events.push({name:b,data:c,listener:d}))),this},c.one=function(b,c,d){return"string"==typeof b&&a.isNotBlank(b)&&(a.isFunction(c)&&!a.isFunction(d)&&(d=c,c=null),a.isFunction(d)&&(a.isArray(this.events)||(this.events=[]),this.events.push({name:b,data:c,listener:d,once:!0}))),this},c.off=function(b,c){return a.removeItems(this.events,function(d){if(d.name===b)return!a.isNotNull(c)||d.listener==c}),this},c.hasListen=function(b){return!!a.find(this.events,function(a){return a.name===b})}}}(),function(){if("undefined"!=typeof VRender&&!VRender.FrontComponent){var a=VRender.Utils,b=VRender.FrontComponent=function(a,b){this.className=a,this.ComponentClass=b},c=b.prototype=new VRender.EventEmitter;c.find=function(a,b){a=$(a),a.is(this.className)||(a=a.find(this.className));var c=[],d=this;return a.each(function(){c.push(d.make(this,b))}),c},c.create=function(b){var c=$("<div></div>");b=b||{},b.target&&(b.targetAsInstance?c=b.target:c.appendTo(b.target)),c.addClass(this.className),a.isNotBlank(b.name)&&c.attr("name",b.name).addClass(b.name),a.isFunction(this.render)&&this.render(c,b);var d=new this.ComponentClass(c,b);return c.data("mfhInstance",d),d},c.make=function(a,b){a=$(a);var c=a.data("mfhInstance");return c||(c=new this.ComponentClass(a,b),a.data("mfhInstance",c)),c},VRender.frontComponent=function(a,c,d){var e=new b(a,c);return e.render=d,e}}}(),function(a){if(!a||!VRender.Component.base){var b=a?VRender.Utils:require(__vrender__).Utils,c=function(a){if(b.isBlank(a))return null;if("string"==typeof a)return a;var c=b.isFunction(this.getIdField)?this.getIdField():this.options.idField;return b.isNotBlank(c)?a[c]:a.hasOwnProperty("id")?a.id:a.hasOwnProperty("code")?a.code:a.hasOwnProperty("value")?a.value:null},d=function(a,c){var d=b.isFunction(this.getLabelFunction)?this.getLabelFunction():this.options.labelFunction;if(b.isFunction(d))return d(a,c);if(b.isBlank(a))return"";if("string"==typeof a)return a;var e=b.isFunction(this.getLabelField)?this.getLabelField():this.options.labelField;return b.isNotBlank(e)?b.isNull(a[e])?"":a[e]:a.hasOwnProperty("label")?b.isNull(a.label)?"":a.label:a.hasOwnProperty("name")?b.isNull(a.name)?"":a.name:a.hasOwnProperty("value")?b.isNull(a.value)?"":a.value:a.hasOwnProperty("text")?b.isNull(a.text)?"":a.text:""+a},e=function(a){var c=this.options.dataMapper||this.options.mapper;if(b.isFunction(this.getDataMapper)&&(c=this.getDataMapper()),b.isFunction(c))return c(a);var d={};return b.notNull(a)&&(a.hasOwnProperty("id")&&(d["data-id"]=a.id),a.hasOwnProperty("code")&&(d["data-code"]=a.code),a.hasOwnProperty("name")&&(d["data-name"]=a.name),a.hasOwnProperty("value")&&(d["data-value"]=a.value),a.hasOwnProperty("label")&&(d["data-label"]=a.label),a.hasOwnProperty("text")&&(d["data-text"]=a.text),a.hasOwnProperty("status")&&(d["data-status"]=a.status)),d},f=function(a){var c=this.options.dataAdapter||this.options.adapter;if(b.isFunction(this.getDataAdapter)&&(c=this.getDataAdapter()),b.isFunction(c)){var d=function(a,b){return a&&a._vr_adapter_flag?a:(a=c(a,b),a&&(a._vr_adapter_flag=!0),a)};a=b.isArray(a)?b.map(a,d):d(a)}return a},g=function(a,b){b?(this.context=a,this.options=b||{}):(this.context=null,this.options=a||{})},h=g.prototype=new Object;g.render=function(b,c){this.renderData(b,c),a||g.renderFunction("adapter",this.getDataAdapter())},g.renderFunction=function(a,c,d){b.isFunction(d)&&a.write("<div class='ui-fn' name='"+c+"'>"+escape(d)+"</div>")},g.doAdapter=function(a){return f.call(this,a)},h.getData=function(){return b.isNull(this.options.data)?null:f.call(this,this.options.data)},h.getDataId=function(a){return c.call(this,a)},h.getDataLabel=function(a,b){return d.call(this,a,b)},h.getDataAdapter=function(){return this.options.dataAdapter||this.options.adapter},h.getDataMapper=function(){return this.options.dataMapper||this.options.mapper},h.getMapData=function(a){return e.call(this,a)},h.render=function(a,b){g.render.call(this,a,b)},h.renderData=function(a,b){var c=this.getMapData(this.getData());c&&b.attr(c)},h.isRenderAsApp=function(){return a?VRender.ENV.isApp:!(!this.context||!b.isFunction(this.context.isRenderAsApp))&&this.context.isRenderAsApp()},h.isRenderAsIphone=function(){return a?VRender.ENV.isIphone:!(!this.context||!b.isFunction(this.context.isRenderAsIphone))&&this.context.isRenderAsIphone()},h.isRenderAsRem=function(){if(a)return VRender.ENV.useRem;if(this.context&&b.isFunction(this.context.isRenderAsApp)&&this.context.isRenderAsApp()&&b.isFunction(this.context.getContext)){var c=this.context.getContext();return c&&b.isTrue(c.config("useREM"))}return!1};var i=function(a,b){g.call(this,a,b)},j=i.prototype=new g;if(i.render=function(a,c){g.render.call(this,a,c);var d=this.getIdField();b.isNotBlank(d)&&c.attr("opt-idfield",d);var e=this.getLabelField();b.isNotBlank(e)&&c.attr("opt-label",e),this.renderDataMapper(a,c),this.renderLabelFunction(a,c),this.renderSelectValues(a,c)},i.renderFunction=function(a,b,c){g.renderFunction(a,b,c)},j.getData=function(){return f.call(this,b.toArray(this.options.data))},j.getIdField=function(){return this.options.idField},j.getLabelField=function(){return this.options.labelField},j.getLabelFunction=function(){return this.options.labelFunction},j.getSelectedIndex=function(){return this.options.selectedIndex},j.getSelectedId=function(){return this.options.selectedId},j.getSelectedData=function(a){var c=this,d=0,e=function(f){for(var g=0,h=f.length;g<h;g++){var i=f[g];if(b.isArray(i)){if(a&&(i=e(i)))return i}else{if(c.isDataSelected(i,d))return i;d+=1}}};return e(this.getData())},j.isDataSelected=function(a,c){var d=this.getSelectedIndex();if(b.isNotBlank(d))return!(isNaN(c)||c<0)&&(b.isArray(d)?d.indexOf(c)>=0:d==c);var e=this.getSelectedId();if(b.isNotBlank(e)){var f=this.getDataId(a);return b.isArray(e)?e.indexOf(f)>=0:e==f}return!1},j.render=function(a,b){i.render.call(this,a,b)},j.renderData=function(a,b){},j.renderDataMapper=function(b,c){a||i.renderFunction(c,"mapper",this.getDataMapper())},j.renderLabelFunction=function(b,c){a||i.renderFunction(c,"lblfunc",this.getLabelFunction())},j.renderSelectValues=function(c,d){if(!a&&this.options.apiName){var e=this.getSelectedIndex();e=b.isBlank(e)?null:b.toArray(e).join(","),b.isNotBlank&&d.attr("data-tryindex",e);var f=this.getSelectedId();f=b.isBlank(f)?null:b.toArray(f).join(","),b.isNotBlank(f)&&d.attr("data-tryid",f)}},!a)return module.exports={HolderBase:g,HolderItems:i};var k=VRender.Component,l=function(a){},m=l.prototype=new VRender.EventEmitter;l.doAdapter=function(a){return f.call(this,a)},l.getFunction=function(a,b){if(this.options.hasOwnProperty(a))return this.options[a];if(this.hasOwnProperty(a))return this[a];var c=this.$el.children(".ui-fn[name='"+b+"']").text();return c&&(c=new Function("var Utils=VRender.Utils;return ("+unescape(c)+");")()),this[a]=c},m.init=function(a,b){var c=this.$el=$(a);if(c.data(k.bindName))return c.data(k.bindName);c.data(k.bindName,this),this.options=b||{},n.call(this,c,this.options);var d=this;return setTimeout(function(){o.call(d)},0),this},m.getIdField=function(){return this.options.idField||this.$el.attr("opt-idfield")},m.setIdField=function(a){this.options.idField=a||"",this.$el.attr("opt-idfield",this.options.idField)},m.getLabelField=function(){return this.options.labelField||this.$el.attr("opt-label")},m.setLabelField=function(a){this.options.labelField=a||"",this.$el.attr("opt-label",this.options.labelField)},m.getLabelFunction=function(){return l.getFunction.call(this,"labelFunction","lblfunc")},m.setLabelFunction=function(a){this.options.labelFunction=a},m.getDataAdapter=function(){return this.options.hasOwnProperty("adapter")?this.options.adapter:l.getFunction.call(this,"dataAdapter","adapter")},m.setDataAdapter=function(a){this.options.adapter=a,delete this.options.dataAdapter},m.getDataMapper=function(){return this.options.hasOwnProperty("mapper")?this.options.mapper:l.getFunction.call(this,"dataMapper","mapper")},m.setDataMapper=function(a){this.options.mapper=a,delete this.options.dataMapper},m.getItemData=function(a){var c=a.data("itemData")||a.data();return b.isEmpty(c)?null:c},m.getItemsData=function(a){return b.map(a,this.getItemData)},m.getDataId=function(a){return c.call(this,a)},m.getDataLabel=function(a,b){return d.call(this,a,b)},m.getMapData=function(a,b){return e.call(this,a,b)},m.tap=function(a,c,d,e){b.isFunction(a)&&(c,d=a,a=c=null),b.isFunction(c)&&(d=c,c=null),this.$el.on("tap",a,c,d)},m.isDataSelected=function(){return!1},m.isRenderAsApp=function(){return VRender.ENV.isApp},m.isRenderAsIphone=function(){return VRender.ENV.isIphone},m.isRenderAsRem=function(){return VRender.ENV.useRem},m.load=function(a,c,d){if(b.isBlank(a))return!1;var e=this;k.load.call(this,a,c,function(a,c){!a&&b.isFunction(e.setData)&&e.setData(c),b.isFunction(d)&&d(a,c),e.trigger("loaded")})},m.reload=function(a){b.isFunction(this.load)&&this.load(this.lastLoadApi,this.lastLoadParams,a)},m.setEnabled=function(a){void 0===a||null===a?this.setDisabled(!1):this.setDisabled(!b.isTrue(a))},m.setDisabled=function(a){void 0!==a&&null!==a||(a=!0),b.isTrue(a)?this.$el.addClass("disabled").attr("disabled","disabled"):this.$el.removeClass("disabled").removeAttr("disabled")};var n=function(a,c){b.isNotBlank(c.id)&&a.attr("id",c.id),b.isNotBlank(c.name)&&a.attr("name",c.name);var d=c.clsname||c.className||c.clsName||c.cls;b.isNotBlank(d)&&a.addClass(d),b.isNotBlank(c.style)&&a.addClass(c.style),c.hasOwnProperty("disabled")?this.setDisabled(b.isTrue(c.disabled)):c.hasOwnProperty("enabled")&&this.setDisabled(!b.isTrue(c.enabled))},o=function(){if(p.call(this)&&b.isFunction(this.load)){var a=this.options.api||this.$el.attr("api-name"),c=null;if(this.options.hasOwnProperty("params"))c=this.options.params;else try{c=JSON.parse(this.$el.attr("api-params")||null)}catch(a){}c=$.extend({},c);var d=b.isFunction(this.getPaginator)&&this.getPaginator();d&&(b.isFunction(d.getPageNo)&&(c.page=d.getPageNo()),b.isFunction(d.getPageSize)&&(c.rows=d.getPageSize()));var e=b.isFunction(this.getSearcher)&&this.getSearcher();e&&b.isFunction(e.getParams)&&(c=$.extend(c,e.getParams()));var f=this;this.load(a,c,function(){q.call(f)})}},p=function(){return this.options.hasOwnProperty("autoLoad")?b.isTrue(this.options.autoLoad):b.isTrue(this.$el.attr("api-autoload"))},q=function(){var a=this,c=function(c){b.isFunction(a.setSelectedIndex)&&c&&(c=c.split(","),a.setSelectedIndex(c.length>1?c:c[0]))},d=function(c){b.isFunction(a.setSelectedId)&&c&&(c=c.split(","),a.setSelectedId(c.length>1?c:c[0]))};this.options.hasOwnProperty("selectedIndex")?c(this.options.selectedIndex):b.isNotBlank(this.$el.attr("data-tryindex"))?c(this.$el.attr("data-tryindex")):this.options.hasOwnProperty("selectedId")?d(this.options.selectedId):b.isNotBlank(this.$el.attr("data-tryid"))&&d(this.$el.attr("data-tryid")),delete this.options.selectedIndex,delete this.options.selectedId,this.$el.removeAttr("data-tryindex"),this.$el.removeAttr("data-tryid")};k.base=l,k.HolderBase=g,k.HolderItems=i}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Button){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=function(a,b){c.call(this,a,b)},e=d.prototype=new c;if(d.innerStyles=["ui-btn-default","ui-btn-primary","ui-btn-success","ui-btn-danger","ui-btn-warn","ui-btn-info","ui-btn-link","ui-btn-text"],d.sizes=["bigger","big","normal","small","tiny"],d.getTypeStyle=function(a){if(b.isNotBlank(a)){if(["ok","submit","save","primary","major"].indexOf(a)>=0)return"ui-btn-primary";if(["danger","error"].indexOf(a)>=0)return"ui-btn-danger";if(["success","complete","finish"].indexOf(a)>=0)return"ui-btn-success";if(["warn","warning"].indexOf(a)>=0)return"ui-btn-warn";if(["info","highlight"].indexOf(a)>=0)return"ui-btn-info";if("text"===a)return"ui-btn-text";if("link"===a)return"ui-btn-link"}return"ui-btn-default"},e.render=function(a,e){c.render.call(this,a,e),e.addClass("ui-btn");var f=this.options||{},g=f.size;g&&d.sizes.indexOf(g)>=0&&e.addClass(g);var h=f.style||d.getTypeStyle(f.type);b.isNotBlank(h)&&e.addClass(d.innerStyles.indexOf(h)<0?"ui-btn-default":h);var i=a("<button class='btn'></button>").appendTo(e);return b.isNotBlank(f.icon)&&i.append("<img class='icon' src='"+f.icon+"'/>"),b.isNotBlank(f.label)&&i.append("<span class='lbl'>"+b.trimToEmpty(f.label)+"</span>"),this},!a)return module.exports=d;var f=VRender.Component,g=window.UIButton=f.Button=function(a,b){if(this.init(a,b)!==this)return f.get(a)};g.prototype=new f.base;g.find=function(a){return f.find(a,".ui-btn",g)},g.create=function(a){return f.create(a,g,d)},f.register(".ui-btn",g)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Checkbox){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=function(a,b){c.call(this,a,b)};if((d.prototype=new c).render=function(a,d){c.render.call(this,a,d),d.addClass("ui-chkbox");var e=this.options||{},f=a("<input type='checkbox'/>").appendTo(d);return b.isNotNull(e.value)&&f.val(e.value),b.isTrue(e.checked)&&(d.addClass("checked"),f.attr("checked","checked")),b.isNotNull(e.label)&&d.append("<span>"+e.label+"</span>"),f.attr("name",e.name),this},!a)return module.exports=d;var e=VRender.Component,f=window.UICheckbox=e.Checkbox=function(a,b){if(this.init(a,b)!==this)return e.get(a);this.input=this.$el.children("input"),this.input.on("change",h.bind(this))},g=f.prototype=new e.base;f.find=function(a){return e.find(a,".ui-chkbox",f)},f.create=function(a){return a=$.extend({},a,{tagName:"label"}),e.create(a,f,d)},g.val=function(a){return b.isNull(a)?this.input.val():(this.input.val(a),this)},g.isChecked=function(){return this.input.is(":checked")},g.setChecked=function(a){var c=!!b.isNull(a)||b.isTrue(a);this.input[0].checked=c,
this.input.trigger("change")};var h=function(a){$(a.currentTarget).is(":checked")?this.$el.addClass("checked"):this.$el.removeClass("checked")};e.register(".ui-chkbox",f)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Combobox){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderItems,d=function(a){return b.isBlank(a)?null:isNaN(a)?a:a+"px"},e=function(a,b){c.call(this,a,b)},f=e.prototype=new c;f.render=function(a,b){return c.render.call(this,a,b),b.addClass("ui-combobox"),b.css("width",d(this.options.width)),g.call(this,a,b),h.call(this,a,b),this},f.getLabelFunction=function(){return null},f.getDataAdapter=function(){return null},f.getDataMapper=function(){return null};var g=function(a,c){var d=a("<div class='ipt'></div>").appendTo(c),e=a("<input type='text'/>").appendTo(d),f=this.getSelectedData(!0);b.isNotNull(f)&&(c.addClass("has-val"),e.val(this.getDataLabel(f))),b.isTrue(this.options.editable)?c.addClass("editable"):e.attr("readonly","readonly"),c.is(".disabled")&&e.attr("disabled","disabled"),d.append("<button class='dropdownbtn'></button>"),d.append("<span class='prompt'>"+b.trimToEmpty(this.options.prompt)+"</span>")},h=function(c,d){var e={apiName:null};if(a){var f=c.extend({},this.options,{target:d},e);VRender.Component.DropdownList.create(f)}else{var f=b.extend({},this.options,e);new(require("../../../ui/component/UIDropdownList"))(this.context,f).render(d)}};if(!a)return module.exports=e;var i=VRender.Component,j=window.UICombobox=i.Combobox=function(a,b){if(this.init(a,b)!==this)return i.get(a);this.dropdownList=new i.DropdownList(this.$el.children(".ui-dropdownlist")),this.tap(".ipt",l.bind(this)),this.dropdownList.on("change",o.bind(this)),this.$el.is(".editable")&&(this.$el.on("keydown","input",p.bind(this)),this.$el.on("keyup","input",p.bind(this)),this.$el.on("focusin","input",q.bind(this)),this.$el.on("foucsout","input",q.bind(this)))},k=j.prototype=new i.base;j.find=function(a){return i.find(a,".ui-combobox",j)},j.create=function(a){return i.create(a,j,e)},k.setData=function(a){this.dropdownList.setData(a),r.call(this,!1,-1,"")},k.getSelectedIndex=function(){return this.dropdownList.getSelectedIndex()},k.setSelectedIndex=function(a,b){this.dropdownList.setSelectedIndex(a),a=this.dropdownList.getSelectedIndex(),r.call(this,b,a,"")},k.getSelectedId=function(){return this.dropdownList.getSelectedId()},k.setSelectedId=function(a,b){this.dropdownList.setSelectedId(a),index=this.dropdownList.getSelectedIndex(),r.call(this,b,index,"")},k.getSelectedData=function(){return this.dropdownList.getSelectedData()},k.val=function(a){if(b.isBlank(a))return this.$el.find(".ipt > input").val();var c=this.dropdownList.matchFirst(a),d=c?c[0]:-1;this.setSelectedIndex(d,!1)},k.setDisabled=function(a){void 0!==a&&null!==a||(a=!0),b.isTrue(a)?(this.$el.addClass("disabled").attr("disabled","disabled"),this.$el.find(".ipt > input").attr("disabled","disabled")):(this.$el.removeClass("disabled").removeAttr("disabled"),this.$el.find(".ipt > input").removeAttr("disabled"))};var l=function(a){var b=this,c=$(a.target);if(this.isRenderAsApp()){if(this.$el.is(".editable")&&!c.is(".dropdownbtn"))return;setTimeout(function(){b.focusOutTimerId&&(clearTimeout(b.focusOutTimerId),b.focusOutTimerId=0)},100)}else this.$el.is(".editable")&&c.is(".dropdownbtn")&&this.$el.find(".ipt > input").focus();u.call(this),s.call(this)},m=function(a){if("mouseenter"===a.type){var b=parseInt(this.$el.attr("timerid"));b&&(clearTimeout(b),this.$el.removeAttr("timerid"))}else if(t.call(this)){var c=this,b=setTimeout(function(){v.call(c)},500);this.$el.attr("timerid",b)}},n=function(a){if(this.isRenderAsIphone()){if(this.$el.is(a.target)||this.$el.find(a.target).length>0)return;v.call(this)}else $(a.target).is(".ui-dropdownlist")&&v.call(this)},o=function(a,b){var c=this.dropdownList.getSelectedIndex();if(r.call(this,!0,c,""),!this.isRenderAsIphone()){var d=this;setTimeout(function(){v.call(d)},100)}},p=function(a){var b=$(a.currentTarget);if("keydown"===a.type)this.isRenderAsApp()||(u.call(this),this.$el.off("mouseenter"),this.$el.off("mouseleave"));else if("keyup"===a.type){var c=b.val();if(13===a.which){var d=this.dropdownList.getSelectedIndex();d!=this._lastSelectedIndex&&(this._lastSelectedIndex=d,r.call(this,!0,d,null),v.call(this))}else if(38===a.which||40===a.which){var d=this.dropdownList.getSelectedIndex();38===a.which&&d>0&&(d-=1),40===a.which&&d<this.dropdownList.length()-1&&(d+=1),this.dropdownList.setSelectedIndex(d),r.call(this,!1,d,null)}else{c&&c.length>0?this.$el.addClass("has-val"):this.$el.removeClass("has-val");var e=this.dropdownList.matchFirst(c,!0);this.dropdownList.setSelectedIndex(e?e[0]:-1)}}},q=function(a){var b=$(a.currentTarget);if("focusin"===a.type)this.focusOutTimerId||(this._lastSelectedIndex=this.dropdownList.getSelectedIndex());else if("focusout"===a.type&&t.call(this)){var c=this;this.focusOutTimerId=setTimeout(function(){c.focusOutTimerId=0,v.call(c);var a=c.dropdownList.getSelectedIndex();a>=0&&c.dropdownList.getItemLabel(a)!=b.val()&&(a=-1,c.dropdownList.setSelectedIndex(-1)),c._lastSelectedIndex!=a&&r.call(c,!0,a,null)},250)}},r=function(a,c,d){var e=this.$el.find(".ipt > input");if(c>=0?e.val(d||this.dropdownList.getItemLabel(c)):(d||""===d)&&e.val(d),b.isBlank(e.val())?this.$el.removeClass("has-val"):this.$el.addClass("has-val"),b.isTrue(a)){var f=this.dropdownList.getSelectedData(c);this.trigger("change",f)}},s=function(){var a=this.$el.children(".ui-dropdownlist");if(this.isRenderAsIphone()){a=a.children("ul");var c=b.index(a.find(".item"),function(a){return a.is(".selected")});if(c>=0){var d=a.innerHeight()/5;a.scrollTop(d*(c+1))}else a.scrollTop(0)}else{this.isRenderAsApp()&&(a=a.children("ul"));var e=a.find(".item.selected");if(e&&e.length>0){var f=a.offset().top,g=a.innerHeight(),h=e.offset().top,d=e.innerHeight(),i=a.scrollTop();f>h?a.scrollTop(i-(f-h)):h>f+g&&a.scrollTop(i+(h-f-g+d))}}},t=function(){return this.$el.is(".show-dropdown")},u=function(){if(!this.$el.is(".show-dropdown")){this.focusOutTimerId&&(clearTimeout(this.focusOutTimerId),this.focusOutTimerId=0),this.$el.addClass("show-dropdown").removeClass("show-before");var a=this,b=this.$el.children(".ui-dropdownlist");if(this.isRenderAsApp())setTimeout(function(){$("body").on("tap.combobox",function(b){n.call(a,b)})},50);else{$(window).height()+$("body").scrollTop()<b.offset().top+b.height()&&this.$el.addClass("show-before"),this.$el.on("mouseenter",function(b){return m.call(a,b)}),this.$el.on("mouseleave",function(b){return m.call(a,b)})}}},v=function(){this.$el.is(".show-dropdown")&&(this.$el.removeClass("show-dropdown"),this.$el.off("mouseenter").off("mouseleave"),$("body").off("tap.combobox"))};i.register(".ui-combobox",j)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Datagrid){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderItems,d={date:"yyyy-MM-dd",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss"},e=function(a,c){return a==c||(b.isNull(a)?b.isNull(c):!b.isNull(c)&&this.getDataId(a)==this.getDataId(c))},f=function(a,c,e){if(b.isBlank(c))return null;if(b.isBlank(a.name))return""+c;var f=c[a.name];if(a.format&&b.isNotBlank(f)){var g=a.type;if("localtime"===g)f=b.toLocalDateString(b.toDate(f));else if(/^date|datetime|time$/.test(g))(f=b.toDate(f))&&(f=b.toDateString(f,d[g]));else if("money"===g)f=parseFloat(f),isNaN(f)?f=null:(f=f.toFixed(2).split("."),f="<span class='val'>￥<span class='v1'>"+f[0]+"</span>.<span class='v2'>"+f[1]+"</span></span>");else if("number"===g||"num"===g)if(f=parseFloat(f),isNaN(f))f=null;else{var h=parseFloat(a.decimals);(isNaN(h)||h<0)&&(h=0),f=f.toFixed(h)}}return f},g=function(a,b){c.call(this,a,b)},h=g.prototype=new c;h.render=function(a,b){c.render.call(this,a,b),b.addClass("ui-datagrid"),this.isChkboxVisible()&&b.addClass("show-chk"),this.isMultiSelected()&&b.addClass("multiple"),this.isHeaderVisible()||b.addClass("no-head");var d=a("<table></table>").appendTo(b);return i.call(this,a,b,d),j.call(this,a,b,d),k.call(this,a,b),l.call(this,a,b),this},h.getColumns=function(){return b.toArray(this.options.columns)},h.isChkboxVisible=function(){return this.options.hasOwnProperty("showCheckbox")?b.isTrue(this.options.showCheckbox):b.isTrue(this.options.chkbox)},h.isMultiSelected=function(){return this.options.hasOwnProperty("multiple")?b.isTrue(this.options.multiple):b.isTrue(this.options.multi)},h.getSelectedIndex=function(){var a=this.options||{};return a.hasOwnProperty("selectedIndexs")?b.isBlank(a.selectedIndexs)?null:b.toArray(a.selectedIndexs):b.isNotBlank(a.selectedIndex)?b.toArray(a.selectedIndex):null},h.getSelectedId=function(){var a=this.options||{};return a.hasOwnProperty("selectedIds")?b.isBlank(a.selectedIds)?null:b.toArray(a.selectedIds):b.isNotBlank(a.selectedId)?b.toArray(a.selectedId):null},h.getSelectedItems=function(){var a=this.options||{};return a.hasOwnProperty("selectedItems")?b.isBlank(a.selectedItems)?null:b.toArray(a.selectedItems):b.isNotBlank(a.selectedItem)?b.toArray(a.selectedItem):null},h.isHeaderVisible=function(){return!!b.isBlank(this.options.showHeader)||b.isTrue(this.options.showHeader)},h.getColumnRenderer=function(){return this.options.renderer||this.options.columnRenderer},h.getRowStyleFunction=function(){return this.options.rowStyleFunction||this.options.styleFunction},h.isAllSelected=function(){for(var a=this.getData(),b=0,c=a.length;b<c;b++)if(!this.isDataSelected(a[b],b))return!1;return a.length>0},h.isDataSelected=function(a,c){var d=this.getSelectedItems();if(d){var f=this;return b.index(d,function(b){return e.call(f,a,b)})>=0}var g=this.getSelectedId();if(g){var h=this.getDataId(a);return b.index(g,function(a){return a==h})>=0}var i=this.getSelectedIndex();return!!i&&b.index(i,function(a){return a==c})>=0};var i=function(a,c,d){var e=a("<thead></thead>").appendTo(d),f=a("<tr></tr>").appendTo(e);this.isChkboxVisible()&&(f.append("<td class='col-type-chk'><span class='chkbox'></span></td>"),this.isAllSelected()&&f.addClass("selected")),b.each(this.getColumns(),function(c,d){var e=a("<td>"+(c.title||c.name)+"</td>").appendTo(f);e.addClass("col-"+(d+1)),b.isNotBlank(c.name)&&e.addClass("col-"+c.name).attr("data-name",c.name),b.isNotBlank(c.type)&&e.addClass("col-type-"+c.type).attr("data-type",c.type),b.isTrue(c.format)&&e.attr("data-format",1)})},j=function(a,c,d){var e=a("<tbody></tbody>").appendTo(d),f=this,g=this.getData(),h=this.getColumns();b.each(g,function(b,c){var d=a("<tr class='row-item'></tr>").appendTo(e);m.call(f,a,d,h,b,c)}),g&&0!==g.length||c.addClass("no-data")},k=function(c,d){var e=this.options.empty;b.isNotBlank(e)&&(d=c("<div class='datagrid-emp'></div>").appendTo(d),"string"==typeof e?a?d.append(e):d.write(e):a&&e instanceof VRender.Component.base?e.$el&&e.$el.appendTo(d):b.isFunction(e.render)?e.render(d):d.text(e))},l=function(d,e){if(!a){c.renderFunction(e,"renderer",this.getColumnRenderer()),c.renderFunction(e,"stylefn",this.getRowStyleFunction());var f=this.options.pager||this.options.paginator;f&&b.isFunction(f.getViewId)&&e.attr("data-pager",f.getViewId())}},m=function(a,c,d,e,f){n.call(this,c,e,f),this.isChkboxVisible()&&c.append("<td class='col-type-chk'><span class='chkbox'></span></td>"),this.isDataSelected(e,f)&&c.addClass("selected");var g=this;b.each(d,function(b,d){var f=a("<td></td>").appendTo(c);o.call(g,a,f,b,e,d)});var h=e.__rowstyle__,i=this.getRowStyleFunction();b.isFunction(i)&&(h=i(e,f)),b.isNotBlank(h)&&c.addClass(h)},n=function(c,d,e){var f=this.getMapData(d)||{id:this.getDataId(d)};for(var g in f)b.isNotBlank(f[g])&&c.attr("data-"+g,f[g]);a&&c.data("itemData",d)},o=function(c,d,e,g,h){d.addClass("col-"+(h+1)),b.isNotBlank(e.name)&&d.addClass("col-"+e.name);var i=null,j=this.getColumnRenderer();b.isFunction(j)&&(i=j(e.name,g,h,e)),b.isNull(i)&&(i=f.call(this,e,g,h)),i=b.isBlank(i)?"&nbsp;":i,a?d.html(i):d.write(i)};if(!a)return module.exports=g;var p=VRender.Component,q=window.UIDatagrid=p.Datagrid=function(a,c){if(this.init(a,c)!==this)return p.get(a);var d=this.columns=b.toArray(this.options.columns);0===d.length&&b.each(this.$el.find("thead td"),function(a,b){a.is(".col-type-chk")||d.push(a.data())}),v.call(this);var e=this;this.tap(".row-item",function(a){return s.call(e,a)}),this.tap(".chkbox",function(a){return t.call(e,a)}),this.tap("td.col-op > a",function(a){return u.call(e,a)})},r=q.prototype=new p.base;q.find=function(a){return p.find(a,".ui-datagrid",q)},q.create=function(a){return p.create(a,q,g)},r.getData=function(){var a=this;return b.map(w.call(this),function(b){return a.getItemData(b)})},r.setData=function(a){var c=this,d=this.$el.children("table").children("tbody").empty();b.each(b.toArray(a),function(a,b){c.addItem(a,null,d)}),z.call(this)},r.getRowData=function(a){return b.isNotBlank(a)&&(a=$(a),a.length>0&&(a.is("tr")||(a=b.parentUntil(a,"tr",this.$el))),a.length>0)?this.getItemData(a):null},r.getSelectedIndex=function(){var a=[];return b.each(w.call(this),function(b,c){b.is(".selected")&&a.push(c)}),a},r.setSelectedIndex=function(a,c){var d=b.map(b.toArray(a),function(a){return parseInt(a)});b.each(w.call(this),function(a,b){d.indexOf(b)>=0?a.addClass("selected"):a.removeClass("selected")}),c&&this.trigger("itemselectchange")},r.getSelectedId=function(){var a=this;return b.map(w.call(this,".selected"),function(b,c){return a.getDataId(a.getItemData(b))})},r.setSelectedId=function(a,c){var d=this,e=b.toArray(a);b.each(w.call(this),function(a,c){var f=d.getDataId(d.getItemData(a));b.index(e,function(a){return a==f})>=0?a.addClass("selected"):a.removeClass("selected")}),c&&this.trigger("itemselectchange")},r.getSelectedItems=function(){var a=this;return b.map(w.call(this,".selected"),function(b,c){return a.getItemData(b)})},r.setSelectedItems=function(a,c){var d=this,f=b.toArray(a);b.each(w.call(this),function(a,c){var g=d.getItemData(a);b.index(f,function(a){return e(a,g)})>=0?a.addClass("selected"):a.removeClass("selected")}),c&&this.trigger("itemselectchange")},r.isAllSelected=function(){return 0===w.call(this).not(".selected").length},r.isChkboxVisible=function(){return this.$el.is(".show-chk")},r.isMultiSelected=function(){return this.$el.is(".multiple")},r.setEmptyView=function(a){this.options.empty=a,this.$el.children(".datagrid-emp").remove(),k.call(this,$,this.$el)},r.isRowSelectable=function(){return!!b.isNull(this.options.rowSelectable)||b.isTrue(this.options.rowSelectable)},r.setRowSelectable=function(a){this.options.rowSelectable=a},r.getItemIndex=function(a){var c=this;return a=p.base.doAdapter.call(this,a),b.index(w.call(this),function(b,d){var f=c.getItemData(b);return e(a,f)})},r.getColumnName=function(a){return a=parseInt(a),a>=0&&a<this.columns.length?this.columns[a].name:null},r.addItem=function(a,b,c){c=c||this.$el.children("table").children("tbody"),a=p.base.doAdapter.call(this,a);var d=$("<tr class='row-item'></tr>").appendTo(c);if(m.call(this,$,d,this.columns,a,b),b=parseInt(b),!isNaN(b)&&b>=0){var e=w.call(this,null,c);b<e.length-1&&e.eq(b).before(d.detach())}return this.$el.removeClass("no-data"),A.call(this),d},r.updateItem=function(a,b){if(b=parseInt(b),a=p.base.doAdapter.call(this,a),isNaN(b)&&(b=this.getItemIndex(a)),!isNaN(b)&&b>=0){if(b<w.call(this).length){var c=this.removeItemAt(b),d=this.addItem(a,b);return c.is(".selected")&&d.addClass("selected"),[d,c]}}return null},r.removeItem=function(a){var b=w.call(this);a=p.base.doAdapter.call(this,a);for(var c=0,d=b.length;c<d;c++){var f=b.eq(c);if(e(a,this.getItemData(f)))return f.remove(),z.call(this),A.call(this),f}return null},r.removeItemAt=function(a){if(a=parseInt(a),!isNaN(a)&&a>=0){var b=w.call(this).eq(a).remove();if(b&&b.length>0)return z.call(this),A.call(this),b}return null},r.addOrUpdateItem=function(a){a=p.base.doAdapter.call(this,a);var b=this.getItemIndex(a);b>=0?this.updateItem(a,b):this.addItem(a)},r.reRender=function(){this.renderTimerId&&clearTimeout(this.renderTimerId);var a=this;this.renderTimerId=setTimeout(function(){a.setData(a.getData()),delete a.renderTimerId},0)},r.isDataSelected=function(){var a=this;return!!b.find(w.call(this,".selected"),function(b){return e.call(a,data,a.getItemData(b))})},r.getRowDataMap=function(){return x.call(this,"dataMapper","mapper")},r.setRowDataMap=function(a){this.dataMapper=a,delete this.options.dataMapper,this.reRender()},r.getColumnRenderer=function(){return this.options.hasOwnProperty("renderer")?this.options.renderer:x.call(this,"columnRenderer","renderer")},r.setColumnRenderer=function(a){this.columnRenderer=a,delete this.options.columnRenderer,delete this.options.renderer,this.reRender()},r.getRowStyleFunction=function(){return x.call(this,"styleFunction","stylefn")},r.setRowStyleFunction=function(a){this.styleFunction=a,delete this.options.styleFunction,this.reRender()},r.getPaginator=function(){return this._pager},r.setPaginator=function(a){if(this._pager&&this._pager.off("onpage"),this._pager=a,this._pager){var b=this;this._pager.on("onpage",function(a,c,d){var e=$.extend({},b.lastLoadParams,{page:c,size:d});b.load(b.lastLoadApi,e)})}};var s=function(a){var c=$(a.currentTarget),d=b.parentUntil(a.target,"td","tr"),e=!1;if(this.isRowSelectable()){var f=c.addClass("selected").siblings(".selected");f.length>0&&(f.removeClass("selected"),e=!0);var g=this.$el.children("table").children("thead").children("tr");y(g,this.isAllSelected())}this.trigger("itemclick",this.getItemData(c),c.index(),d.index()),e&&this.trigger("itemselectchange")},t=function(a){var b=$(a.currentTarget),c=b.parent().parent().toggleClass("selected");if(c.parent().is("thead"))y(w.call(this),c.is(".selected"));else if(this.isMultiSelected()){var d=this.$el.children("table").children("thead").children("tr");y(d,this.isAllSelected())}else c.siblings().removeClass("selected");return this.trigger("itemselectchange"),!1},u=function(a){var b=$(a.currentTarget),c=b.parent().parent(),d=this.getItemData(c),e=b.attr("name")||b.data("name")||"";this.trigger("oper",e,d,c)},v=function(){var a=this.$el.attr("data-pager");(a=b.isBlank(a)?null:$("[vid='"+a+"']"))&&a.length>0&&(a.is(".ui-paginator")&&(a=new p.Paginator(a)),this.setPaginator(a))},w=function(a,c){c=c||this.$el.children("table").children("tbody");var d=c.children(".row-item");return b.isBlank(a)?d:d.filter(a)},x=function(a,b){if(this.options.hasOwnProperty(a))return this.options[a];if(this.hasOwnProperty(a))return this[a];var c=this.$el.children(".ui-fn[name='"+b+"']").text();return c&&(c=new Function("var Utils=VRender.Utils;return ("+unescape(c)+");")()),this[a]=c},y=function(a,b){b?a.addClass("selected"):a.removeClass("selected")},z=function(){var a=w.call(this);a&&a.length>0?this.$el.removeClass("no-data"):this.$el.addClass("no-data")},A=function(){var a=this.$el.children("table").children("thead").children("tr");y(a,this.isAllSelected())};p.register(".ui-datagrid",q)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.DateInput){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=function(a,c){return b.isFunction(c)?c(a):(b.isBlank(c)&&(c="yyyy-MM-dd"),b.toDateString(a,c))},e=function(a,b){c.call(this,a,b)},f=e.prototype=new c;if(f.render=function(e,f){c.render.call(this,e,f),f.addClass("ui-dateipt");var g=e("<div class='ipt'></div>").appendTo(f),h=e("<input type='text' readonly='readonly'/>").appendTo(g);g.append("<span class='clear'></span>");var i=this.getDateFormat();!a&&i&&(b.isFunction(i)?f.write("<div class='format format-fn'>"+escape(i)+"</div>"):f.write("<div class='format'>"+i+"</div>"));var j=this.getDate();j&&(f.attr("data-dt",b.toDateString(j,"yyyy/MM/dd")),h.val(d(j,i)),f.addClass("has-val")),h.attr("placeholder",this.options.prompt||"");var k=b.toDate(this.options.min);k&&f.attr("data-min",b.toDateString(k,"yyyy/MM/dd"));var l=b.toDate(this.options.max);return l&&f.attr("data-max",b.toDateString(l,"yyyy/MM/dd")),b.isTrue(this.options.native)&&f.attr("data-native","1"),this},f.getDate=function(){return this.options.hasOwnProperty("date")?b.toDate(this.options.date):new Date},f.getDateFormat=function(){return this.options.format||this.options.dateFormat},!a)return module.exports=e;var g=VRender.Component,h=window.UIDateInput=g.DateInput=function(a,c){if(this.init(a,c)!==this)return g.get(a);if(b.isTrue(this.options.native)&&this.$el.attr("data-native","1"),this.input=this.$el.find(".ipt > input"),this.tap(".ipt",j.bind(this)),this.tap(".ipt > .clear",k.bind(this)),this.isRenderAsApp()){if(this.isNative()){var d=$("<input class='origin-dateipt' type='date'/>").appendTo(this.$el.children(".ipt"));d.on("change",p.bind(this))}}else this.$el.on("mouseenter",l.bind(this)),this.$el.on("mouseleave",l.bind(this))},i=h.prototype=new g.base;h.find=function(a){return g.find(a,".ui-dateipt",h)},h.create=function(a){return g.create(a,h,e)},i.getDate=function(){return b.toDate(this.$el.attr("data-dt"))},i.setDate=function(a,c){var d=b.toDate(a);q.call(this,d),this.picker&&this.picker.setDate(d);var e=this.$el.find(".origin-dateipt");e&&e.length>0&&e.val(d||""),c&&this.trigger("change",d)},i.getMinDate=function(){return b.toDate(this.$el.attr("data-min"))},i.setMinDate=function(a){var c=b.toDate(a);this.$el.attr("data-min",b.toDateString(c,"yyyy/MM/dd")),this.picker&&this.picker.setMinDate(c)},i.getMaxDate=function(){return b.toDate(this.$el.attr("data-max"))},i.setMaxDate=function(a){var c=b.toDate(a);this.$el.attr("data-max",b.toDateString(c,"yyyy/MM/dd")),this.picker&&this.picker.setMaxDate(c)},i.getDateFormat=function(){if(this.hasOwnProperty("_dateFormat"))return this._dateFormat;if(this.options.hasOwnProperty("format"))return this.options.format;if(this.options.hasOwnProperty("dateFormat"))return this.options.dateFormat;var a=this.$el.children(".format").text();return a&&this.$el.children(".format-fn").length>0&&(a=new Function("var Utils=VRender.Utils;return ("+unescape(a)+");")()),this.$el.children(".format").remove(),this._dateFormat=a},i.setDateFormat=function(a){this._dateFormat=a,this.$el.children(".format").remove(),this.setDate(this.getDate())},i.isNative=function(){return 1==this.$el.attr("data-native")};var j=function(a){this.isRenderAsApp()?this.isNative()||m.call(this):m.call(this)},k=function(a){return this.setDate(null,!0),!1},l=function(a){var b=this.$el;if("mouseenter"===a.type){var c=parseInt(b.attr("timerid"));c&&(clearTimeout(c),b.removeAttr("timerid"))}else if(this.$el.is(".show-picker")){var c=setTimeout(function(){b.removeClass("show-picker"),b.removeAttr("timerid")},500);b.attr("timerid",c)}},m=function(){var a=this;if(!this.picker){var b={};b.target=$("<div class='picker'></div>").appendTo(this.$el),b.date=this.getDate(),b.min=this.getMinDate(),b.max=this.getMaxDate(),this.picker=UIDatePicker.create(b),this.picker.on("change",function(b,c){o.call(a,b,c)})}if(!this.$el.is(".show-picker"))if(this.$el.addClass("show-picker").removeClass("show-before"),this.isRenderAsApp())this.$el.children(".picker").on("tap",function(b){n.call(a)});else{var c=this.$el.children(".picker"),d=$(window).height()+$("body").scrollTop(),e=c.offset().top+c.height();d<e&&this.$el.addClass("show-before")}},n=function(){this.$el.removeClass("show-picker"),this.isRenderAsApp()&&this.$el.children(".picker").off("tap")},o=function(a,b){n.call(this),q.call(this,b),this.trigger("change",b)},p=function(a){var c=b.toDate($(a.currentTarget).val());if(c){var d=this.getMinDate();d&&d.getTime()>c.getTime()&&(c=new Date(d.getTime()));var e=this.getMaxDate();e&&e.getTime()<c.getTime()&&(c=new Date(e.getTime()))}q.call(this,c),this.trigger("change",c)},q=function(a){a?(this.$el.addClass("has-val"),this.$el.attr("data-dt",b.toDateString(a,"yyyy/MM/dd")),this.input.val(d(a,this.getDateFormat()))):(this.$el.removeClass("has-val"),this.$el.removeAttr("data-dt"),this.input.val(""))};g.register(".ui-dateipt",h)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.DatePicker){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=["一","二","三","四","五","六","七","八","九","十","十一","十二"],e=function(a){if(a instanceof Date){var b=a.getFullYear()+"年";return b+=" "+d[a.getMonth()]+"月"}return null},f=function(a,b){c.call(this,a,b)},g=f.prototype=new c;g.render=function(a,d){c.render.call(this,a,d),d.addClass("ui-datepicker");var f=this.getDate()||new Date,g=a("<header></header>").appendTo(d);g.append("<label>"+e(f)+"</label>"),g.append("<button class='prev'></button><button class='next'></button>");var i=a("<table class='head'></table>").appendTo(d);i.append("<thead><tr><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th><th>日</th></tr></thead>");var j=a("<div class='content'></div>").appendTo(d);i=a("<table class='t0'></table>").appendTo(j);var k=a("<tbody></tbody>").appendTo(i);h.call(this,a,d,k,f),d.attr("data-y",f.getFullYear()).attr("data-m",f.getMonth());var l=this.getDate();l&&d.attr("data-dt",b.toDateString(l,"yyyy/MM/dd"));var m=b.toDate(this.options.min);m&&d.attr("data-min",b.toDateString(m,"yyyy/MM/dd"));var n=b.toDate(this.options.max);return n&&d.attr("data-max",b.toDateString(n,"yyyy/MM/dd")),this},g.getDate=function(){return b.toDate(this.options.date)},g.getMinDate=function(){return b.toDate(this.options.min)},g.getMaxDate=function(){return b.toDate(this.options.max)};var h=function(a,b,c,d){var e=d.getFullYear(),f=d.getMonth(),g=new Date(e,f,1),h=g.getDay();g.setDate(h?2-h:-5);var i=new Date,j=1e4*i.getFullYear()+100*i.getMonth()+i.getDate(),k=this.getDate(),l=0;k&&(l=1e4*k.getFullYear()+100*k.getMonth()+k.getDate());var m=this.getMinDate(),n=0;m&&(n=1e4*m.getFullYear()+100*m.getMonth()+m.getDate());var o=this.getMaxDate(),p=21001231;for(o&&(p=1e4*o.getFullYear()+100*o.getMonth()+o.getDate());;){for(var q=a("<tr></tr>").appendTo(c),r=0;r<7;r++){var s=g.getFullYear(),t=g.getMonth(),u=g.getDate(),v=1e4*s+100*t+u,w=a("<td></td>").appendTo(q).append("<span>"+u+"</span>");w.attr("data-dt",s+"/"+(t+1)+"/"+u),v===j&&w.addClass("today"),v===l&&w.addClass("selected"),(t!==f||v<n||v>p)&&w.addClass("disabled"),g.setDate(u+1)}if(g.getMonth()>f||g.getFullYear()>e)break}};if(!a)return module.exports=f;var i=VRender.Component,j=window.UIDatePicker=i.DatePicker=function(a,b){if(this.init(a,b)!==this)return i.get(a);this.tap("header > button",l.bind(this)),this.tap("tbody td",m.bind(this)),this.isRenderAsApp()&&(this.$el.on("tap",function(a){return!1}),this.$el.children(".content").on("touchstart touchmove touchend",n.bind(this)))},k=j.prototype=new i.base;j.find=function(a){return i.find(a,".ui-datepicker",j)},j.create=function(a){return i.create(a,j,f)},k.getDate=function(){return b.toDate(this.$el.attr("data-dt"))},k.setDate=function(a,c){var d=b.toDate(a);d?(this.$el.attr("data-dt",b.toDateString(d,"yyyy/MM/dd")),o.call(this,d)):(this.$el.removeAttr("data-dt"),this.$el.find("td.selected").removeClass("selected")),c&&this.trigger("change",this.getDate())},k.getMinDate=function(){return b.toDate(this.$el.attr("data-min"))},k.setMinDate=function(a){var c=b.toDate(a);c?this.$el.attr("data-min",b.toDateString(c,"yyyy/MM/dd")):this.$el.removeAttr("data-min"),o.call(this)},k.getMaxDate=function(){return b.toDate(this.$el.attr("data-max"))},k.setMaxDate=function(a){var c=b.toDate(a);c?this.$el.attr("data-max",b.toDateString(c,"yyyy/MM/dd")):this.$el.removeAttr("data-max"),o.call(this)};var l=function(a){var b=parseInt(this.$el.attr("data-y")),c=parseInt(this.$el.attr("data-m")),d=new Date(b,c,1);d.setMonth(d.getMonth()+($(a.currentTarget).is(".prev")?-1:1)),o.call(this,d)},m=function(a){var b=$(a.currentTarget);b.is(".disabled")||b.is(".selected")||(this.$el.find("tbody td.selected").removeClass("selected"),b.addClass("selected"),this.$el.attr("data-dt",b.attr("data-dt")),this.trigger("change",this.getDate()))},n=function(a){var b=a.touches&&a.touches[0];if("touchstart"==a.type)this.touchData={startX:b.pageX},this.touchData.mainTable=this.$el.find("table.t0");else if("touchmove"==a.type){if(a.touches.length>1)return;var c=b.pageX-this.touchData.startX;if(!this.touchData.moving&&Math.abs(c)<10)return;this.touchData.moving=!0,this.touchData.lastOffset=c,this.touchData.mainTable.css("transform","translate("+c+"px,0px)");var d=null;if(c>0&&!this.touchData.prevTable||c<0&&!this.touchData.nextTable){var e=parseInt(this.$el.attr("data-y")),f=parseInt(this.$el.attr("data-m"));d=$("<table class='t1'><tbody></tbody></table>").appendTo(this.$el.children(".content")),c>0?(f-=1,this.touchData.prevTable=d):(f+=1,this.touchData.nextTable=d),h.call(this,$,this.$el,d.children("tbody"),new Date(e,f,1))}d=c>0?this.touchData.prevTable:this.touchData.nextTable,this.touchData.contentWidth||(this.touchData.contentWidth=this.$el.children(".content").width()),c+=this.touchData.contentWidth*(c>0?-1:1),d.css("transform","translate("+c+"px,0px)")}else if("touchend"==a.type&&this.touchData.moving){var c=0;Math.abs(this.touchData.lastOffset)>20&&(c+=this.touchData.contentWidth*(this.touchData.lastOffset>0?1:-1));this.touchData.mainTable.css("transition","transform 200ms"),this.touchData.mainTable.css("transform","translate("+c+"px,0px)"),this.touchData.lastOffset>0?(this.touchData.prevTable.css("transition","transform 200ms"),this.touchData.prevTable.css("transform","translate(0px,0px)")):(this.touchData.nextTable.css("transition","transform 200ms"),this.touchData.nextTable.css("transform","translate(0px,0px)"));var g=this,i=this.touchData;setTimeout(function(){if(i.prevTable&&i.prevTable.remove(),i.nextTable&&i.nextTable.remove(),i.mainTable.css("transition",""),i.mainTable.css("transform",""),Math.abs(i.lastOffset)>20){var a=i.lastOffset>0?".prev":".next";g.$el.children("header").children(a).tap()}},200)}},o=function(a,b){if(!a){var c=parseInt(this.$el.attr("data-y")),d=parseInt(this.$el.attr("data-m"));a=new Date(c,d,1)}this.$el.find("header > label").text(e(a)),b||(b=this.$el.find("table.t0"));var f=b.children("tbody").empty();h.call(this,$,this.$el,f,a),this.$el.attr("data-y",a.getFullYear()).attr("data-m",a.getMonth())};i.register(".ui-datepicker",j)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.DateRange){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=["一","二","三","四","五","六","七","八","九","十","十一","十二"],e=function(a,c){return b.isFunction(c)?c(a):(b.isBlank(c)&&(c="yyyy-MM-dd"),b.toDateString(a,c))},f=function(a){var c=[];return b.each(b.toArray(a),function(a){b.isNotBlank(a)&&("object"!=typeof a&&(a={value:a}),a.value=parseInt(a&&a.value)||0,a.value>0&&c.push(a))}),c},g=function(a,b,c){return a&&b?e(a,c)+" 至 "+e(b,c):""},h=function(a,b){c.call(this,a,b)},i=h.prototype=new c;i.render=function(a,d){c.render.call(this,a,d),d.addClass("ui-daterange"),b.isTrue(this.options.dropdown)&&d.addClass("tools-dropdown");var e=b.toDate(this.options.start),g=b.toDate(this.options.end),h=f(this.getQuickDates()),i=parseInt(this.options.quickDef)||0;if(h&&h.length>0&&i>0){b.index(h,function(a){return a.value===i})>=0&&(e=new Date,g=new Date,i>1&&e.setDate(e.getDate()-i-1))}e&&!g&&(g=new Date(e.getTime())),g&&!e&&(e=new Date(g.getTime())),e&&g&&(d.attr("data-start",b.toDateString(e,"yyyy/MM/dd")),d.attr("data-end",b.toDateString(g,"yyyy/MM/dd"))),j.call(this,a,d,h,i),k.call(this,a,d,e,g);var l=b.toDate(this.options.min);l&&d.attr("data-min",b.toDateString(l,"yyyy/MM/dd"));var m=b.toDate(this.options.max);return m&&d.attr("data-max",b.toDateString(m,"yyyy/MM/dd")),this},i.getDateFormat=function(){return this.options.format||this.options.dateFormat},i.getQuickDates=function(){return this.options.shortcuts||this.options.quickDates};var j=function(a,c,d,e){if(d&&d.length>0){var f=a("<div class='tools'></div>").prependTo(c);b.each(d,function(c,d){var g=parseInt(c&&c.value)||0,h=a("<div class='item'></div>").appendTo(f);h.attr("data-val",g),h.text(b.isBlank(c.label)?"最近"+g+"天":c.label),e==g&&h.addClass("selected")}),
c.is(".tools-dropdown")&&0===f.children(".selected").length&&f.children(":eq(0)").addClass("selected")}},k=function(c,d,e,f){var h=c("<div class='ipt'></div>").appendTo(d),i=c("<input type='text' readonly='readonly'/>").appendTo(h);h.append("<button class='clear'></button>");var j=this.options.prompt;b.isNotBlank(j)&&h.append("<span class='prompt'>"+j+"</span>");var k=this.getDateFormat(),l=g(e,f,k);i.val(l),!a&&k&&(b.isFunction(k)?d.write("<div class='format format-fn'>"+escape(k)+"</div>"):d.write("<div class='format'>"+k+"</div>")),b.isNotBlank(l)&&d.addClass("has-val")};if(!a)return module.exports=h;var l=VRender.Component,m=window.UIDateRange=l.DateRange=function(a,b){if(this.init(a,b)!==this)return l.get(a);var c=this;this.tap(".ipt",function(a){o.call(c,a)}),this.tap(".ipt > .clear",function(a){t.call(c,a)},!0),this.tap(".tools > .item",function(a){p.call(c,a)}),this.tap(".picker header button",function(a){q.call(c,a)},!0),this.tap(".picker footer .ui-btn",function(a){s.call(c,a)},!0),this.tap(".picker tbody td",function(a){r.call(c,a)},!0),this.$el.on("mouseenter",function(a){u.call(c,a)}),this.$el.on("mouseleave",function(a){u.call(c,a)})},n=m.prototype=new l.base;m.find=function(a){return l.find(a,".ui-daterange",m)},m.create=function(a){return l.create(a,m,h)},n.getDateRange=function(a){var c=this.getStartDate(),d=this.getEndDate(),e={start:null,end:null};return c&&d&&(e.start=b.toDate(b.toDateString(c,"yyyy-MM-dd 00:00:00")),e.end=b.toDate(b.toDateString(d,"yyyy-MM-dd 13:59:59")),b.isNotBlank(a)&&(e.start=b.toDateString(e.start,a),e.end=b.toDateString(e.end,a))),e},n.setDateRange=function(a,c,d){a=b.toDate(a),c=b.toDate(c),a&&c&&(a=b.toDateString(a,"yyyy/MM/dd"),c=b.toDateString(c,"yyyy/MM/dd"),a>c&&(a=c=null)),this.$el.attr("data-start",a||""),this.$el.attr("data-end",c||""),this.$el.find(".tools > .selected").removeClass("selected"),this.$el.is(".tools-dropdown")&&this.$el.find(".tools > .item:first-child").addClass("selected"),v.call(this),x.call(this),d&&this.trigger("change",this.getDateRange())},n.setQuickDateRange=function(a,c){a=parseInt(a)||0;var d=b.find(this.$el.children(".tools").children(),function(b){return parseInt(b.attr("data-val"))===a});if(d&&d.length>0){d.addClass("selected").siblings().removeClass("selected");var e=new Date,f=new Date;a>1&&e.setDate(e.getDate()-a+1),this.$el.attr("data-start",b.toDateString(e,"yyyy/MM/dd")),this.$el.attr("data-end",b.toDateString(f,"yyyy/MM/dd")),v.call(this),x.call(this)}c&&this.trigger("change",this.getDateRange())},n.getStartDate=function(){return b.toDate(this.$el.attr("data-start"))},n.setStartDate=function(a,b){this.setDateRange(a,this.getEndDate(),b)},n.getEndDate=function(){return b.toDate(this.$el.attr("data-end"))},n.setEndDate=function(a,b){this.setDateRange(this.getStartDate(),a,b)},n.getMinDate=function(){return b.toDate(this.$el.attr("data-min"))},n.setMinDate=function(a){var c=b.toDate(a);c?this.$el.attr("data-min",b.toDateString(c,"yyyy/MM/dd")):this.$el.removeAttr("data-min"),x.call(this)},n.getMaxDate=function(){return b.toDate(this.$el.attr("data-max"))},n.setMaxDate=function(a){var c=b.toDate(a);c?this.$el.attr("data-max",b.toDateString(c,"yyyy/MM/dd")):this.$el.removeAttr("data-max"),x.call(this)},n.getDateFormat=function(){if(this.hasOwnProperty("_dateFormat"))return this._dateFormat;if(this.options.hasOwnProperty("format"))return this.options.format;if(this.options.hasOwnProperty("dateFormat"))return this.options.dateFormat;var a=this.$el.children(".format").text();return a&&this.$el.children(".format-fn").length>0&&(a=new Function("var Utils=VRender.Utils;return ("+unescape(a)+");")()),this.$el.children(".format").remove(),this._dateFormat=a},n.setDateFormat=function(a){this._dateFormat=a,this.$el.children(".format").remove(),this.setDateRange(this.getStartDate(),this.getEndDate())},n.setQuickDates=function(a,b,c){this.$el.children(".tools").remove(),j.call(this,$,this.$el,f(a),b);var d=this.$el.children(".tools").children(".selected");c?d.length>0?d.tap():this.trigger("change",this.getDateRange()):d.length>0&&this.setQuickDateRange(d.attr("data-val"))};var o=function(a){if(this.picker||(this.picker=w(this.$el.children(".ipt")),x.call(this,this.getStartDate(),this.getEndDate())),!this.$el.is(".show-picker")){this.$el.addClass("show-picker").removeClass("show-before").removeClass("show-right");var b=this.picker.offset(),c=b.left+this.picker.width(),d=b.top+this.picker.height(),e=$(window).width()+$("body").scrollLeft(),f=$(window).height()+$("body").scrollTop();c>e&&this.$el.addClass("show-right"),d>f&&this.$el.addClass("show-before")}},p=function(a){this.setQuickDateRange($(a.currentTarget).attr("data-val"),!0)},q=function(a){var c=$(a.currentTarget),d=c.parent().parent(),e="data-"+(d.is(".table-s")?"start":"end"),f=b.toDate(this.picker.attr(e));f.setMonth(f.getMonth()+(c.is(".prev")?-1:1)),this.picker.attr(e,b.toDateString(f,"yyyy/MM/01"));var g=f.getFullYear(),h=f.getMonth();y.call(this,d,g,h)},r=function(a){var c=$(a.currentTarget);if(!c.is(".disabled")){var d=b.toDate(c.attr("data-dt"));this.bFirstMark?(this.bFirstMark=!1,d.getTime()>this.markStart.getTime()?this.markEnd=d:this.markStart=d,x.call(this)):(this.bFirstMark=!0,this.markStart=this.markEnd=d,x.call(this))}},s=function(a){if(this.$el.removeClass("show-picker"),"submit"===$(a.currentTarget).attr("name")){var b=this.markStart||this.getStartDate(),c=this.markEnd||this.getEndDate();this.markStart=this.markEnd=null,this.setDateRange(b,c,!0)}else this.markStart=this.markEnd=null,x.call(this);this.bFirstMark=!1},t=function(a){return this.setDateRange(null,null,!0),!1},u=function(a){var b=this.$el;if("mouseenter"===a.type){var c=parseInt(b.attr("timerid"));c&&(clearTimeout(c),b.removeAttr("timerid"))}else{var c=setTimeout(function(){b.find(".picker .ui-btn[name='cancel']").click()},1500);b.attr("timerid",c)}},v=function(){var a=g(this.getStartDate(),this.getEndDate(),this.getDateFormat());this.$el.find(".ipt input").val(a),b.isBlank(a)?this.$el.removeClass("has-val"):this.$el.addClass("has-val")},w=function(a){var b=$("<div class='picker'></div>").appendTo(a),c=$("<div class='content'></div>").appendTo(b),d=$("<div class='table table-s'></div><div class='table table-e'></div>").appendTo(c);d.append("<header><label></label><button class='prev'></button><button class='next'></button></header>"),$("<table><thead></thead><tbody></tbody></table>").appendTo(d).children("thead").append("<tr><th>日</th><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th></tr>");var e=$("<footer></footer>").appendTo(b);e.append("<div class='values'><span class='start'></span> - <span class='end'></span></div>");var f=$("<div class='btns'></div>").appendTo(e);return VRender.Component.Button.create({target:f,label:"确定",type:"ok",name:"submit"}),VRender.Component.Button.create({target:f,label:"取消",type:"cancel",name:"cancel"}),b},x=function(a,c){var d=this.picker;if(d){a=a||b.toDate(d.attr("data-start"))||this.getStartDate(),c=c||b.toDate(d.attr("data-end"))||this.getEndDate()||new Date,a||(a=new Date(c.getFullYear(),c.getMonth()-1,1));var e=a.getFullYear(),f=a.getMonth(),g=100*e+f,h=c.getFullYear(),i=c.getMonth(),j=100*h+i;if(g==j)a.setMonth(f-1),e=a.getFullYear(),f=a.getMonth();else if(g>j){var k=a,l=e,m=f;a=c,c=k,e=h,h=l,f=i,i=m}d.attr("data-start",b.toDateString(a,"yyyy/MM/01")),d.attr("data-end",b.toDateString(c,"yyyy/MM/01")),y.call(this,d.find(".table-s"),e,f),y.call(this,d.find(".table-e"),h,i);var n=this.markStart||this.getStartDate();n=n?b.toDateString(n,"yyyy-MM-dd"):"",d.find("footer .start").text(n);var o=this.markEnd||this.getEndDate();o=o?b.toDateString(o,"yyyy-MM-dd"):"",d.find("footer .end").text(o)}},y=function(a,b,c){a.find("header > label").text(b+"年 "+d[c]+"月"),a.attr("data-year",b).attr("data-month",c);var e=new Date(b,c,1);e.setDate(1-e.getDay());var f=new Date,g=1e4*f.getFullYear()+100*f.getMonth()+f.getDate(),h=this.markStart||this.getStartDate(),i=0;h&&(i=1e4*h.getFullYear()+100*h.getMonth()+h.getDate());var j=this.markEnd||this.getEndDate(),k=0;j&&(k=1e4*j.getFullYear()+100*j.getMonth()+j.getDate());var l=this.getMinDate(),m=0;l&&(m=1e4*l.getFullYear()+100*l.getMonth()+l.getDate());var n=this.getMaxDate(),o=21001231;n&&(o=1e4*n.getFullYear()+100*n.getMonth()+n.getDate());for(var p=a.find("tbody").empty();;){for(var q=$("<tr></tr>").appendTo(p),r=0;r<7;r++){var s=e.getFullYear(),t=e.getMonth(),u=e.getDate(),v=1e4*s+100*t+u,w=$("<td></td>").appendTo(q);w.append("<span>"+u+"</span>"),w.attr("data-dt",s+"/"+(t+1)+"/"+u),t!==c||v<m||v>o?w.addClass("disabled"):(v===g&&w.addClass("today"),v>=i&&v<=k&&w.addClass("selected"),v===i&&w.addClass("start"),v===k&&w.addClass("end")),e.setDate(u+1)}if(e.getMonth()>c||e.getFullYear()>b)break}z.call(this)},z=function(){var a=b.toDate(this.picker.attr("data-start")),c=b.toDate(this.picker.attr("data-end"));a.setMonth(a.getMonth()+1),a.getMonth()===c.getMonth()?(this.picker.find(".table-s .next").hide(),this.picker.find(".table-e .prev").hide()):(this.picker.find(".table-s .next").show(),this.picker.find(".table-e .prev").show())};l.register(".ui-daterange",m)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Dialog){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=function(a,b){c.call(this,a,b)},e=d.prototype=new c;e.render=function(a,b){c.render.call(this,a,b),b.addClass("ui-dialog");var d=a("<div class='box'></div>").appendTo(b),e=a("<div class='dialog-view'></div>").appendTo(d),h=a("<header></header>").appendTo(e);h.append("<div class='title'>"+this.getTitle()+"</div>"),h.append("<span class='closebtn'></span>");var i=a("<section></section>").appendTo(e);f.call(this,a,b,i,this.getContentView());var j=a("<footer></footer>").appendTo(e);return g.call(this,a,b,j,this.getButtons()),this},e.getTitle=function(){return b.isNull(this.options.title)?"标题":b.isBlank(this.options.title)?"&nbsp;":this.options.title},e.getContentView=function(){return this.options.content||this.options.view},e.getButtons=function(){return b.isNull(this.options.buttons)?[{name:"submit",label:"确定"},{name:"cancel",label:"取消"}]:b.toArray(this.options.buttons)};var f=function(c,d,e,f){b.isNotBlank(f)&&(b.isFunction(f.render)?f.render(e):a?e.append(f.$el||f):e.write(f))},g=function(c,d,e,f){if(f&&f.length>0){var g=a?VRender.Component.Button:require("../../../ui/component/UIButton"),h=c("<div class='btnbar'></div>").appendTo(e);b.each(f,function(b){if("string"==typeof b&&(b={name:b}),b&&b.name){b.type=b.type||b.name;var d=c("<div></div>").appendTo(h);a?g.create(c.extend({},b,{target:d})):new g(this,b).render(d)}})}};if(!a)return module.exports=d;var h=VRender.Component,i=window.UIDialog=h.Dialog=function(a,b){if(this.init(a,b)!==this)return h.get(a);this.options.module&&this.load(this.options.module),this.$el.find(".dialog-view").css("maxHeight",$(window).height()-50);var c=this;this.$el.tap(".dialog-view > header > .closebtn",function(a){k.call(c,a)}),this.$el.tap(".dialog-view > footer .ui-btn",function(a){l.call(c,a)}),this.$el.parent().is(".ui-dialog-wrap")&&$(window).on("resize",function(){m.call(c)||$(window).off("resize",arguments.callee)})},j=i.prototype=new h.base;i.find=function(a){return h.find(a,".ui-dialog",i)},i.create=function(a){return a=$.extend({},a),a.target||(a.target=$("body").children(".ui-dialog-wrap"),a.target&&0!=a.target.length||(a.target=$("<div class='ui-dialog-wrap'></div>").appendTo("body")),$("body").addClass("ui-scrollless")),h.create(a,i,d)},i.close=function(a){if(a.is(".ui-dialog")||(a=b.parentUntil(a,".ui-dialog")),a&&a.length>0){var c=h.get(a);c&&c instanceof i&&c.close()}},j.getTitle=function(){return this.$el.find(".dialog-view > header > .title").text()},j.getTitle=function(a){b.isNotBlank(a)&&this.$el.find(".dialog-view > header > .title").text(a)},j.setContent=function(a){var b=this.$el.find(".dialog-view > section").empty();f.call(this,$,this.$el,b,a)},j.setButtons=function(a){var b=this.$el.find(".dialog-view > footer").empty();g.call(this,$,this.$el,b,a)},j.close=function(){var a=this.$el.parent();this.$el.remove(),a.is(".ui-dialog-wrap")&&0===a.children().length&&(a.remove(),$("body").removeClass("ui-scrollless")),this.trigger("closed")},j.load=function(a,c,d){if(!b.isBlank(a)){var e=this;c&&(a+=(a.indexOf("?")<0?"?":"&")+$.param(c)),VRender.require(a,function(a,c){e.setContent(a?a.msg||a:c);var f=e.$el.find(".dialog-view > section").children();f&&f.length>0&&(f.on("submit submit_to_dialog",function(a,b){e.trigger("view_submit",b),e.close()}),e.on("btnclick",function(a,b,c){f.trigger("dialog_"+b,e,c),["cancel","close"].indexOf(b)>=0&&e.close()})),b.isFunction(d)&&d(a,c)})}};var k=function(a){this.close(!0)},l=function(a){var b=$(a.currentTarget);this.hasListen("btnclick")?this.trigger("btnclick",b.attr("name"),b):this.$el.parent().is(".ui-dialog-wrap")&&this.close()},m=function(){if($("body").find(this.$el).length>0)return this.$el.find(".dialog-view").css("maxHeight",$(window).height()-50),!0};h.register(".ui-dialog",i)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.DropdownList){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderItems,d=function(a,b){c.call(this,a,b)};(d.prototype=new c).render=function(a,b){c.render.call(this,a,b),b.addClass("ui-dropdownlist");var d=a("<ul></ul>").appendTo(b);return e.call(this,a,d,this.getData()),this.isRenderAsIphone()&&b.append("<div class='mask'></div>"),this};var e=function(c,d,e){var f=this,g=0,h=!1,i=this.isDataSelected;b.isFunction(i)||(i=function(){return!1});var j=function(){d.append("<li class='sep'></li>")},k=function(b){var e=c("<li class='item'></li>").appendTo(d);e.text(f.getDataLabel(b,g)),i.call(f,b,g)&&e.addClass("selected"),e.attr(f.getMapData(b)),a&&e.data("itemData",b),g+=1};b.each(b.toArray(e),function(a){b.isBlank(a)||("string"==typeof a&&(a={label:a}),b.isArray(a)?(g>0&&j(),b.each(a,function(a){b.isBlank(a)||("string"==typeof a&&(a={label:a}),k(a))}),h=!0):(h&&j(),k(a),h=!1))})};if(!a)return module.exports=d;var f=VRender.Component,g=window.UIDropdownList=f.DropdownList=function(a,b){if(this.init(a,b)!==this)return f.get(a);this.isRenderAsIphone()?this.$el.children("ul").on("scroll",j.bind(this)):this.tap("li.item",i.bind(this))},h=g.prototype=new f.base;g.find=function(a){return f.find(a,".ui-dropdownlist",g)},g.create=function(a){return f.create(a,g,d)},h.setData=function(a){a=f.base.doAdapter.call(this,a);var b=this.$el.children("ul").empty();e.call(this,$,b,a)},h.getSelectedData=function(){var a=this.$el.find("li.item.selected");return a&&a.length>0?this.getItemData(a):null},h.getSelectedIndex=function(){return b.index(this.$el.find("li.item"),function(a){return a.is(".selected")})},h.setSelectedIndex=function(a,c){a=parseInt(a);var d=this.$el.find("li.item").removeClass("selected");!isNaN(a)&&a>=0&&a<d.length&&d.eq(a).addClass("selected"),b.isTrue(c)&&this.trigger("change",this.getSelectedData())},h.getSelectedId=function(){var a=this.getSelectedData();return a?this.getDataId(a):null},h.setSelectedId=function(a,c){if(b.isNull(a))this.setSelectedIndex(-1,c);else{var d=this,e=this.$el.find("li.item").removeClass("selected");b.find(e,function(b){var c=d.getItemData(b);if(c===a||d.getDataId(c)==a)return b.addClass("selected"),!0});b.isTrue(c)&&this.trigger("change",this.getSelectedData())}},h.getItemLabel=function(a){return a=parseInt(a),isNaN(a)||a<0?null:this.$el.find("li.item").eq(a).text()},h.length=function(){return this.$el.find("li.item").length},h.matchFirst=function(a,c,d){if(b.isNotBlank(a))for(var e=this.$el.find("li.item"),f=0,g=e.length;f<g;f++){var h=e.eq(f);if(k.call(this,h.text(),a,c,d))return[f,this.getItemData(h)]}return null};var i=function(a){var b=$(a.currentTarget);b.is(".selected")||(b.addClass("selected").siblings().removeClass("selected"),this.trigger("change",this.getSelectedData()))},j=function(a){var b=this.$el.children("ul"),c=b.scrollTop(),d=b.innerHeight()/5,e=parseInt(c/d);c-d*e>d/2&&(e+=1),e-=1,this.scrollTimerId&&(clearTimeout(this.scrollTimerId),this.scrollTimerId=0),this.setSelectedIndex(e<0?-1:e,!0),"final"===a.type?b.scrollTop(e<0?0:d*(e+1)):this.scrollTimerId=setTimeout(function(){j.call(this,{type:"final"})}.bind(this),200)},k=function(a,b,c,d){if(b==a)return!0;if(c&&b.length<a.length){var e=a.indexOf(b);if(e>=0)return!d||0===e}return!1};f.register(".ui-dropdownlist",g)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Paginator){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=function(a,b){c.call(this,a,b)},e=d.prototype=new c;e.render=function(a,b){c.render.call(this,a,b),b.addClass("ui-paginator");var d=this.getPageNo(),e=this.getPageSize(),h=this.getPageCount(),i=this.getTotalCount();b.attr("data-total",i),b.attr("data-no",d),b.attr("data-size",e),b.attr("data-pages",h);var j=a("<div class='pages'></div>").appendTo(b);return j.append("<button class='prev'>&lt;</button>"),j.append("<span class='page'><span class='pageno'>"+d+"</span>/<span class='pagecount'>"+h+"</span></span>"),j.append("<button class='next'>&gt;</button>"),j.append("<input class='pageipt'/>"),j.append("<button class='goto'>跳转</button>"),f.call(this,a,b,d,e,h,i),g.call(this,b,d,e,h),this},e.getTotalCount=function(){var a=parseInt(this.options.total)||0;return a>0?a:0},e.getPageNo=function(){var a=parseInt(this.options.page)||0;if(a<=1)return 1;var b=this.getPageCount();return a<b?a:b},e.getPageSize=function(){var a=parseInt(this.options.size)||0;return a>0?a:20},e.getPageCount=function(){return Math.ceil(this.getTotalCount()/this.getPageSize())||1};var f=function(c,d,e,f,g,h){var i=this.options.status;if(!0===i?i="共{totalCount}条":a&&(i=d.children(".status-src").text()),!b.isBlank(i)){var j=Math.min((e-1)*f+1,h),k=Math.min(e*f,h),l=i.replace(/\{pageNo\}/g,e);l=l.replace(/\{pageSize\}/g,f),l=l.replace(/\{pageCount\}/g,g),l=l.replace(/\{totalCount\}/g,h),l=l.replace(/\{pageStart\}/g,j),l=l.replace(/\{pageEnd\}/g,k),a&&d.children(".status").remove(),d.append("<div class='status'>"+l+"</div>"),a||c("<div class='status-src'></div>").appendTo(d).text(i)}},g=function(a,b,c,d){a.removeClass("page-first").removeClass("page-last");var e=a.find(".pages > .prev").removeClass("disabled"),f=a.find(".pages > .next").removeClass("disabled");1===b&&(a.addClass("page-first"),e.addClass("disabled")),b===d&&(a.addClass("page-last"),f.addClass("disabled"))};if(!a)return module.exports=d;var h=VRender.Component,i=window.UIPaginator=h.Paginator=function(a,b){if(this.init(a,b)!==this)return h.get(a);var c=this;this.tap("button",function(a){return k.call(c,a)}),this.$el.on("keydown","input",function(a){return l.call(c,a)}),this.$el.on("focusout","input",function(a){return m.call(c,a)})},j=i.prototype=new h.base;i.find=function(a){return h.find(a,".ui-paginator",i)},i.create=function(a){return h.create(a,i,d)},j.set=function(a,b,c,d){n.call(this,a,b,c,d)},j.getPageNo=function(){var a=parseInt(this.$el.attr("data-no"))||0;if(a<=1)return 1;var b=this.getPageCount();return a<b?a:b},j.setPageNo=function(a,b){console.log("setPageNo",a),n.call(this,null,a,null,b)},j.getPageSize=function(){var a=parseInt(this.$el.attr("data-size"))||0;return a>0?a:20},j.setPageSize=function(a,b){n.call(this,null,null,a,b)},j.getTotalCount=function(){var a=parseInt(this.$el.attr("data-total"))||0;return a>0?a:0},j.setTotalCount=function(a,b){n.call(this,a,null,null,b)},j.getPageCount=function(){return Math.ceil(this.getTotalCount()/this.getPageSize())||1},j.getStatus=function(){return this.$el.children(".status-src").text()},j.setStatus=function(a){this.$el.children(".status-src").remove(),b.isNotBlank(a)&&$("<div class='status-src'></div>").appendTo(this.$el).text(a),o.call(this,this.getPageNo(),this.getPageSize(),this.getPageCount,this.getTotalCount())};var k=function(a){var b=$(a.currentTarget);if(b.is(".disabled"))return!1;var c=this.getPageNo();if(b.is(".prev"))c-=1;else if(b.is(".next"))c+=1;else if(b.is(".goto")){var d=this.$el.find(".pageipt");c=parseInt(d.val()),d.val("")}c>=0&&c<=this.getPageCount()&&(this.trigger("onpage",c,this.getPageSize()),this.hasListen("onpage")||this.setPageNo(c))},l=function(a){if(13===a.which){var c=this;return setTimeout(function(){c.$el.find("button.goto").trigger("click")},0),!1}return!!b.isControlKey(a)||b.isNumberKey(a)},m=function(a){var b=$(a.currentTarget);b.val(parseInt(b.val())||"")},n=function(a,b,c,d){var e=parseInt(a);e=isNaN(e)?this.getTotalCount():e>0?e:0;var f=parseInt(b);f=isNaN(f)?this.getPageNo():f>0?f:1;var h=parseInt(c);h=isNaN(h)?this.getPageSize():h>0?h:20;var i=Math.ceil(e/h)||1;f=Math.min(f,i),this.$el.attr("data-total",e),this.$el.attr("data-no",f),this.$el.attr("data-size",h),this.$el.attr("data-pages",i),this.$el.find(".pages .pageno").text(f),this.$el.find(".pages .pagecount").text(i),o.call(this,f,h,i,e),g.call(this,this.$el,f,h,i),d&&this.trigger("onpage",f,h)},o=function(a,b,c,d){f.call(this,$,this.$el,a,b,c,d)};h.register(".ui-paginator",i)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Panel){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=function(a,b){c.call(this,a,b)};(d.prototype=new c).render=function(a,b){return c.render.call(this,a,b),b.addClass("ui-panel"),e.call(this,a,b),f.call(this,a,b),g.call(this,a,b),h.call(this,a,b),this};var e=function(a,b){var c=this.options||{},d=a("<header></header>").appendTo(b),e=!1;c.hasOwnProperty("title")?e=c.title:c.tabs||(e="标题"),(e||"0"===e)&&d.append("<div class='title'>"+e+"</div>")},f=function(a,c){var d=a("<section></section>").appendTo(c),e=this.options.content||this.options.view;b.isNotBlank(e)&&(b.isFunction(e.render)?e.render(d):d.append(e.$el||e))},g=function(a,c){var d=b.toArray(this.options.tabs);if(d.length>0){var e=parseInt(this.options.tabIndex);e=!isNaN(e)&&e>=0?e:-1;var f=a("<div class='tabbar'></div>").appendTo(c.children("header")),g=null;b.each(d,function(d,h){if("string"==typeof d)d={name:d,title:d};else if(!d)return;var i=a("<span class='tab'></span>").appendTo(f);if(i.attr("name",d.name||""),i.text(d.title||d.name||"选项卡"),e===h&&i.addClass("selected"),d.name&&(d.content||d.view||d.module)){g||(g=a("<div class='tabviews'></div>").appendTo(c.children("section")));var j=a("<div class='tabview'></div>").appendTo(g);j.attr("name",d.name),e===h&&j.addClass("selected");var k=d.content||d.view;k&&(b.isFunction(k.render)?k.render(j):j.append(k.$el||k)),d.module&&j.attr("module",d.module)}})}},h=function(a,c){var d=b.toArray(this.options.buttons);if(d.length>0){var e=function(c,d){b.each(d,function(d){if("string"==typeof d)d={name:d,label:d};else if(!d)return;var f=a("<div class='item'></div>").appendTo(c);f.append("<button class='btn' name='"+(d.name||"")+"'>"+(d.label||d.name||"按钮")+"</button>"),b.isTrue(d.disabled)&&f.attr("disabled","disabled"),b.isTrue(d.toggle)&&f.attr("toggle","toggle");var g=b.toArray(d.children);if(g.length>0){f.addClass("has-child");var h=a("<div class='subbtns'></div>").appendTo(f);e(h,g)}})},f=c.children("header"),g=a("<div class='btns'></div>").appendTo(f);e(g,d)}};if(!a)return module.exports=d;var i=VRender.Component,j=window.UIPanel=i.Panel=function(a,b){if(this.init(a,b)!=this)return i.get(a);this.header=this.$el.children("header");var c=this,d=this.header.children(".btns");d.on("click",".btn",function(a){return k.call(c,a)}),d.on("mouseenter mouseleave",".subbtns > .item",function(a){l.call(c,a)}),this.$el.on("click","header > .tabbar > .tab",function(a){m.call(c,a)})};j.prototype=new i.base;j.find=function(a){return i.find(a,".ui-panel",j)},j.create=function(a){return i.create(a,j,d)};var k=function(a){var c=$(a.currentTarget),d=c.parent();if(d.is("[disabled]"))return!1;var e=$("body").off("click.vr_panel_btn");if(d.parent().is(".btns")){if(d.parent().children(".open").removeClass("open"),d.is(".has-child")){d.addClass("open");var f=d.children(".subbtns").removeClass("pull-right"),g=f.offset().left+f.width();g>$(window).width()&&f.addClass("pull-right"),setTimeout(function(){e.on("click.vr_panel_btn",function(a){e.off("click.vr_panel_btn"),d.removeClass("open")})},0)}}else{this.header.find(".btns > .item").removeClass("open");for(var h=d;!h.parent().is(".btns");)h=h.parent();console.log(h),h.is("[toggle]")&&h.children(".btn").text(c.text())}var i=c.attr("name");return b.isNotBlank(i)&&this.trigger("btnclick",i,c),!1},l=function(a){var b=$(a.currentTarget).children(".subbtns");if(b&&b.length>0)if("mouseenter"===a.type){b.show().removeClass("pull-right");var c=b.offset().left+b.width();c>$(window).width()&&b.addClass("pull-right")}else b.hide()},m=function(a){var c=$(a.currentTarget);if(!c.is(".selected")){c.addClass("selected").siblings().removeClass("selected");var d=this.$el.find(".tabviews > .tabview").removeClass("selected"),e=c.attr("name");b.isNotBlank(e)&&d.filter("[name='"+e+"']").addClass("selected")}};i.register(".ui-panel",j)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Radiobox){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=function(a,b){c.call(this,a,b)};if((d.prototype=new c).render=function(a,d){c.render.call(this,a,d),d.addClass("ui-radbox");var e=this.options||{},f=a("<input type='radio'/>").appendTo(d);return b.isNotNull(e.value)&&f.val(e.value),b.isTrue(e.checked)&&(d.addClass("checked"),f.attr("checked","checked")),b.isNotNull(e.label)&&d.append("<span>"+e.label+"</span>"),b.isNotBlank(e.name)&&f.attr("name",e.name),this},!a)return module.exports=d;var e=VRender.Component,f=window.UIRadiobox=e.Radiobox=function(a,b){if(this.init(a,b)!==this)return e.get(a);this.input=this.$el.children("input"),this.input.on("change",h.bind(this)),this.input.is(":checked")&&this.input.trigger("change")},g=f.prototype=new e.base;f.find=function(a){return e.find(a,".ui-radbox",f)},f.create=function(a){return a=$.extend(a,{tagName:"label"}),e.create(a,f,d)},g.val=function(a){return b.isNull(a)?this.input.val():(this.input.val(a),this)},g.isChecked=function(){return this.input.is(":checked")},g.setChecked=function(a){var c=!!b.isNull(a)||b.isTrue(a);this.input[0].checked=c,this.input.trigger("change")};var h=function(a){var c=$(a.currentTarget);if(c.is(":checked")){c.parent().addClass("checked");var d=c.attr("name");if(b.isNotBlank(d)){$("input[name='"+d+"']").not(c).parent().removeClass("checked")}}else c.parent().removeClass("checked")};e.register(".ui-radbox",f)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.RadioGroup){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderItems,d=1,e=function(a,e){c.call(this,a,e),this.radioGroupId=b.randomTxt(3)+d++};(e.prototype=new c).render=function(a,d){c.render.call(this,a,d),d.addClass("ui-radgrp");var e=this;return b.each(this.getData(),function(c,g){b.isNull(c)||("string"==typeof c&&(c={label:c}),f.call(e,a,d,c,g))}),this};var f=function(b,c,d,e){var f={};if(f.name="radgrp-"+this.radioGroupId,f.label=this.getDataLabel(d,e),f.value=this.getDataId(d),f.checked=this.isDataSelected(d,e),a)f.target=c,VRender.Component.Radiobox.create(f);else{new(require("../../../ui/component/UIRadiobox"))(this.context,f).render(c)}};if(!a)return module.exports=e;var g=VRender.Component,h=window.UIRadioGroup=g.RadioGroup=function(a,b){if(this.init(a,b)!==this)return g.get(a)},i=h.prototype=new g.base;h.find=function(a){return g.find(a,".ui-radgrp",h)},h.create=function(a){return g.create(a,h,e)},i.getSelectedIndex=function(){var a=this.$el.find("input:checked");return a&&a.length>0?a.parent().index():-1},i.setSelectedIndex=function(a){a=parseInt(a);var b=this.$el.children();if(!isNaN(a)&&a>=0&&a<b.length){var c=b.eq(a).find("input");c[0].checked=!0,c.trigger("change")}},i.getSelectedId=function(){var a=this.$el.find("input:checked");return a&&a.length>0?a.val():null},i.setSelectedId=function(a){for(var b=this.$el.children(),c=0,d=b.length;c<d;c++){var e=b.eq(c).find("input");if(e.val()==a)return e[0].checked=!0,void e.trigger("change")}},g.register(".ui-radgrp",h)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Tabbar){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderItems,d=function(a,b){c.call(this,a,b)};(d.prototype=new c).render=function(a,b){return c.render.call(this,a,b),b.addClass("ui-tabbar"),e.call(this,a,b),g.call(this,a,b),this};var e=function(a,c){c=a("<div class='bar'></div>").appendTo(c);var d=a("<ul class='tabs'></ul>").appendTo(c),e=this;b.each(b.toArray(this.options.data),function(b,c){f.call(e,a,d,b,c)})},f=function(a,c,d,e){if(!b.isBlank(d)){"string"==typeof d&&(d={name:d,label:d});var f=a("<li class='tab'></li>").appendTo(c);return f.append("<span>"+this.getDataLabel(d)+"</span>"),b.isNotBlank(d.name)&&f.attr("name",d.name),b.isTrue(d.closable)&&(f.addClass("closable"),f.append("<i class='close'></i>")),b.isTrue(d.disabled)&&f.addClass("disabled"),this.isDataSelected(d,e)&&f.addClass("selected"),f}},g=function(a,b){b=a("<div class='btns'></div>").appendTo(b),b.append("<span class='btn prev'>&lt;</span>"),b.append("<span class='btn next'>&gt;</span>")};if(!a)return module.exports=d;var h=VRender.Component,i=window.UITabbar=h.Tabbar=function(a,b){if(this.init(a,b)!=this)return h.get(a);k.call(this),this.$el.on("click",".tab",l.bind(this)),this.$el.on("click",".btn",m.bind(this)),this.$el.on("click",".close",n.bind(this))},j=i.prototype=new h.base;i.find=function(a){return h.find(a,".ui-tabbar",i)},i.create=function(a){return h.create(a,i,d)},j.close=function(a){if(b.isNotBlank(a)){var c=this.$el.find(".tab[name='"+a+"']");c&&c.length>0&&o.call(this,c,!0)}},j.setEnabled=function(a){b.isNotBlank(a)&&this.$el.find(".tab[name='"+a+"']").removeClass("disabled")},j.setDisabled=function(a){b.isNotBlank(a)&&this.$el.find(".tab[name='"+a+"']").addClass("disabled")},j.addItem=function(a,b){var c=this.$el.find(".tabs"),d=f.call(this,$,c,a);if(b=parseInt(b),!isNaN(b)&&b>=0){var e=c.children();b<e.length-1&&e.eq(b).before(d.detach())}},j.removeItem=function(a){b.isNotBlank(a)&&("string"==typeof a?this.close(a):a.name&&this.close(a.name))},j.removeItemAt=function(a){if(a=parseInt(a),!isNaN(a)){var b=this.$el.find(".tab").eq(a);b&&b.length>0&&o.call(this,b,!0)}};var k=function(){this.$el.removeClass("over"),this.$el.width()<this.$el.find(".tabs").width()&&this.$el.addClass("over")},l=function(a){var b=$(a.currentTarget);if(!b.is(".disabled")){var c=!b.is(".selected"),d=this.$el.find(".tab.selected");if(c&&(d&&d.length>0&&(d.removeClass("selected"),this.trigger("hide",d.attr("name"),d.index())),b.addClass("selected"),this.trigger("show",b.attr("name"),b.index())),this.trigger("click",b.attr("name"),b.index()),c){var e={index:b.index(),name:b.attr("name")},f=d?{index:d.index(),name:d.attr("name")}:null;this.trigger("change",e,f)}}},m=function(a){var c=$(a.currentTarget),d=this.$el.find(".tab"),e=b.find(d,function(a){return!a.is(".hide")});c.is(".prev")?e.prev().removeClass("hide"):c.is(".next")&&this.$el.find(".tabs").width()>this.$el.find(".bar").width()&&e.addClass("hide")},n=function(a){var b=$(a.currentTarget).parent();return o.call(this,b,!0),!1},o=function(a,b){var c={index:a.index(),name:a.attr("name")},d=null;if(a.is(".selected")&&(d=a.next(),d&&0!=d.length||(d=a.prev()),this.trigger("hide",c.name,c.index)),a.remove(),b&&this.trigger("close",c.name,c.index),d&&d.length>0){d.addClass("selected");var e={index:d.index(),name:d.attr("name")};this.trigger("show",e.name,e.index),this.trigger("change",e,c)}};h.register(".ui-tabbar",i)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.TextView){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=function(a,b){c.call(this,a,b)},e=d.prototype=new c;e.render=function(a,d){c.render.call(this,a,d),d.addClass("ui-textview");var e=this.options||{}
;this.isDisplayAsPassword()&&d.addClass("display-as-pwd");var h=a("<div class='ipt'></div>").appendTo(d),i=f.call(this,a,d,h),j=this.getWidth();b.isNotBlank(j)&&h.css("width",j),b.isTrue(e.readonly)&&(d.addClass("readonly"),i.attr("readonly","readonly")),b.isTrue(e.required)&&d.attr("required","required");var k=parseInt(e.maxSize)||0;if(k>0){d.addClass("show-size").attr("data-size",k);var l=b.trimToEmpty(i.val()).length;h.append("<span class='size'>"+l+"/"+k+"</span>")}b.isNotBlank(e.prompt)&&h.append("<span class='prompt'>"+e.prompt+"</span>"),b.isNotBlank(e.tips)&&h.append("<span class='tips'>"+e.tips+"</span>");var m=e.description||e.desc;return b.isNotBlank(m)&&d.append("<div class='desc'>"+m+"</div>"),g.call(this,a,d),this},e.getWidth=function(){var a=this.options||{};return b.isBlank(a.width)?null:isNaN(a.width)?a.width:(parseFloat(a.width)||0)+"px"},e.getDecimals=function(){if(this.isDisplayAsPassword())return 0;var a=this.options||{};return"int"===(a.dataType||a.type)?0:a.hasOwnProperty("decimals")?parseInt(a.decimals)||0:2},e.isDisplayAsPassword=function(){return b.isTrue(this.options.displayAsPwd)};var f=function(a,c,d){var e=this.options||{},f=b.isTrue(e.multi),g=f?"<textarea></textarea>":"<input type='text'/>";g=a(g).appendTo(d),f?c.addClass("multi"):d.append("<span class='clear'></span>");var h=e.value,i=e.dataType||e.type;if(b.isNotBlank(i)&&("int"===i&&(i="number"),/^(email|password|tel|url|number)$/.test(i)&&g.attr("type",i),c.attr("data-type",i),/^(number|num|int)$/.test(i))){var j=this.getDecimals();c.attr("data-decimal",j);var k=parseFloat(e.min),l=parseFloat(e.max);isNaN(k)||c.attr("data-min",k),isNaN(l)||c.attr("data-max",l),b.isNotBlank(h)&&(h=parseFloat(h),isNaN(h)?h="":(!isNaN(k)&&h<k&&(h=k),!isNaN(l)&&h>l&&(h=l),h=h.toFixed(j)))}return b.isNotBlank(h)&&(g.val(h),c.addClass("has-val")),g},g=function(a,d){b.isNotBlank(this.options.empty)&&d.attr("data-empty",this.options.empty);var e=this.options.errmsg;b.isFunction(e)?c.renderFunction(d,"errmsg",e):b.isNotBlank(e)&&d.attr("data-errmsg",e)};if(!a)return module.exports=d;var h=VRender.Component,i=window.UITextView=h.TextView=function(a,b,c){if(this.init(a,b)!==this)return h.get(a);this.holder=c,this.input=this.$el.find("input, textarea"),this.maxSize=parseInt(this.$el.attr("data-size"))||0,this.input.on("focusin",m.bind(this)),this.input.on("focusout",n.bind(this)),this.input.on("keydown",k.bind(this)),this.input.on("keyup",l.bind(this)),this.tap(".clear",o.bind(this))},j=i.prototype=new h.base;i.find=function(a){return h.find(a,".ui-textview",i)},i.create=function(a){return h.create(a,i,d)},j.val=function(a){return b.isNotNull(a)&&(this.input.val(a),this.showError(!1),a.length>0?this.$el.addClass("has-val"):this.$el.removeClass("has-val"),this.maxSize>0&&this.$el.find(".ipt > .size").text(a.length+"/"+this.maxSize)),this.input.val()},j.setTips=function(a){var c=this.$el.find(".ipt > .tips");c&&c.length>0?c.html(a):b.isNotBlank(a)&&this.$el.children(".ipt").append("<span class='tips'>"+a+"</span>")},j.setDescription=function(a){var c=this.$el.children(".desc");c&&c.length>0?c.html(a):b.isNotBlank(a)&&this.$el.append("<div class='desc'>"+a+"</div>")},j.showError=function(a){if(this.$el.removeClass("show-error").find(".errmsg").remove(),a&&(this.$el.addClass("show-error"),"string"==typeof a)){var b=$("<div class='errmsg'></div>").appendTo(this.$el);b.text(a);var c=this.$el.children(".ipt");b.insertAfter(c),this.isRenderAsApp()||b.css("top",c.height()+8)}};var k=function(a){if(this.showError(!1),b.isControlKey(a))return!0;var c=this.input.val()||"",d=this.$el.attr("data-type")||"text";if("number"===d||"num"===d){if(!p(a,c))return!1}else if("tel"===d||"mobile"===d||"phone"===d){if(!/[0-9]|\-/.test(a.key))return!1;if("-"===a.key&&"mobile"===d)return!1}else if("text"===d&&this.maxSize>0&&c.length>=this.maxSize)return!1;this.$el.addClass("has-val")},l=function(a){var b=this.input.val()||"",c=b,d=this.$el.attr("data-type")||"text";if("number"===d||"num"===d?c=b.replace(/[^0-9\.\-]/g,""):"tel"!==d&&"mobile"!==d&&"phone"!==d||(c=b.replace(/[^0-9\-]/g,"")),c!=b&&this.input.val(c),0===c.length&&this.$el.removeClass("has-val"),this.maxSize>0&&this.$el.find(".ipt > .size").text(c.length+"/"+this.maxSize),13===a.which){var e=this;setTimeout(function(){e.input.focusout(),e.trigger("enter",c)})}},m=function(a){var b=this;this.$el.addClass("focus");var c=this.input.val();this._changeTimer=setInterval(function(){var a=b.input.val();a!=c&&(c=a,b.trigger("change",a))},100)},n=function(a){this.$el.removeClass("focus");var c=this.input.val()||"";if(0===c.length)"required"===this.$el.attr("required")&&this.showError(this.$el.attr("data-empty")||"输入框不能为空");else{var d=this.$el.attr("data-type")||"text";if("number"===d||"num"===d)if(isNaN(c))this.showError("数据格式不正确");else{var e=parseFloat(c),f=parseFloat(this.$el.attr("data-min"));!isNaN(f)&&f>e&&this.showError("数据不正确，请输入大于等于 "+f+" 的值");var g=parseFloat(this.$el.attr("data-max"));!isNaN(g)&&g<e&&this.showError("数据不正确，请输入小于等于 "+g+" 的值");var h=parseFloat(this.$el.attr("data-decimal"))||0;h>0&&this.input.val(e.toFixed(h))}else"tel"===d?b.isMobile(c)||b.isPhone(c)||this.showError("手机或电话号码不正确"):"text"===d?this.maxSize>0&&this.maxSize<c.length&&this.showError("输入内容太长，允许最大长度为："+this.maxSize):"email"===d?b.isEmail(c)||this.showError("Email格式不正确，请重新输入"):"mobile"===d?b.isMobile(c)||this.showError("手机号码不正确，必须是1开头的11位数字"):"phone"===d?b.isPhone(c)||this.showError("电话号码不正确"):"url"===d&&(b.isUrl(c)||this.showError("url格式不正确"))}if(this._changeTimer){var i=this._changeTimer;this._changeTimer=null,setTimeout(function(){clearInterval(i)},100)}},o=function(a){this.val(""),this.trigger("change","");var b=this;setTimeout(function(){b.input.focus()},0)},p=function(a,b){return!!/[0-9]/.test(a.key)||("-"===a.key?!/\-/.test(b):"."===a.key&&!/\./.test(b))};h.register(".ui-textview",i)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Container){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("../ui/base")).HolderBase,d=function(a,c,d){b.isNotBlank(d)&&(isNaN(d)||(d+="px"),a.css(c,d))},e=function(a,b){c.call(this,a,b)};if((e.prototype=new c).render=function(a,e){c.render.call(this,a,e),e.addClass("ui-container");var f=this.options||{};d(e,"padding-left",f.paddingLeft),d(e,"padding-right",f.paddingRight),d(e,"padding-top",f.paddingTop),d(e,"padding-bottom",f.paddingBottom),d(e,"margin-left",f.marginLeft),d(e,"margin-right",f.marginRight),d(e,"margin-top",f.marginTop),d(e,"margin-bottom",f.marginBottom),d(e,"border",f.border),d(e,"border-radius",f.borderRadius),d(e,"border-color",f.borderColor),d(e,"border-width",f.borderWidth),d(e,"border-left",f.borderLeft),d(e,"border-right",f.borderRight),d(e,"border-top",f.borderTop),d(e,"border-bottom",f.borderBottom),d(e,"background",f.bg||f.background),d(e,"background-color",f.bgcolor||f.backgroundColor),d(e,"background-image",f.image||f.backgroundImage),d(e,"width",f.width),d(e,"min-width",f.minWidth),d(e,"max-width",f.maxWidth),d(e,"height",f.height),d(e,"min-height",f.minHeight),d(e,"max-height",f.maxHeight),d(e,"overflow",f.overflow),d(e,"color",f.color),d(e,"text-align",f.align),d(e,"box-shadow",f.shadow);var g=f.content||f.view;return b.isNotBlank(g)&&(b.isFunction(g.render)?g.render(e):e.append(g.$el||g)),this},!a)return module.exports=e;var f=VRender.Component,g=f.Container=function(a,b){if(this.init(a,b)!=this)return f.get(a)};g.prototype=new f.base;g.find=function(a){return f.find(a,".ui-container",g)},g.create=function(a){a=$.extend({},a);var b=f.create(a),c=new e(a).render($,b);return new g(b,a,c)}}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Group){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("../ui/base")).HolderBase,d=function(a,b){c.call(this,a,b)},e=d.prototype=new c;d.VERTICAL="vertical",d.HORIZONTIAL="horizontial",e.render=function(a,e){c.render.call(this,a,e),e.addClass("ui-group");var g=this.options||{},h=g.orientation;h!==d.HORIZONTIAL&&h!==d.VERTICAL||(e.addClass(h),e.attr("data-orientation",h)),b.isNotBlank(g.gap)&&0!==g.gap&&e.attr("data-gap",g.gap);var i=b.trimToEmpty(g.align).toLowerCase();return i&&(e.attr("data-align",i),/left/.test(i)?e.css("text-align","left"):/center/.test(i)?e.css("text-align","center"):/right/.test(i)&&e.css("text-align","right")),f.call(this,a,e,g.children||g.subViews||g.views),this};var f=function(a,c,d){d=b.toArray(d),b.each(d,function(a){b.isNotNull&&(b.isFunction(a.render)?a.render(c):c.append(a.$el||a))}),g.call(this,a,c)},g=function(a,c){var e=c.children(),f=top=valign=display="",g=c.attr("data-orientation"),h=b.trimToEmpty(c.attr("data-gap")),i=c.attr("data-align");h&&!isNaN(h)&&(this.isRenderAsRem()?h=h/100+"rem":h+="px"),g===d.HORIZONTIAL?(display="inline-block",f=h,/top/.test(i)?valign="top":/middle/.test(i)?valign="middle":/bottom/.test(i)&&(valign="bottom")):(g===d.VERTICAL&&(display="block"),top=h),e.css("display",display).css("vertical-align",valign),e.not(":eq(0)").css("margin-left",f).css("margin-top",top)};if(!a)return module.exports=d;var h=VRender.Component,i=h.Group=function(a,b){if(this.init(a,b)!==this)return h.get(a)},j=i.prototype=new h.base;i.find=function(a){return h.find(a,".ui-group",i)},i.create=function(a){a=$.extend({},a);var b=h.create(a),c=new d(a).render($,b);return new i(b,a,c)},j.doLayout=function(){k.call(this)},j.setOrientation=function(a){this.$el.removeClass(d.HORIZONTIAL).removeClass(d.VERTICAL),a===d.HORIZONTIAL||a===d.VERTICAL?this.$el.addClass(a).attr("data-orientation",a):this.$el.removeAttr("data-orientation"),k.call(this)},j.setGap=function(a){b.isNotBlank(a)&&0!==a?this.$el.attr("data-gap",a):this.$el.removeAttr("data-gap"),k.call(this)},j.setAlign=function(a){this.$el.attr("data-align",a||"");var b=valign="";/left/.test(a)?b="left":/center/.test(a)?b="center":/right/.test(a)&&(b="right"),this.$el.css("text-align",b),/top/.test(a)?valign="top":/middle/.test(a)?valign="middle":/bottom/.test(a)&&(valign="bottom"),this.$el.children().css("vertical-align",valign)},j.append=function(a){return this.addChildren(Array.prototype.slice.call(arguments))},j.addChild=function(a){return b.isNotBlank(a)&&this.$el.append(a.$el||a),a},j.addChildren=function(a){var c=this;return b.each(b.toArray(a),function(a){c.addChild(a)}),this};var k=function(){var a=this;setTimeout(function(){g.call(a,$,a.$el)},0)}}}("undefined"!=typeof VRender);