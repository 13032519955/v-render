!function(){var a=document.hasOwnProperty("ontouchstart");$.fn.tap=function(e,f,g,h){d(e)&&(h=f,g=e,f=e=null),d(f)&&(h=g,g=f,f=e,e=null),e&&"string"!=typeof e&&(f=e,e=null);var i=$(this);if(d(g)){var j=function(a){if(g(a)===!1||h)return!1};g.__tap_handler=j,a?c(i,e,f,j):b(i,e,f,j)}else e||(a?i.trigger("touchstart").trigger("touchend",f):i.trigger("click",f));return i};var b=function(a,b,c,d){b?c?a.on("click",b,c,d):a.on("click",b,d):c?a.on("click",c,d):a.on("click",d)},c=function(a,b,c,d){var e=0,f=0,g=0,h=function(a){if($(this).is(".disabled"))return!1;e=(new Date).getTime();var b=a.originalEvent&&a.originalEvent.changedTouches[0];return f=b?b.clientX:0,g=b?b.clientY:0,!1},i=function(a){var b=a.originalEvent&&a.originalEvent.changedTouches[0];b=b||{clientX:0,clientY:0};var c=Math.abs(b.clientX-f),h=Math.abs(b.clientY-g);if(c<6&&h<6&&(new Date).getTime()-e<2e3)return d(a)};b?(a.on("touchstart",b,h),c?a.on("touchend",b,c,i):a.on("touchend",b,i)):(a.on("touchstart",h),c?a.on("touchend",c,i):a.on("touchend",i))},d=function(a){return a&&"function"==typeof a}}(),function(){if(!window.VRender){var a=window.VRender=function(){};a.event_defined="vrender_defined",a.event_statepush="vrender_statepush",a.event_statereplace="vrender_statereplace",a.event_statepop="vrender_statepop",a.event_routerbefore="vrender_router_before",a.event_routerchange="vrender_router_change";var b=!1,c={},d={},e=[],f=0,g=a.Utils=function(){};window.define=function(d,e,f){if(g.isFunction(d)?(f=d,e=null,d=null):g.isArray(d)?(f=e,e=d,d=null):g.isFunction(e)&&(f=e,e=null),g.isFunction(f)){if(g.isBlank(d)&&(d=g.randomTxt(32)),i(d))return void(g.isFunction(c[d])&&c[d]($,a,g));b?h(d,f,e):(a.cacheDefine||(a.cacheDefine={}),a.cacheDefine[d]={definition:f,deps:e})}};var h=function(b,d,e){e=g.toArray(e);var f=function(){g.isFunction(d)&&(d=d($,a,g)||d),c[b]=d,a.trigger(a.event_defined,b,d)};if(e.length>0){var h=function(){return!g.find(e,function(a){return!i(a)})};h()?f():a.on(a.event_defined,function(){h()&&(a.off(a.event_defined,arguments.callee),f())})}else f()},i=function(a){return c.hasOwnProperty(a)};window.requirejs=function(a,b){},a.navigate=function(b,c){if(g.isNotBlank(b)){var d={router:b,replace:!1,trigger:!0,animate:!1};c&&(d=$.extend(d,c)),a.trigger(a.event_routerbefore,d),d.isDefaultPrevented!==!0&&(g.isTrue(d.replace)?window.location.replace(b):window.location=b)}},a.require=function(a,b){g.isFunction(b)&&(g.isBlank(a)?b(!1,null):l(a,null,function(a,c,d,e){b(d,e)}))},a.fetch=function(a,b,c,d,e){},a.post=function(a,b,c,d){},a.load=function(a,b,c){if(g.isNull(b)&&g.isNull(c)&&(b=a,a=null),g.isFunction(b)&&(c=b,b=a,a=null),a&&"string"==typeof a&&(a=$(a)),b=g.toArray(b),0===b.length)g.isFunction(c)&&c(null);else{var d=b.length,e=[],f=function(a,b,f,h){!f&&h&&g.pushAll(e,h),d-=1,d<=0&&g.isFunction(c)&&c(e)};g.each(b,function(b){if("string"==typeof b&&(b={uri:b}),g.isBlank(b.uri))f(null,"none");else{var c=b.uri.toLowerCase();/\.js$/.test(c)?j(b.uri,b.attributes,f):/\.css$/.test(c)?k(a,b.uri,b.attributes,f):l(b.uri,b.attributes,f)}})}};var j=function(b,d){$.getScript(b).done(function(a){if(g.isFunction(d)){var e=[];if(a){var f=a.match(/define\(["'][\w-]+["']\)/g);g.each(f,function(a){a=a.substring(8,a.length-1),c.hasOwnProperty(a)&&e.push(c[a])})}d(b,"js",!1,e)}}).fail(function(c){console.error("js load error",c.responseText||c),g.isFunction(a.onAjaxError)&&a.onAjaxError("js load error",c),g.isFunction(d)&&d(b,"js",c)})},k=function(a,b,c,e){var f=d[b];if(!f){var h=$("<link href='"+b+"' rel='stylesheet' type='text/css'>").appendTo("head");f=d[b]={$el:h}}c&&f.$el.attr(c),a&&(g.isArray(f.views)||(f.views=[]),f.views.push(a)),g.isFunction(e)&&e(b,"css")},l=function(b,c,d){g.isNotBlank(b)&&g.isFunction(d)?$.ajax({type:"POST",cache:!1,url:b,data:c,success:function(a){d(b,"html",!1,a)},error:function(c){console.error("html load error",c.responseText||c),g.isFunction(a.onAjaxError)&&a.onAjaxError("html load error",c),d(b,"html",c,null)}}):g.isFunction(d)&&d(b,"html",!1,null)};a.cache=function(a,b){return g.isBlank(a)?null:null===b?($.jStorage.deleteKey(a),null):("undefined"!=typeof b&&$.jStorage.set(a,b),$.jStorage.get(a))},a.trigger=function(b,c){a.emitter&&a.emitter.trigger(b,c)},a.on=function(b,c,d){!a.emitter&&a.EventEmitter&&(a.emitter=new a.EventEmitter),a.emitter&&a.emitter.on(b,c,d)},a.one=function(b,c,d){!a.emitter&&a.EventEmitter&&(a.emitter=new a.EventEmitter),a.emitter&&a.emitter.one(b,c,d)},a.off=function(b,c){a.emitter&&a.emitter.off(b,c)},a.onenter=function(a,b,c){if(g.isFunction(b)&&(c=b,b=null),a=$(a),g.isFunction(c)){var d=function(a){13===a.which&&c()};g.isBlank(b)?a.on("keydown",d):a.on("keydown",b,d)}else a.off("keydown",b)},a.onInputChange=function(a,b){var c=$(a);c.is("input, textarea")||(c=c.find("input, textarea")),c.on("focusin",function(a){var b=$(a.currentTarget),c=b.data("vrender-inputchange");c&&c.timer&&clearInterval(c.timer),c={lastValue:b.val()},c.timer=setInterval(function(){d(b,c)},100),b.data("vrender-inputchange",c)}),c.on("focusout",function(a){var b=$(a.currentTarget),c=b.data("vrender-inputchange");c&&c.timer&&clearInterval(c.timer),b.removeData("vrender-inputchange"),d(b,c)});var d=function(a,c){var d=a.val();d!=c.lastValue&&(c.lastValue=d,g.isFunction(b)&&b(a,d))}},a.scheduleTask=function(a,b){if(!g.isBlank(a)){if(g.isFunction(b)){var c=g.find(e,function(b){return b.name===a});c?c.task=b:e.push({name:a,task:b})}else g.removeItems(e,function(b){return b.name===a});0===e.length?(f&&clearInterval(f),f=0):f||(f=setInterval(function(){g.each(e,function(a){a.task()})},400))}};var m=function(){for(var a in d){var b=d[a];if(g.isArray(b.views)){for(var c=b.views.length-1;c>=0;c--)g.isDomExist(b.views[c])||b.views.splice(c,1);0===b.views.length&&(b.$el.remove(),delete d[a])}}};a.plugins={};var n=a.Component=function(){};n.bindName="vrender-component",n.registerList=[],n.dataAdapter=function(a){return a},n.errorHandler=function(a){},n.register=function(a,b){g.isNotBlank(a)&&g.isFunction(b)&&n.registerList.push({s:a,fun:b})},n.build=function(a){if(g.isBlank(a))return[];if(a=$(a),!a||0===a.length)return[];var b=[];return g.each(n.registerList,function(c){a.find(c.s).each(function(){var a=$(this),d=a.data(n.bindName);d||(d=new c.fun(a)),b.push(d)})}),b},n.get=function(a){return $(a).data(n.bindName)},n.find=function(a,b,c){return a=$(a),a&&0!==a.length?g.isBlank(b)?n.build(a):g.map(a.find(b),function(a){return g.isFunction(c)?new c(a):n.get(a)}):[]},n.create=function(a){a=a||{};var b=a.tagName||a.tag||"div";return b=$("<"+b+"></"+b+">"),g.isNotBlank(a.id)&&b.attr("id",a.id),g.isNotBlank(a.name)&&b.attr("name",a.name),g.isNotBlank(a.clsName)&&(b.addClass(a.clsName),g.isBlank(a.name)&&b.attr("name",a.clsName)),g.isNotBlank(a.style)&&b.addClass(a.style),a.target&&b.appendTo(a.target),b},$(function(){b=!0,n.isMobile=g.getUAState(navigator.userAgent).isMobile;for(var c in a.cacheDefine){var d=a.cacheDefine[c];h(c,d.definition,d.deps)}delete a.cacheDefine,a.scheduleTask("EasyWeb.cssfilemonitor",m)})}}(),function(a){var b=a?VRender.Utils:exports;b.each=function(d,e){if(c(e))if(b.isArray(d))for(var f=0,g=d.length;f<g&&e(d[f],f)!==!1;f++);else if(a&&d instanceof $)for(var f=0,g=d.length;f<g&&e(d.eq(f),f)!==!1;f++);},b.filter=function(d,e){var f=[];if(c(e))if(b.isArray(d))for(var g=0,h=d.length;g<h;g++){var i=d[g];e(i,g)&&f.push(i)}else if(a&&d instanceof $)for(var g=0,h=d.length;g<h;g++){var i=d.eq(g);e(i,g)&&f.push(i)}return f},b.find=function(d,e){if(c(e))if(b.isArray(d))for(var f=0,g=d.length;f<g;f++){var h=d[f];if(e(h,f))return h}else if(a&&d instanceof $)for(var f=0,g=d.length;f<g;f++){var h=d.eq(f);if(e(h,f))return h}return null},b.index=function(d,e){if(c(e))if(b.isArray(d)){for(var f=0,g=d.length;f<g;f++)if(e(d[f],f))return f}else if(a&&d instanceof $)for(var f=0,g=d.length;f<g;f++)if(e(d.eq(f),f))return f;return-1},b.isArray=function(a){return a&&a instanceof Array},b.map=function(d,e){var f=[];if(c(e))if(b.isArray(d))for(var g=0,h=d.length;g<h;g++)f.push(e(d[g],g));else if(a&&d instanceof $)for(var g=0,h=d.length;g<h;g++)f.push(e(d.eq(g),g));return f},b.removeItems=function(a,d){if(!b.isArray(a))return null;if(!c(d))return null;for(var e=a.length-1;e>=0;e--)d(a[e],e)&&a.splice(e,1)},b.toArray=function(a){return"undefined"==typeof a||null===a?[]:a instanceof Array?a:[a]};var c=function(a){return"function"==typeof a}}("undefined"!=typeof VRender),function(a){var b=a?VRender.Utils:exports;b.compare=function(a,b){var c=a.getTime(),d=b.getTime();return c===d?0:c<d?-1:1},b.getMinutes=function(a){if(!(a instanceof Date))return 0;var b=a.getTime();return String(b).length>13&&(b/=1e3),parseInt(b/6e4)},b.isSameDay=function(a,b){return a instanceof Date&&b instanceof Date&&(a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate())},b.toDate=function(a){if(a instanceof Date)return a;if("string"==typeof a){a=a.replace(/-/g,"/");var b=Date.parse(a);if(isNaN(b)){var c=a.indexOf(".");if(c>0){var d=parseInt(a.substr(c+1)||0);b=Date.parse(a.substr(0,c))+d}}return isNaN(b)?null:new Date(b)}return"number"==typeof a?new Date(a):null},b.toDateString=function(a,b){b=b||"yyyy-MM-dd",a=a||new Date;var c=a.getMonth()+1,d=a.getDate(),e=a.getHours(),f=a.getMinutes(),g=a.getSeconds(),h=a.getMilliseconds(),i=b.replace("yyyy",a.getFullYear());if(/M/.test(i)&&(i=i.replace(/MM/g,c<10?"0"+c:c).replace(/M/g,c)),/d/.test(i)&&(i=i.replace(/dd/g,d<10?"0"+d:d).replace(/d/g,d)),/H/.test(i)&&(i=i.replace(/HH/g,e<10?"0"+e:e).replace(/H/g,e)),/m/.test(i)&&(i=i.replace(/mm/g,f<10?"0"+f:f).replace(/m/g,f)),/s/.test(i)&&(i=i.replace(/ss/g,g<10?"0"+g:g).replace(/s/g,g)),/SSS/.test(i)&&(i=i.replace(/SSS/g,h<10?"00"+h:h<100?"0"+h:h)),/hh/.test(i)){var j=(e+12)%12;e<1?j="午夜"+j:e>=1&&e<5?j="凌晨"+j:e>=5&&e<6?j="清晨"+j:e>=6&&e<8?j="早上"+j:e>=8&&e<11?j="上午"+j:e>=11&&e<13?j="中午"+j:e>=13&&e<17?j="下午"+j:e>=17&&e<18?j="傍晚"+j:e>=18&&e<=23&&(j="晚上"+j),i=i.replace(/hh/g,j)}return i},b.toLocalDateString=function(a){if(!(a instanceof Date))return"";var c=new Date;return c.getFullYear()>a.getFullYear()?b.toDateString(a,"yyyy年MM月dd日"):b.isSameDay(a,c)?b.toDateString(a,"今天 HH:mm"):(c.setDate(c.getDate()-1),b.isSameDay(a,c)?b.toDateString(a,"昨天 HH:mm"):b.toDateString(a,"MM月dd日"))}}("undefined"!=typeof VRender),function(isFront){var StringUtils=isFront?VRender.Utils:exports;StringUtils.endWith=function(a,b){return!isEmptyStr(a)&&!isEmptyStr(b)&&(!(a.length<b.length)&&a.substring(a.length-b.length)==b)},StringUtils.format=function(text,data){for(var chars=String(text).split(""),length=chars.length,param=null,result="",i=0;i<length;i++){var ch=chars[i];if("{"===ch)if(null===param)param="";else{if(""!==param)break;result+="{",param=null}else if("}"===ch)if(null===param)result+="}";else{try{var value=eval(param);result+=value||0===value?value:""}catch(a){}param=null}else null===param?result+=ch:param+=ch}return result},StringUtils.isBlank=function(a){return a?"string"==typeof a&&0===String(a).replace(/\s+/g,"").length:"0"!==a&&0!==a&&a!==!1},StringUtils.isNotBlank=function(a){return!StringUtils.isBlank(a)},StringUtils.startWith=function(a,b){return!isEmptyStr(a)&&!isEmptyStr(b)&&(!(a.length<b.length)&&a.substr(0,b.length)===b)},StringUtils.strLen=function(a,b){return isEmptyStr(a)?0:(b&&(a=a.replace(/[\u4E00-\u9FFF]/g,"..")),a.length)},StringUtils.trimToEmpty=function(a){return StringUtils.isBlank(a)?"":(""+a).trim()},StringUtils.trimToNull=function(a){return StringUtils.isBlank(a)?null:(""+a).trim()};var isEmptyStr=function(a){return"undefined"==typeof a||null===a||0===a.length}}("undefined"!=typeof VRender),function(a){var b=a?VRender.Utils:exports,c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),d=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/,e=new RegExp("^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$");b.equal=function(a,c){if(a==c)return!0;if(b.isNull(a))return b.isNull(c);if(b.isNull(c))return!1;if("object"!=typeof a||"object"!=typeof c)return a===c;if(a instanceof Array){if(c instanceof Array){if(a.length!==c.length)return!1;for(var d=0,e=a.length;d<e;d++)if(!b.equal(a[d],c[d]))return!1;return!0}return!1}return a.hasOwnProperty("id")?a.id==c.id:a.hasOwnProperty("code")?a.code==c.code:!!a.hasOwnProperty("value")&&a.value==c.value},b.exec=function(a,c,d,e,f){if(b.isFunction(a)?(e=a,f=c,a=c=d=null):a instanceof Array&&(f=e,e=d,d=c,c=a,a=null),c&&(b.isFunction(c)?(f=d,e=c,c=d=null):c instanceof Array||(f=e,e=d,d=c,c=null)),d&&b.isFunction(d)&&(f=e,e=d,d=null),a||(a=this),b.isFunction(e)||(e=function(){}),c&&0!==c.length){var g=0,h=c.length;if(f){var i=[];for(g=0;g<c.length;g++)c[g].call(a,d,function(b,c){h-=1,b&&i.push(b),h<=0&&e.call(a,i.join("")||!1,c||d)})}else{var j=function(b,f){b?e.call(a,b,d):(g+=1,g<h?c[g].call(a,f||d,j):e.call(a,!1,f||d))};c[0].call(a,d,j)}}else e.call(a,!1,d)},b.getSelection=function(){return window.getSelection?window.getSelection():document.getSelection?document.getSelection():document.selection},b.getSelectionRange=function(){var a=b.getSelection();return a&&a.createRange?a.createRange():a.getRangeAt(0)},b.getUAState=function(a){var b={ie:!1,chrome:!1,firefox:!1,opera:!1,safari:!1},c=a.toLowerCase();return/micromessenger/.test(c)?b.wx=!0:/msie ([\d.]+)/.test(c)?b.ie=!0:/firefox\/([\d.]+)/.test(c)?b.firefox=!0:/chrome\/([\d.]+)/.test(c)?b.chrome=!0:/opera.([\d.]+)/.test(c)?b.opera=!0:/safari/.test(c)&&/version\/([\d.]+)/.test(c)&&(b.safari=!0),b.isMobile=/mobile/.test(c),b.isIphone=/iphone/.test(c),b},b.isAlphaKey=function(a,b){return a.which>=65&&a.which<=90||!!(b&&a.which>=97&&a.which<=122)},b.isControlKey=function(a){if(a.ctrlKey||a.metaKey||a.shiftKey)return!0;var b=[8,37,38,39,40,116,9,17,16,13,20];return b.indexOf(a.which)>=0},b.isDomExist=function(a){return a&&$("body").find(a).length>0},b.isEmail=function(a){return a&&d.test(""+a)},b.isEmpty=function(a){if("undefined"==typeof a)return!0;if(null===a)return!0;if(""===a)return!0;for(var b in a)return!1;return!0},b.isFunction=function(a){return a&&"function"==typeof a},b.isMobile=function(a){return a&&/^1\d{10}$/.test(""+a)},b.isNull=function(a){return"undefined"==typeof a||null===a},b.isNumberKey=function(a){return!a.shiftKey&&(a.which>=48&&a.which<=57||a.which>=96&&a.which<=105)},b.isNotNull=function(a){return!b.isNull(a)},b.isNumberic=function(a){return!b.isNull(a)&&("number"==typeof a||!isNaN(a))},b.isPhone=function(a){return a&&/^(0(10|2\d|[3-9]{3})-)?\d{7,8}(-\d{1,8})?$/.test(""+a)},b.isTrue=function(a){return!!a&&(a===!0||1===a||(a=String(a).toLowerCase(),!("false"===a||"no"===a||"0"===a)))},b.isUrl=function(a){return a&&e.test(""+a)},b.notNull=b.isNotNull,b.parentUntil=function(a,b,c){for(var a=$(a);null!=a&&a.length>0;){if(a.is(b))return a;if(c&&a.is(c))return $("");a=a.parent()}return $("")},b.parseUrl=function(a){var b=document.createElement("a");b.href=a||"";var c={};if(c.origin=a,c.href=b.href,c.protocol=b.protocol.replace(":",""),c.host=b.host,c.hostname=b.hostname,c.port=b.port,c.pathname=b.pathname,c.search=b.search,c.hash=b.hash,c.params={},b.search)for(var d=b.search.substr(1).split("&"),e=0,f=d.length;e<f;e++){var g=d[e].split("=");c.params[g[0]]=g[1]}return c},b.randomTxt=function(a){for(var b=[],d=c,e=0;e<a;e++)b.push(d[Math.ceil(61*Math.random())]);return b.join("")},b.toLocalMobile=function(a,c){if(!b.isMobile(a))return a;var d=[];return c&&d.push("+86"),d.push(a.substr(0,3)),d.push(a.substr(3,4)),d.push(a.substr(7,4)),d.join(" ")}}("undefined"!=typeof VRender),function(){if("undefined"!=typeof VRender&&!VRender.EventEmitter){var a=VRender.Utils,b=VRender.EventEmitter=function(){},c=b.prototype=new Object;c.trigger=function(b,c){for(var d=this,e=[],f=1,g=arguments.length;f<g;f++)e.push(arguments[f]);return a.each(this.events,function(a){if(a.name===b){var c=[{type:b,data:a.data}].concat(e);a.listener.apply(d,c)}}),a.removeItems(this.events,function(a){return a.once&&a.name===b}),this},c.on=function(b,c,d){return"string"==typeof b&&a.isNotBlank(b)&&(a.isFunction(c)&&!a.isFunction(d)&&(d=c,c=null),a.isFunction(d)&&(a.isArray(this.events)||(this.events=[]),this.events.push({name:b,data:c,listener:d}))),this},c.one=function(b,c,d){return"string"==typeof b&&a.isNotBlank(b)&&(a.isFunction(c)&&!a.isFunction(d)&&(d=c,c=null),a.isFunction(d)&&(a.isArray(this.events)||(this.events=[]),this.events.push({name:b,data:c,listener:d,once:!0}))),this},c.off=function(b,c){return a.removeItems(this.events,function(d){if(d.name===b)return!a.isNotNull(c)||d.listener==c}),this},c.hasListen=function(b){var c=a.find(this.events,function(a){return a.name===b});return!!c}}}(),function(a){if(!a||!VRender.Component.base){var b=a?VRender.Utils:require(__vrender__).Utils,c=function(a){if(b.isBlank(a))return null;if("string"==typeof a)return a;if(b.isFunction(this.getIdField)){var c=this.getIdField();if(b.isNotBlank(c))return a[c]}return a.hasOwnProperty("id")?a.id:a.hasOwnProperty("code")?a.code:a.hasOwnProperty("value")?a.value:null},d=function(a,c){var d=this.getLabelFunction();if(b.isFunction(d))return d(a,c);if(b.isBlank(a))return"";if("string"==typeof a)return a;var e=this.getLabelField();return b.isNotBlank(e)?b.isNull(a[e])?"":a[e]:a.hasOwnProperty("label")?b.isNull(a.label)?"":a.label:a.hasOwnProperty("name")?b.isNull(a.name)?"":a.name:a.hasOwnProperty("value")?b.isNull(a.value)?"":a.value:a.hasOwnProperty("text")?b.isNull(a.text)?"":a.text:""+a},e=function(a){this.options=a||{},this.setData(this.options.data),this.setDataAdapter(this.options.dataAdapter||this.options.adapter)},f=e.prototype=new Object;e.render=function(c,d){if(!a){var e=this.getDataAdapter();b.isFunction(e)&&d.write("<div class='ui-fn' name='adapter'>"+escape(e)+"</div>")}},e.doAdapter=function(a){var c=this.getDataAdapter();if(b.isFunction(c)){var d=function(a,b){return a&&a._vr_adapter_flag?a:(a=c(a,b),a&&(a._vr_adapter_flag=!0),a)};a=b.isArray(a)?b.map(a,d):d(a)}return a},f.getData=function(){return e.doAdapter.call(this,this._data)},f.setData=function(a){this._data=a},f.getDataAdapter=function(){return this._adapter},f.setDataAdapter=function(a){this._adapter=a},f.getDataId=function(a){return c.call(this,a)},f.getMapData=function(a){if(b.isFunction(this.options.dataMapper))return this.options.dataMapper(a);var c={};return b.notNull(a)&&(a.hasOwnProperty("id")&&(c["data-id"]=a.id),a.hasOwnProperty("code")&&(c["data-code"]=a.code),a.hasOwnProperty("name")&&(c["data-name"]=a.name),a.hasOwnProperty("value")&&(c["data-value"]=a.value),a.hasOwnProperty("label")&&(c["data-label"]=a.label),a.hasOwnProperty("text")&&(c["data-text"]=a.text),a.hasOwnProperty("status")&&(c["data-status"]=a.status)),c};var g=function(a){e.call(this,a),this.setIdField(this.options.idField),this.setLabelField(this.options.labelField),this.setLabelFunction(this.options.labelFunction),this.setSelectedIndex(this.options.selectedIndex),this.setSelectedId(this.options.selectedId)},h=g.prototype=new e;if(g.render=function(c,d){e.render.call(this,c,d);var f=this.getIdField();b.isNotBlank(f)&&d.attr("opt-idfield",f);var g=this.getLabelField();if(b.isNotBlank(g)&&d.attr("opt-label",g),!a){var h=this.getLabelFunction();b.isFunction(h)&&d.write("<div class='ui-fn' name='lblfunc'>"+escape(h)+"</div>")}},h.getData=function(){return b.toArray(this._data)},h.getIdField=function(){return this._idField},h.setIdField=function(a){this._idField=a},h.getLabelField=function(){return this._labelField},h.setLabelField=function(a){this._labelField=a},h.getLabelFunction=function(){return this._labelFunction},h.setLabelFunction=function(a){this._labelFunction=a},h.getSelectedIndex=function(){if(b.isBlank(this._selectedIndex))return-1;var a=parseInt(this._selectedIndex);return isNaN(a)?-1:a>=0?a:-1},h.setSelectedIndex=function(a){this._selectedIndex=a},h.getSelectedId=function(){return this._selectedId},h.setSelectedId=function(a){this._selectedId=a},h.getSelectedData=function(){var a=this;return b.find(this.getData(),function(b,c){return a.isDataSelected(b,c)})},h.getDataLabel=function(a,b){return d.call(this,a,b)},h.isDataSelected=function(a,c){var d=this.getSelectedIndex();if(d>=0)return d===c;var e=this.getSelectedId();return!(!b.isNotNull(e)||e!=this.getDataId(a))},!a)return module.exports={HolderBase:e,HolderItems:g};var i=VRender.Component,j=function(a){},k=j.prototype=new VRender.EventEmitter;k.init=function(a,b){var c=this.$el=$(a);return c.data(i.bindName)?c.data(i.bindName):(c.data(i.bindName,this),this.options=b||{},l(c,this.options),this)},k.getIdField=function(){return this.options.idField||this.$el.attr("opt-idfield")},k.setIdField=function(a){this.options.idField=a||"",this.$el.attr("opt-idfield",this.options.idField)},k.getLabelField=function(){return this.options.labelField||this.$el.attr("opt-label")},k.setLabelField=function(a){this.options.labelField=a||"",this.$el.attr("opt-label",this.options.labelField)},k.getLabelFunction=function(){if(this.options.hasOwnProperty("labelFunction"))return this.options.labelFunction;if(this.hasOwnProperty("labelFunction"))return this.labelFunction;var a=this.$el.children(".ui-fn[name='lblfunc']").text();return b.isNotBlank(a)&&(a=new Function("var Utils=VRender.Utils;return ("+unescape(a)+");")()),this.labelFunction=a},k.setLabelFunction=function(a){this.options.labelFunction=a},k.getDataAdapter=function(){if(this.options.hasOwnProperty("dataAdapter"))return this.options.dataAdapter;if(this.options.hasOwnProperty("adapter"))return this.options.adapter;if(this.hasOwnProperty("dataAdapter"))return this.dataAdapter;var a=this.$el.children(".ui-fn[name='adapter']").text();return b.isNotBlank(a)&&(a=new Function("var Utils=VRender.Utils;return ("+unescape(a)+")")()),this.dataAdapter=a},k.setDataAdapter=function(a){this.options.dataAdapter=a},k.getItemData=function(a){var c=a.data("itemData")||a.data();return b.isEmpty(c)?null:c},k.getDataId=function(a){return c.call(this,a)},k.getDataLabel=function(a,b){return d.call(this,a,b)},k.tap=function(a,b,c,d){this.$el.tap(a,b,c,d)};var l=function(a,c){b.isNotBlank(c.id)&&a.attr("id",c.id),b.isNotBlank(c.name)&&a.attr("name",c.name);var d=c.clsname||c.className||c.clsName||c.cls;b.isNotBlank(d)&&a.addClass(d),b.isNotBlank(c.style)&&a.addClass(c.style),c.hasOwnProperty("disabled")?b.isTrue(c.disabled)&&a.addClass("disabled").attr("disabled","disabled"):c.hasOwnProperty("enabled")&&(b.isTrue(c.enabled)||a.addClass("disabled").attr("disabled","disabled"))};i.base=j,i.HolderBase=e,i.HolderItems=g}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Button){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=function(a){c.call(this,a),this.setLabel(this.options.label),this.setType(this.options.type),this.setSize(this.options.size),this.setIcon(this.options.icon),this.setLink(this.options.link),this.setStyle(this.options.style),this.setDropdownData(this.options.dropdown)},e=d.prototype=new c;if(d.innerStyles=["ui-btn-default","ui-btn-primary","ui-btn-success","ui-btn-danger","ui-btn-warn","ui-btn-info","ui-btn-link","ui-btn-text"],d.sizes=["large","big","normal","small","tiny"],e.render=function(a,d){c.render.call(this,a,d),d.addClass("ui-btn"),d.addClass(this.getStyle()),d.addClass(this.getSize());var e=a("<button class='btn'></button>").appendTo(d),f=this.getIcon();return b.isNotBlank(f)&&e.append("<img class='icon' src='"+f+"'/>"),e.append("<span class='lbl'>"+this.getLabel()+"</span>"),this},e.getLabel=function(){return b.trimToEmpty(this.b_label)},e.setLabel=function(a){this.b_label=a},e.getType=function(){return this.b_type},e.setType=function(a){this.b_type=a},e.getSize=function(){return this.b_size&&d.sizes.indexOf(this.b_size)>=0?this.b_size:null},e.setSize=function(a){this.b_size=a},e.getIcon=function(){return this.b_icon},e.setIcon=function(a){this.b_icon=a},e.getLink=function(){return this.b_link},e.setLink=function(a){this.b_link=a},e.getDropdownData=function(){return this.b_dropdown},e.setDropdownData=function(a){this.b_dropdown=a},e.isToggle=function(){return this.b_toggle},e.setToggle=function(a){this.b_toggle=a},e.getStyle=function(){var a=this.b_style;if(b.isBlank(a)){var c=this.getType();a=["ok","submit","save","primary","major"].indexOf(c)>=0?"ui-btn-primary":["danger","error"].indexOf(c)>=0?"ui-btn-danger":["success","complete","finish"].indexOf(c)>=0?"ui-btn-success":["warn","warning"].indexOf(c)>=0?"ui-btn-warn":["info","highlight"].indexOf(c)>=0?"ui-btn-info":"text"===c?"ui-btn-text":"link"===c?"ui-btn-link":"ui-btn-default"}return d.innerStyles.indexOf(a)<0&&(a="ui-btn-default "+a),a},e.setStyle=function(a){this.b_style=a},!a)return module.exports=d;var f=VRender.Component,g=f.Button=function(a,b){if(this.init(a,b)!==this)return f.get(a)};g.prototype=new f.base;g.find=function(a){return f.find(a,".ui-btn",g)},g.create=function(a){var b=f.create(a),c=new d(a).render($,b);return new g(b,a,c)},f.register(".ui-btn",g)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Checkbox){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=function(a){c.call(this,a),this.setLabel(this.options.label),this.setValue(this.options.value),this.setName(this.options.name),this.setChecked(this.options.checked)},e=d.prototype=new c;if(e.render=function(a,d){c.render.call(this,a,d),d.addClass("ui-chkbox");var e=a("<input type='checkbox'/>").appendTo(d),f=this.getValue();b.isNotNull(f)&&e.val(this.getValue()),this.isChecked()&&(d.addClass("checked"),e.attr("checked","checked"));var g=this.getLabel();b.isNotNull(g)&&d.append("<span>"+g+"</span>");var h=this.getName();return b.isNotBlank(h)&&e.attr("name",h),this},e.getLabel=function(){return this.c_label},e.setLabel=function(a){this.c_label=a},e.getValue=function(){return this.c_value},e.setValue=function(a){this.c_value=a},e.getName=function(){return this.c_name},e.setName=function(a){this.c_name=a},e.isChecked=function(){return!b.isBlank(this.c_checked)&&b.isTrue(this.c_checked)},e.setChecked=function(a){this.c_checked=a},!a)return module.exports=d;var f=VRender.Component,g=f.Checkbox=function(a,b){if(this.init(a,b)!==this)return f.get(a);this.input=this.$el.children("input");var c=this;this.input.change(function(a){return i.call(c,a)})},h=g.prototype=new f.base;g.find=function(a){return f.find(a,".ui-chkbox",g)},g.create=function(a){a=$.extend(a,{tagName:"label"});var b=f.create(a),c=new d(a).render($,b);return new g(b,a,c)},h.val=function(a){return b.isNull(a)?this.input.val():(this.input.val(a),this)},h.isChecked=function(){return this.input.isChecked()},h.setChecked=function(a){var c=!!b.isNull(a)||b.isTrue(a);this.input[0].checked=c,this.input.trigger("change")};var i=function(a){$(a.currentTarget).is(":checked")?this.$el.addClass("checked"):this.$el.removeClass("checked")};f.register(".ui-chkbox",g)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Combobox){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderItems,d=function(a){c.call(this,a),this.setwidth(this.options.width),this.setPrompt(this.options.prompt),this.setEditable(this.options.editable)},e=d.prototype=new c;e.render=function(a,b){c.render.call(this,a,b),b.addClass("ui-combobox");var d=this.getWidth();return d>0&&b.css("width",d+"px"),f.call(this,a,b),g.call(this,a,b),this},e.getWidth=function(){return parseFloat(this.c_width)||0},e.setwidth=function(a){this.c_width=a},e.getPrompt=function(){return b.isBlank(this.c_prompt)?"":this.c_prompt},e.setPrompt=function(a){this.c_prompt=a},e.isEditable=function(){return!b.isBlank(this.c_editable)&&b.isTrue(this.c_editable)},e.setEditable=function(a){this.c_editable=a};var f=function(a,c){var d=a("<div class='ipt'></div>").appendTo(c),e=a("<input type='text'/>").appendTo(d),f=this.getSelectedData();b.isNotNull(f)&&(c.addClass("has-val"),e.val(this.getDataLabel(f))),this.isEditable()?c.addClass("editable"):e.attr("readonly","readonly"),d.append("<button class='dropdownbtn'></button>"),d.append("<span class='prompt'>"+this.getPrompt()+"</span>")},g=function(b,c){if(a){var d=b.extend(this.options,{target:c});VRender.Component.DropdownList.create(d)}else{var e=require("../../../ui/component/UIDropdownList");new e(this.context,this.options).render(c)}};if(!a)return module.exports=d;var h=VRender.Component,i=h.Combobox=function(a,b){if(this.init(a,b)!==this)return h.get(a);this.dropdownList=new h.DropdownList(this.$el.children(".ui-dropdownlist"));var c=this;this.$el.tap(".ipt",function(a){k.call(c,a)}),this.$el.on("mouseenter",function(a){l.call(c,a)}),this.$el.on("mouseleave",function(a){l.call(c,a)}),this.dropdownList.on("change",function(a,b){m.call(c,a,b)}),this.$el.is(".editable")&&(this.$el.on("keydown","input",function(a){return n.call(c,a)}),this.$el.on("keyup","input",function(a){return n.call(c,a)}),this.$el.on("focusin","input",function(a){o.call(c,a)}),this.$el.on("focusout","input",function(a){o.call(c,a)}))},j=i.prototype=new h.base;i.find=function(a){return h.find(a,".ui-combobox",i)},i.create=function(a){var b=h.create(a),c=new d(a).render($,b);return new i(b,a,c)},j.getSelectedIndex=function(){return this.dropdownList.getSelectedIndex()},j.setSelectedIndex=function(a,b){this.dropdownList.setSelectedIndex(a),a=this.dropdownList.getSelectedIndex();var c=this.dropdownList.getSelectedData();p.call(this,c,a,b)},j.getSelectedId=function(){return this.dropdownList.getSelectedId()},j.setSelectedId=function(a,b){this.dropdownList.setSelectedId(a),index=this.dropdownList.getSelectedIndex();var c=this.dropdownList.getSelectedData();p.call(this,c,index,b)},j.getSelectedData=function(){return this.dropdownList.getSelectedData()},j.val=function(a){if(b.isBlank(a))return this.$el.find(".ipt > input").val();var c=this.dropdownList.matchFirst(a),d=c?c[0]:-1;d>=0?this.setSelectedIndex(d,!0):(this.setSelectedIndex(-1),this.$el.find(".ipt > input").val(a),this.$el.addClass("has-val"),this.trigger("change",null))};var k=function(a){this.$el.is(".editable")&&!$(a.target).is(".dropdownbtn")||q.call(this)},l=function(a){var b=this.$el;if("mouseenter"===a.type){var c=parseInt(b.attr("timerid"));c&&(clearTimeout(c),b.removeAttr("timerid"))}else if("mouseleave"===a.type){var c=setTimeout(function(){b.removeClass("show-dropdown")},500);b.attr("timerid",c)}},m=function(a,b){this.$el.removeClass("show-dropdown");var c=this.dropdownList.getSelectedIndex();p.call(this,b,c,!0)},n=function(a){var b=$(a.currentTarget);if("keydown"===a.type)q.call(this),this.$el.off("mouseleave");else if("keyup"===a.type){var c=b.val();if(13===a.which){var d=this.dropdownList.getSelectedIndex(),e=this.dropdownList.getSelectedData();d>=0&&b.val(this.getDataLabel(e,d)),this.$el.removeClass("show-dropdown"),d!=this._lastSelectedIndex&&(this._lastSelectedIndex=d,this.trigger("change",e))}else if(38===a.which||40===a.which){var d=this.dropdownList.getSelectedIndex();38===a.which&&d>0&&(d-=1),40===a.which&&d<this.dropdownList.length()-1&&(d+=1),this.dropdownList.setSelectedIndex(d);var e=this.dropdownList.getSelectedData();p.call(this,e,d)}else{c&&c.length>0?this.$el.addClass("has-val"):this.$el.removeClass("has-val");var f=this.dropdownList.matchFirst(c,!0);this.dropdownList.setSelectedIndex(f?f[0]:-1)}}},o=function(a){var b=$(a.currentTarget);if("focusin"===a.type)this._lastSelectedIndex=this.dropdownList.getSelectedIndex();else if("focusout"===a.type){var c=this.dropdownList.getSelectedIndex(),d=this.dropdownList.getSelectedData();c>=0&&this.getDataLabel(d,c)!=b.val()&&(this.dropdownList.setSelectedIndex(-1),d=null),this.$el.removeClass("show-dropdown");var e=this;this.$el.on("mouseleave",function(a){l.call(e,a)}),this._lastSelectedIndex!=c&&this.trigger("change",d)}},p=function(a,c,d){var e=this.$el.find(".ipt > input");e.val(this.getDataLabel(a,c)),b.isBlank(e.val())?this.$el.removeClass("has-val"):this.$el.addClass("has-val"),
b.isTrue(d)&&this.trigger("change",a)},q=function(){if(!this.$el.is(".show-dropdown")){this.$el.addClass("show-dropdown").removeClass("show-before");var a=this.$el.children(".ui-dropdownlist");$(window).height()+$("body").scrollTop()<a.offset().top+a.height()&&this.$el.addClass("show-before")}};h.register(".ui-combobox",i)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Datagrid){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d={date:"yyyy-MM-dd",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss"},e=function(a,c){return a==c||(b.isNull(a)?b.isNull(c):!b.isNull(c)&&this.getDataId(a)==this.getDataId(c))},f=function(a){if(a){var c=this;return b.map(this.$el.find(".row-item"),function(a){return c.getItemData(a)})}return b.toArray(this.getData())},g=function(a){if(a)return 0===this.$el.find(".row-item").not(".selected").length;for(var b=f.call(this,!1),c=0,d=b.length;c<d;c++)if(!h.call(this,!1,b[c],c))return!1;return!0},h=function(a,c,d){var f=this;if(a)return!!b.find(this.$el.find(".row-item.selected"),function(a){return e.call(f,c,f.getItemData(a))});var g=this.getSelectedItems();if(g)return b.index(g,function(a){return e.call(f,c,a)})>=0;var h=this.getSelectedIds();if(h){var i=this.getDataId(c);return b.index(h,function(a){return a==i})>=0}var j=this.getSelectedIndexs();return!!j&&b.index(j,function(a){return a==d})>=0},i=function(a,c,e){if(b.isBlank(c))return null;if(b.isBlank(a.name))return""+c;var f=c[a.name];if(a.format&&b.isNotBlank(f)){var g=a.type;if("localtime"===g)f=b.toLocalDateString(b.toDate(f));else if(/^date|datetime|time$/.test(g))f=b.toDate(f),f&&(f=b.toDateString(f,d[g]));else if("money"===g)f=parseFloat(f),isNaN(f)?f=null:(f=f.toFixed(2).split("."),f="<span class='val'>￥<span class='v1'>"+f[0]+"</span>.<span class='v2'>"+f[1]+"</span></span>");else if("number"===g||"num"===g)if(f=parseFloat(f),isNaN(f))f=null;else{var h=parseFloat(a.decimals);(isNaN(h)||h<0)&&(h=0),f=f.toFixed(h)}}return f},j=function(a){c.call(this,a),this.setColumns(this.options.columns),this.setIdField(this.options.idField),this.setColumnRenderer(this.options.renderer||this.options.columnRenderer),this.setRowStyleFunction(this.options.styleFunction),this.setRowDataMap(this.options.dataMapper),this.setPaginator(this.options.pager||this.options.paginator),this.setSearcher(this.options.searcher),this.options.hasOwnProperty("chkbox")&&this.setChkboxVisible(this.options.chkbox),this.options.hasOwnProperty("multi")&&this.setMultiSelected(this.options.multi),this.options.hasOwnProperty("empty")&&this.setEmptyView(this.options.empty),this.options.hasOwnProperty("showEmpty")&&this.setEmptyVisible(this.options.showEmpty),this.options.hasOwnProperty("showHeader")&&this.setHeaderVisible(this.options.showHeader),this.options.hasOwnProperty("selectedIndex")&&this.setSelectedIndexs(this.options.selectedIndex),this.options.hasOwnProperty("selectedIndexs")&&this.setSelectedIndexs(this.options.selectedIndexs),this.options.hasOwnProperty("selectedId")&&this.setSelectedIds(this.options.selectedId),this.options.hasOwnProperty("selectedIds")&&this.setSelectedIds(this.options.selectedIds),this.options.hasOwnProperty("selectedItem")&&this.setSelectedItems(this.options.selectedItem),this.options.hasOwnProperty("selectedItems")&&this.setSelectedItems(this.options.selectedItems)},k=j.prototype=new c;k.render=function(a,b){b.addClass("ui-datagrid");var c=a("<table></table>").appendTo(b);return l.call(this,a,b,c),m.call(this,a,b,c),n.call(this,a,b,this.getEmptyView()),o.call(this,a,b),this.isChkboxVisible()&&b.addClass("show-chk"),this.isMultiSelected()&&b.addClass("multiple"),this.isHeaderVisible()||b.addClass("no-head"),this},k.getColumns=function(){return b.toArray(this.d_columns)},k.setColumns=function(a){this.d_columns=a},k.isChkboxVisible=function(){return!b.isBlank(this.d_show_chkbox)&&b.isTrue(this.d_show_chkbox)},k.setChkboxVisible=function(a){this.d_show_chkbox=!!b.isBlank(a)||a},k.isMultiSelected=function(){return!b.isBlank(this.d_multiple)&&b.isTrue(this.d_multiple)},k.setMultiSelected=function(a){this.d_multiple=!!b.isBlank(a)||a},k.getSelectedIndexs=function(){return b.isBlank(this.d_selectedindexs)?null:b.toArray(this.d_selectedindexs)},k.setSelectedIndexs=function(a){this.d_selectedindexs=b.toArray(a)},k.getSelectedIds=function(){return b.isBlank(this.d_selectedids)?null:b.toArray(this.d_selectedids)},k.setSelectedIds=function(a){this.d_selectedids=b.toArray(a)},k.getSelectedItems=function(){return b.isBlank(this.d_selecteditems)?null:b.toArray(this.d_selecteditems)},k.setSelectedItems=function(a){this.d_selecteditems=b.toArray(a)},k.getIdField=function(){return this.d_idfield},k.setIdField=function(a){this.d_idfield=a},k.getEmptyText=function(){return this.d_emptytext},k.setEmptyText=function(a){this.d_emptytext=a},k.getEmptyView=function(){return this.d_emptyview},k.setEmptyView=function(a){this.d_emptyview=a},k.isEmptyVisible=function(){return!!b.isBlank(this.d_show_empty)||b.isTrue(this.d_show_empty)},k.setEmptyVisible=function(a){this.d_show_empty=!!b.isBlank(a)||a},k.isHeaderVisible=function(){return!!b.isBlank(this.d_show_header)||b.isTrue(this.d_show_header)},k.setHeaderVisible=function(a){this.d_show_header=!!b.isBlank(a)||a},k.getColumnRenderer=function(){return this.d_col_render},k.setColumnRenderer=function(a){this.d_col_render=a},k.getRowDataMap=function(){return this.d_datamap},k.setRowDataMap=function(a){this.d_datamap=a},k.getRowStyleFunction=function(){return this.d_row_style_func},k.setRowStyleFunction=function(a){this.d_row_style_func=a},k.getPaginator=function(){return this.d_pager},k.setPaginator=function(a){return this.d_pager=a},k.setSearcher=function(){return this.d_searcher},k.setSearcher=function(a){return this.d_searcher=a};var l=function(a,c,d){var e=a("<thead></thead>").appendTo(d),f=a("<tr></tr>").appendTo(e);this.isChkboxVisible()&&(f.append("<td class='col-type-chk'><span class='chkbox'></span></td>"),g.call(this,!1)&&f.addClass("selected")),b.each(this.getColumns(),function(c,d){var e=a("<td>"+(c.title||c.name)+"</td>").appendTo(f);e.addClass("col-"+(d+1)),b.isNotBlank(c.name)&&e.addClass("col-"+c.name).attr("data-name",c.name),b.isNotBlank(c.type)&&e.addClass("col-type-"+c.type).attr("data-type",c.type),b.isTrue(c.format)&&e.attr("data-format",1)})},m=function(a,c,d){var e=a("<tbody></tbody>").appendTo(d),g=this,h=f.call(this,!1),i=this.getColumns();b.each(h,function(b,c){var d=a("<tr class='row-item'></tr>").appendTo(e);p.call(g,a,d,i,b,c)}),h&&0!==h.length||c.addClass("no-data")},n=function(c,d,e){b.isBlank(e)&&b.isFunction(this.getEmptyText)&&(e=this.getEmptyText()),b.isNotBlank(e)&&(d=c("<div class='datagrid-emp'></div>").appendTo(d),"string"==typeof e?a?d.append(e):d.write(e):a&&e instanceof VRender.Component.base?e.$el&&e.$el.appendTo(d):b.isFunction(e.render)?e.render(d):d.text(e))},o=function(c,d){if(!a){var e=function(a,c){b.isFunction(c)&&d.write("<div class='ui-fn' name='"+a+"'>"+escape(c)+"</div>")};a||(e("mapper",this.getRowDataMap()),e("renderer",this.getColumnRenderer()),e("stylefn",this.getRowStyleFunction()))}},p=function(a,c,d,e,f){q.call(this,c,e,f),this.isChkboxVisible()&&c.append("<td class='col-type-chk'><span class='chkbox'></span></td>"),h.call(this,!1,e,f)&&c.addClass("selected");var g=this;b.each(d,function(b,d){var f=a("<td></td>").appendTo(c);r.call(g,a,f,b,e,d)});var i=e.__rowstyle__,j=this.getRowStyleFunction();b.isFunction(j)&&(i=j(e,f)),b.isNotBlank(i)&&c.addClass(i)},q=function(c,d,e){var f=this.getRowDataMap(),g=b.isFunction(f)?f(d,e):null;g||(g={id:this.getDataId(d)});for(var h in g)b.isNotBlank(g[h])&&c.attr("data-"+h,g[h]);a&&c.data("itemData",d)},r=function(c,d,e,f,g){d.addClass("col-"+(g+1)),b.isNotBlank(e.name)&&d.addClass("col-"+e.name);var h=null,j=this.getColumnRenderer();b.isFunction(j)&&(h=j(e.name,f,g,e)),b.isNull(h)&&(h=i.call(this,e,f,g)),h=b.isBlank(h)?"&nbsp;":h,a?d.html(h):d.write(h)};if(!a)return module.exports=j;var s=VRender.Component,t=s.Datagrid=function(a,c){if(this.init(a,c)!==this)return s.get(a);var d=this.columns=b.toArray(this.options.columns);0===d.length&&b.each(this.$el.find("thead td"),function(a,b){a.is(".col-type-chk")||d.push(a.data())});var e=this;this.$el.tap(".row-item",function(a){return v.call(e,a)}),this.$el.tap(".chkbox",function(a){return w.call(e,a)}),this.$el.tap("td.col-op > a",function(a){return x.call(e,a)})},u=t.prototype=new s.base;t.find=function(a){return s.find(a,".ui-datagrid",t)},t.create=function(a){var b=s.create(a),c=new j(a).render($,b);return new t(b,a,c)},u.getData=function(){return f.call(this,!0)},u.setData=function(a){var c=this,d=this.$el.children("table").children("tbody").empty();b.each(b.toArray(a),function(a,b){c.addItem(a,null,d)}),B.call(this)},u.getRowData=function(a){return a=$(a),a.length>0&&(a.is("tr")||(a=b.parentUntil(a,"tr",this.$el))),a.length>0?this.getItemData(a):null},u.getSelectedIndexs=function(){var a=[];return b.each(y.call(this),function(b,c){b.is(".selected")&&a.push(c)}),a},u.setSelectedIndexs=function(a,c){var d=b.map(b.toArray(a),function(a){return parseInt(a)});b.each(y.call(this),function(a,b){d.indexOf(b)>=0?a.addClass("selected"):a.removeClass("selected")}),c&&this.trigger("itemselectchange")},u.getSelectedIds=function(){var a=this;return b.map(y.call(this,".selected"),function(b,c){return a.getDataId(a.getItemData(b))})},u.setSelectedIds=function(a,c){var d=this,e=b.toArray(a);b.each(y.call(this),function(a,c){var f=d.getDataId(d.getItemData(a)),g=b.index(e,function(a){return a==f});g>=0?a.addClass("selected"):a.removeClass("selected")}),c&&this.trigger("itemselectchange")},u.getSelectedItems=function(){var a=this;return b.map(y.call(this,".selected"),function(b,c){return a.getItemData(b)})},u.setSelectedItems=function(a,c){var d=this,f=b.toArray(a);b.each(y.call(this),function(a,c){var g=d.getItemData(a),h=b.index(f,function(a){return e(a,g)});h>=0?a.addClass("selected"):a.removeClass("selected")}),c&&this.trigger("itemselectchange")},u.isMultiple=function(){return this.$el.is(".multiple")},u.isAllSelected=function(){return g.call(this,!0)},u.setEmptyView=function(a){this.$el.children(".datagrid-emp").remove(),n.call(this,$,this.$el,a)},u.isRowSelectable=function(){return!!b.isNull(this.rowSelectable)||b.isTrue(this.rowSelectable)},u.setRowSelectable=function(a){this.rowSelectable=a},u.getItemIndex=function(a){var c=this;return b.index(y.call(this),function(b,d){var f=c.getItemData(b);return e(a,f)})},u.getColumnName=function(a){return a=parseInt(a),a>=0&&a<this.columns.length?this.columns[a].name:null},u.addItem=function(a,b,d){d=d||this.$el.children("table").children("tbody"),a=c.doAdapter.call(this,a);var e=$("<tr class='row-item'></tr>").appendTo(d);if(p.call(this,$,e,this.columns,a,b),b=parseInt(b),!isNaN(b)&&b>=0){var f=y.call(this,null,d);b<f.length-1&&f.eq(b).before(e.detach())}return this.$el.removeClass("no-data"),C.call(this),e},u.updateItem=function(a,b){if(b=parseInt(b),isNaN&&(b=this.getItemIndex(a)),!isNaN(b)&&b>=0){var c=y.call(this);if(b<c.length){var d=this.removeItemAt(b),e=this.addItem(a,b);return d.is(".selected")&&e.addClass("selected"),[e,d]}}return null},u.removeItem=function(a){for(var b=y.call(this),c=0,d=b.length;c<d;c++){var f=b.eq(c);if(e(a,this.getItemData(f)))return f.remove(),B.call(this),C.call(this),f}return null},u.removeItemAt=function(a){if(a=parseInt(a),!isNaN(a)&&a>=0){var b=y.call(this).eq(a).remove();if(b&&b.length>0)return B.call(this),C.call(this),b}return null},u.addOrUpdateItem=function(a){var b=this.getItemIndex(a);b>=0?this.updateItem(a,b):this.addItem(a)},u.getRowDataMap=function(){return z.call(this,"dataMapper","mapper")},u.setRowDataMap=function(a){this.dataMapper=a,this.options.dataMapper=null},u.getColumnRenderer=function(){return this.options.hasOwnProperty("renderer")?this.options.renderer:z.call(this,"columnRenderer","renderer")},u.setColumnRenderer=function(a){this.columnRenderer=a,this.options.columnRenderer=null,this.options.renderer=null},u.getRowStyleFunction=function(){return z.call(this,"styleFunction","stylefn")},u.setRowStyleFunction=function(a){this.styleFunction=a,this.options.styleFunction=null};var v=function(a){var c=$(a.currentTarget),d=b.parentUntil(a.target,"td","tr"),e=!1;if(this.isRowSelectable()){var f=c.addClass("selected").siblings(".selected");f.length>0&&(f.removeClass("selected"),e=!0);var g=this.$el.children("table").children("thead").children("tr");A(g,this.isAllSelected())}this.trigger("itemclick",this.getItemData(c),c.index(),d.index()),e&&this.trigger("itemselectchange")},w=function(a){var b=$(a.currentTarget),c=b.parent().parent().toggleClass("selected");if(c.parent().is("thead"))A(y.call(this),c.is(".selected"));else if(this.isMultiple()){var d=this.$el.children("table").children("thead").children("tr");A(d,this.isAllSelected())}else c.siblings().removeClass("selected");return this.trigger("itemselectchange"),!1},x=function(a){var b=$(a.currentTarget),c=b.parent().parent(),d=this.getItemData(c),e=b.attr("name")||b.data("name")||"";this.trigger("oper",e,d,c)},y=function(a,c){c=c||this.$el.children("table").children("tbody");var d=c.children(".row-item");return b.isBlank(a)?d:d.filter(a)},z=function(a,b){if(this.options.hasOwnProperty(a))return this.options[a];if(this.hasOwnProperty(a))return this[a];this.$el.children(".ui-fn[name='"+b+"']").text();return func&&(func=new Function("var Utils=VRender.Utils;return ("+unescape(func)+");")()),this[a]=func},A=function(a,b){b?a.addClass("selected"):a.removeClass("selected")},B=function(){var a=y.call(this);a&&a.length>0?this.$el.removeClass("no-data"):this.$el.addClass("no-data")},C=function(){var a=this.$el.children("table").children("thead").children("tr");A(a,this.isAllSelected())};s.register(".ui-datagrid",t)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.DatePicker){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=["一","二","三","四","五","六","七","八","九","十","十一","十二"],e=function(a){if(a instanceof Date){var b=a.getFullYear()+"年";return b+=" "+d[a.getMonth()]+"月"}return null},f=function(a){c.call(this,a),this.setDate(this.options.date),this.setMinDate(this.options.min),this.setMaxDate(this.options.max)},g=f.prototype=new c;g.render=function(a,c){c.addClass("ui-datepicker");var d=this.getDate()||new Date,f=a("<header></header>").appendTo(c);f.append("<label>"+e(d)+"</label>"),f.append("<button class='prev'></button><button class='next'></button>");var g=a("<table></table>").appendTo(c);g.append("<thead><tr><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th><th>日</th></tr></thead>");var i=a("<tbody></tbody>").appendTo(g);h.call(this,a,c,i,d);var j=this.getDate();j&&c.attr("data-dt",b.toDateString(j,"yyyy/MM/dd"));var k=this.getMinDate();k&&c.attr("data-min",b.toDateString(k,"yyyy/MM/dd"));var l=this.getMaxDate();return l&&c.attr("data-max",b.toDateString(l,"yyyy/MM/dd")),this},g.getDate=function(){return b.isBlank(this.d_date)?null:b.toDate(this.d_date)},g.setDate=function(a){this.d_date=a},g.getMinDate=function(){return b.isBlank(this.d_min)?null:b.toDate(this.d_min)},g.setMinDate=function(a){this.d_min=a},g.getMaxDate=function(){return b.isBlank(this.d_max)?null:b.toDate(this.d_max)},g.setMaxDate=function(a){this.d_max=a};var h=function(a,b,c,d){var e=d.getFullYear(),f=d.getMonth();b.attr("data-y",e).attr("data-m",f);var g=new Date(e,f,1),h=g.getDay();g.setDate(h?2-h:-5);var i=new Date,j=i.getFullYear(),k=i.getMonth(),l=i.getDate(),m=1e4*j+100*k+l,n=this.getDate(),o=0;if(n){var p=n.getFullYear(),q=n.getMonth(),r=n.getDate();o=1e4*p+100*q+r}var s=this.getMinDate(),t=0;if(s){var u=s.getFullYear(),v=s.getMonth(),w=s.getDate();t=1e4*u+100*v+w}var x=this.getMaxDate(),y=21001231;if(x){var z=x.getFullYear(),A=x.getMonth(),B=x.getDate();y=1e4*z+100*A+B}for(;;){for(var C=a("<tr></tr>").appendTo(c),D=0;D<7;D++){var E=g.getFullYear(),F=g.getMonth(),G=g.getDate(),H=1e4*E+100*F+G,I=a("<td></td>").appendTo(C).append("<span>"+G+"</span>");I.attr("data-dt",E+"/"+(F+1)+"/"+G),H===m&&I.addClass("today"),H===o&&I.addClass("selected"),(F!==f||H<t||H>y)&&I.addClass("disabled"),g.setDate(G+1)}if(g.getMonth()>f||g.getFullYear()>e)break}};if(!a)return module.exports=f;var i=VRender.Component,j=i.DatePicker=function(a,b){if(this.init(a,b)!==this)return i.get(a);var c=this;this.$el.tap("header > button",function(a){l.call(c,a)}),this.$el.tap("tbody td",function(a){m.call(c,a)})},k=j.prototype=new i.base;j.find=function(a){return i.find(a,".ui-datepicker",j)},j.create=function(a){var b=i.create(a),c=new f(a).render($,b);return new j(b,a,c)},k.getDate=function(){return b.toDate(this.$el.attr("data-dt"))},k.setDate=function(a,c){var d=b.toDate(a);d?(this.$el.attr("data-dt",b.toDateString(d,"yyyy/MM/dd")),n.call(this,d)):(this.$el.removeAttr("data-dt"),this.$el.find("td.selected").removeClass("selected")),c&&this.trigger("change",this.getDate())},k.getMinDate=function(){return b.toDate(this.$el.attr("data-min"))},k.setMinDate=function(a){var c=b.toDate(a);c?this.$el.attr("data-min",b.toDateString(c,"yyyy/MM/dd")):this.$el.removeAttr("data-min"),n.call(this)},k.getMaxDate=function(){return b.toDate(this.$el.attr("data-max"))},k.setMaxDate=function(a){var c=b.toDate(a);c?this.$el.attr("data-max",b.toDateString(c,"yyyy/MM/dd")):this.$el.removeAttr("data-max"),n.call(this)};var l=function(a){var b=parseInt(this.$el.attr("data-y")),c=parseInt(this.$el.attr("data-m")),d=new Date(b,c,1);d.setMonth(d.getMonth()+($(a.currentTarget).is(".prev")?-1:1)),n.call(this,d)},m=function(a){var b=$(a.currentTarget);b.is(".disabled")||b.is(".selected")||(this.$el.find("tbody td.selected").removeClass("selected"),b.addClass("selected"),this.$el.attr("data-dt",b.attr("data-dt")),this.trigger("change",this.getDate()))},n=function(a){if(!a){var b=parseInt(this.$el.attr("data-y")),c=parseInt(this.$el.attr("data-m"));a=new Date(b,c,1)}this.$el.find("header > label").text(e(a));var d=this.$el.find("tbody").empty();h.call(this,$,this.$el,d,a)};i.register(".ui-datepicker",j)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.DropdownList){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderItems,d=function(a){c.call(this,a)},e=d.prototype=new c;e.render=function(a,b){c.render.call(this,a,b),b.addClass("ui-dropdownlist no-select");var d=a("<ul></ul>").appendTo(b);return f.call(this,a,d),this};var f=function(c,d){var e=this,f=0,g=!1,h=function(){d.append("<li class='sep'></li>")},i=function(b){var g=c("<li class='item'></li>").appendTo(d);g.text(e.getDataLabel(b,f)),e.isDataSelected(b,f)&&g.addClass("selected"),g.attr(e.getMapData(b)),a&&g.data("itemData",b),f+=1};b.each(b.toArray(this.getData()),function(a){b.isBlank(a)||("string"==typeof a&&(a={label:a}),b.isArray(a)?(f>0&&h(),b.each(a,function(a){b.isBlank(a)||("string"==typeof a&&(a={label:a}),i(a))}),g=!0):(g&&h(),i(a),g=!1))})};if(!a)return module.exports=d;var g=VRender.Component,h=g.DropdownList=function(a,b){if(this.init(a,b)!==this)return g.get(a);var c=this;this.$el.tap("li.item",function(a){j.call(c,a)})},i=h.prototype=new g.base;h.find=function(a){return g.find(a,".ui-dropdownlist",h)},h.create=function(a){var b=g.create(a),c=new d(a).render($,b);return new h(b,a,c)},i.getSelectedData=function(){var a=this.$el.find("li.item.selected");return a&&a.length>0?this.getItemData(a):null},i.getSelectedIndex=function(){return b.index(this.$el.find("li.item"),function(a){return a.is(".selected")})},i.setSelectedIndex=function(a,c){a=parseInt(a);var d=this.$el.find("li.item").removeClass("selected");!isNaN(a)&&a>=0&&a<d.length&&d.eq(a).addClass("selected"),b.isTrue(c)&&this.trigger("change",this.getSelectedData())},i.getSelectedId=function(){var a=this.getSelectedData();return a?this.getDataId(a):null},i.setSelectedId=function(a,c){if(b.isNull(a))this.setSelectedIndex(-1,c);else{var d=this,e=this.$el.find("li.item").removeClass("selected");b.find(e,function(b){var c=d.getItemData(b);if(c===a||d.getDataId(c)==a)return b.addClass("selected"),!0});b.isTrue(c)&&this.trigger("change",this.getSelectedData())}},i.length=function(){return this.$el.find("li.item").length},i.matchFirst=function(a,c,d){if(b.isNotBlank(a))for(var e=this.$el.find("li.item"),f=0,g=e.length;f<g;f++){var h=this.getItemData(e.eq(f));if(k.call(this,h,f,a,c,d))return[f,h]}return null};var j=function(a){var b=$(a.currentTarget);b.is(".selected")||(b.addClass("selected").siblings().removeClass("selected"),this.trigger("change",this.getSelectedData()))},k=function(a,b,c,d,e){var f=this.getDataLabel(a,b);if(c==f)return!0;if(d&&c.length<f.length){var b=f.indexOf(c);if(b>=0)return!e||0===b}return!1};g.register(".ui-dropdownlist",h)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Paginator){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=function(a){c.call(this,a),this.setTotalCount(this.options.total),this.setPageSize(this.options.size),this.setPageNo(this.options.page),this.setStatus(this.options.status)},e=d.prototype=new c;e.render=function(a,b){b.addClass("ui-paginator");var c=this.getPageNo(),d=this.getPageSize(),e=this.getPageCount(),h=this.getTotalCount();b.attr("data-total",h),b.attr("data-no",c),b.attr("data-size",d),b.attr("data-pages",e);var i=a("<div class='pages'></div>").appendTo(b);return i.append("<button class='prev'>&lt;</button>"),i.append("<span class='page'><span class='pageno'>"+c+"</span>/<span class='pagecount'>"+e+"</span></span>"),i.append("<button class='next'>&gt;</button>"),i.append("<input class='pageipt'/>"),i.append("<button class='goto'>跳转</button>"),f.call(this,a,b,c,d,e,h),g.call(this,b,c,d,e),this},e.getTotalCount=function(){var a=parseInt(this.p_totalcount)||0;return a>0?a:0},e.setTotalCount=function(a){this.p_totalcount=a},e.getPageNo=function(){var a=parseInt(this.p_pageno)||0;if(a<=1)return 1;var b=this.getPageCount();return a<b?a:b},e.setPageNo=function(a){this.p_pageno=a},e.getPageSize=function(){var a=parseInt(this.p_pagesize)||0;return a>0?a:20},e.setPageSize=function(a){this.p_pagesize=a},e.getStatus=function(){return this.p_status},e.setStatus=function(a){this.p_status=a},e.setTitle=function(a){this.setStatus(a)},e.getPageCount=function(){return Math.ceil(this.getTotalCount()/this.getPageSize())||1};var f=function(c,d,e,f,g,h){var i=this.getStatus();if(i===!0&&(i="共{totalCount}条"),!b.isBlank(i)){var j=Math.min((e-1)*f+1,h),k=Math.min(e*f,h),l=i.replace(/\{pageNo\}/g,e);l=l.replace(/\{pageSize\}/g,f),l=l.replace(/\{pageCount\}/g,g),l=l.replace(/\{totalCount\}/g,h),l=l.replace(/\{pageStart\}/g,j),l=l.replace(/\{pageEnd\}/g,k),a&&d.children(".status").remove(),d.append("<div class='status'>"+l+"</div>"),a||c("<div class='status-src'></div>").appendTo(d).text(i)}},g=function(a,b,c,d){a.removeClass("page-first").removeClass("page-last");var e=a.find(".pages > .prev").removeClass("disabled"),f=a.find(".pages > .next").removeClass("disabled");1===b&&(a.addClass("page-first"),e.addClass("disabled")),b===d&&(a.addClass("page-last"),f.addClass("disabled"))};if(!a)return module.exports=d;var h=VRender.Component,i=h.Paginator=function(a,b){if(this.init(a,b)!==this)return h.get(a);var c=this;this.$el.tap("button",function(a){return k.call(c,a)}),this.$el.on("keydown","input",function(a){return l.call(c,a)}),this.$el.on("focusout","input",function(a){return m.call(c,a)})},j=i.prototype=new h.base;i.find=function(a){return h.find(a,".ui-paginator",i)},i.create=function(a){var b=h.create(a),c=new d(a).render($,b);return new i(b,a,c)},j.set=function(a,b,c,d){n.call(this,a,b,c,d)},j.getPageNo=function(){var a=parseInt(this.$el.attr("data-no"))||0;if(a<=1)return 1;var b=this.getPageCount();return a<b?a:b},j.setPageNo=function(a,b){console.log("setPageNo",a),n.call(this,null,a,null,b)},j.getPageSize=function(){var a=parseInt(this.$el.attr("data-size"))||0;return a>0?a:20},j.setPageSize=function(a,b){n.call(this,null,null,a,b)},j.getTotalCount=function(){var a=parseInt(this.$el.attr("data-total"))||0;return a>0?a:0},j.setTotalCount=function(a,b){n.call(this,a,null,null,b)},j.getPageCount=function(){return Math.ceil(this.getTotalCount()/this.getPageSize())||1},j.getStatus=function(){return this.$el.children(".status-src").text()},j.setStatus=function(a){this.$el.children(".status-src").remove(),b.isNotBlank(a)&&$("<div class='status-src'></div>").appendTo(this.$el).text(a),o.call(this,this.getPageNo(),this.getPageSize(),this.getPageCount,this.getTotalCount())};var k=function(a){var b=$(a.currentTarget);if(b.is(".disabled"))return!1;var c=this.getPageNo();if(b.is(".prev"))c-=1;else if(b.is(".next"))c+=1;else if(b.is(".goto")){var d=this.$el.find(".pageipt");c=parseInt(d.val()),d.val("")}c>=0&&c<=this.getPageCount()&&(this.trigger("onpage",c,this.getPageSize()),this.hasListen("onpage")||this.setPageNo(c))},l=function(a){if(13===a.which){var c=this;return setTimeout(function(){c.$el.find("button.goto").trigger("click")},0),!1}return!!b.isControlKey(a)||b.isNumberKey(a)},m=function(a){var b=$(a.currentTarget);b.val(parseInt(b.val())||"")},n=function(a,b,c,d){var e=parseInt(a);e=isNaN(e)?this.getTotalCount():e>0?e:0;var f=parseInt(b);f=isNaN(f)?this.getPageNo():f>0?f:1;var h=parseInt(c);h=isNaN(h)?this.getPageSize():h>0?h:20;var i=Math.ceil(e/h)||1;f=Math.min(f,i),this.$el.attr("data-total",e),this.$el.attr("data-no",f),this.$el.attr("data-size",h),this.$el.attr("data-pages",i),this.$el.find(".pages .pageno").text(f),this.$el.find(".pages .pagecount").text(i),o.call(this,f,h,i,e),g.call(this,this.$el,f,h,i),d&&this.trigger("onpage",f,h)},o=function(a,b,c,d){f.call(this,$,this.$el,a,b,c,d)};h.register(".ui-paginator",i)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.Radiobox){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=function(a){c.call(this,a),this.setLabel(this.options.label),this.setValue(this.options.value),this.setName(this.options.name),this.setChecked(this.options.checked)},e=d.prototype=new c;if(e.render=function(a,d){c.render.call(this,a,d),d.addClass("ui-radbox");var e=a("<input type='radio'/>").appendTo(d),f=this.getValue();b.isNotNull(f)&&e.val(this.getValue()),this.isChecked()&&(d.addClass("checked"),e.attr("checked","checked"));var g=this.getLabel();b.isNotNull(g)&&d.append("<span>"+g+"</span>");var h=this.getName();return b.isNotBlank(h)&&e.attr("name",h),this},e.getLabel=function(){return this.r_label},e.setLabel=function(a){this.r_label=a},e.getValue=function(){return this.r_value},e.setValue=function(a){this.r_value=a},e.getName=function(){return this.r_name},e.setName=function(a){this.r_name=a},e.isChecked=function(){return!b.isBlank(this.r_checked)&&b.isTrue(this.r_checked)},e.setChecked=function(a){this.r_checked=a},!a)return module.exports=d;var f=VRender.Component,g=f.Radiobox=function(a,b){if(this.init(a,b)!==this)return f.get(a);this.input=this.$el.children("input");var c=this;this.input.change(function(a){i.call(c,a)}),this.input.is(":checked")&&this.input.trigger("change")},h=g.prototype=new f.base;g.find=function(a){return f.find(a,".ui-radbox",g)},g.create=function(a){a=$.extend(a,{tagName:"label"});var b=f.create(a),c=new d(a).render($,b);return new g(b,a,c)},h.val=function(a){return b.isNull(a)?this.input.val():(this.input.val(a),this)},h.isChecked=function(){return this.input.is(":checked")},h.setChecked=function(a){var c=!!b.isNull(a)||b.isTrue(a);this.input[0].checked=c,this.input.trigger("change")};var i=function(a){var c=$(a.currentTarget);if(c.is(":checked")){c.parent().addClass("checked");var d=c.attr("name");if(b.isNotBlank(d)){var e=$("input[name='"+d+"']").not(c);e.parent().removeClass("checked")}}else c.parent().removeClass("checked")};f.register(".ui-radbox",g)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.RadioGroup){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderItems,d=1,e=function(a){c.call(this,a),this.radioGroupId=b.randomTxt(3)+d++},f=e.prototype=new c;f.render=function(a,d){c.render.call(this,a,d),d.addClass(".ui-radgrp");var e=this;return b.each(b.toArray(this.getData()),function(c,f){b.isNull(c)||("string"==typeof c&&(c={label:c}),g.call(e,a,d,c,f))}),this};var g=function(b,c,d,e){var f={};if(f.name="radgrp-"+this.radioGroupId,f.label=this.getDataLabel(d,e),f.value=this.getDataId(d),f.checked=this.isDataSelected(d,e),a)f.target=c,VRender.Component.Radiobox.create(f);else{var g=require("../../../ui/component/UIRadiobox");new g(this.context,f).render(c)}};if(!a)return module.exports=e;var h=VRender.Component,i=h.RadioGroup=function(a,b){if(this.init(a,b)!==this)return h.get(a)},j=i.prototype=new h.base;i.find=function(a){return h.find(a,".ui-radgrp",i)},i.create=function(a){var b=h.create(a),c=new e(a).render($,b);return new i(b,a,c)},j.getSelectedIndex=function(){var a=this.$el.find("input:checked");return a&&a.length>0?a.parent().index():-1},j.setSelectedIndex=function(a){a=parseInt(a);var b=this.$el.children();if(!isNaN(a)&&a>=0&&a<b.length){var c=b.eq(a).find("input");c[0].checked=!0,c.trigger("change")}},j.getSelectedId=function(){var a=this.$el.find("input:checked");return a&&a.length>0?a.val():null},j.setSelectedId=function(a){for(var b=this.$el.children(),c=0,d=b.length;c<d;c++){var e=b.eq(c).find("input");if(e.val()==a)return e[0].checked=!0,void e.trigger("change")}},h.register(".ui-radgrp",i)}}("undefined"!=typeof VRender),function(a){if(!a||!VRender.Component.TextView){var b=a?VRender.Utils:require(__vrender__).Utils,c=(a?VRender.Component:require("./base")).HolderBase,d=function(a){c.call(this,a),this.setValue(this.options.value),this.setPrompt(this.options.prompt),this.setDataType(this.options.type),this.setDescription(this.options.desc),this.setTips(this.options.tips),this.setWidth(this.options.width),this.setEmptyMsg(this.options.empty),this.setErrorMsg(this.options.errmsg),this.setDecimals(this.options.decimals),this.setMinValue(this.options.min),this.setMaxValue(this.options.max),this.setMaxSize(this.options.maxSize),this.options.hasOwnProperty("readonly")&&this.setReadonly(this.options.readonly),this.options.hasOwnProperty("required")&&this.setRequired(this.options.required),this.options.hasOwnProperty("multi")&&this.setMulitline(this.options.multi),this.options.hasOwnProperty("displayAsPwd")&&this.setDisplayAsPassword(this.options.displayAsPwd)},e=d.prototype=new c;if(e.render=function(a,d){c.render.call(this,a,d),d.addClass("ui-textview");var e=(this.isDisplayAsPassword(),a("<div class='ipt'></div>").appendTo(d)),f=this.isMulitline(),g=a(f?"<textarea></textarea>":"<input type='text'/>").appendTo(e);f?d.addClass("multi"):e.append("<span class='clear'></span>");var h=this.getValue(),i=this.getDataType();if(b.isNotBlank(i)&&(/email|password|tel|url|number/.test(i)&&g.attr("type",i),d.attr("data-type",i),/number|num/.test(i))){var j=this.getDecimals();d.attr("data-decimal",j);var k=this.getMinValue(),l=this.getMaxValue();isNaN(k)||d.attr("data-min",k),isNaN(l)||d.attr("data-max",l),b.isNotBlank(h)&&(h=parseFloat(h),h=isNaN(h)?"":h.toFixed(j),isNaN(h)||(h<k&&(h=k),h>l&&(h=l)))}b.isNotBlank(h)&&(g.val(h),d.addClass("has-val"));var m=this.getWidth();m>0&&e.css("width",m+"px"),this.isReadonly()&&(d.addClass("readonly"),g.attr("readonly","readonly")),this.isRequired()&&d.attr("required","required");var n=this.getMaxSize();if(n>0){d.addClass("show-size").attr("data-size",n);var o=b.trimToEmpty(h).length;e.append("<span class='size'>"+o+"/"+n+"</span>")}var p=this.getPrompt();b.isNotBlank(p)&&e.append("<span class='prompt'>"+p+"</span>");var q=this.getTips();b.isNotBlank(q)&&e.append("<span class='tips'>"+q+"</span>");var r=this.getDescription();return b.isNotBlank(r)&&d.append("<div class='desc'>"+r+"</div>"),d.attr("data-empty",this.getEmptyMsg()),d.attr("data-errmsg",this.getErrorMsg()),this.isDisplayAsPassword()&&d.addClass("display-as-pwd"),
this},e.getValue=function(){return this.t_value},e.setValue=function(a){this.t_value=a},e.getPrompt=function(){return this.t_prompt},e.setPrompt=function(a){this.t_prompt=a},e.getDataType=function(){return"int"===this.t_datatype?"number":this.t_datatype},e.setDataType=function(a){this.t_datatype=a},e.getDescription=function(){return this.t_description},e.setDescription=function(a){this.t_description=a},e.getTips=function(){return this.t_tips},e.setTips=function(a){this.t_tips=a},e.getWidth=function(){return parseFloat(this.t_width)||0},e.setWidth=function(a){this.t_width=a},e.isReadonly=function(){return!!this.hasOwnProperty("t_readonly")&&b.isTrue(this.t_readonly)},e.setReadonly=function(a){this.t_readonly=a},e.isRequired=function(){return!!this.hasOwnProperty("t_required")&&b.isTrue(this.t_required)},e.setRequired=function(a){this.t_required=a},e.getEmptyMsg=function(){return this.t_emptymsg},e.setEmptyMsg=function(a){this.t_emptymsg=a},e.getErrorMsg=function(){return this.t_errormsg},e.setErrorMsg=function(a){this.t_errormsg=a},e.getDecimals=function(){return"int"===this.t_datatype?0:this.isDisplayAsPassword()?0:isNaN(this.t_decimals)?2:parseInt(this.t_decimals)||0},e.setDecimals=function(a){this.t_decimals=a},e.getMinValue=function(){return parseFloat(this.t_minvalue)},e.setMinValue=function(a){this.t_minvalue=a},e.getMaxValue=function(){return parseFloat(this.t_maxvalue)},e.setMaxValue=function(a){this.t_maxvalue=a},e.getMaxSize=function(){return parseInt(this.t_maxsize)||0},e.setMaxSize=function(a){this.t_maxsize=a},e.isMulitline=function(){return!!this.hasOwnProperty("t_mulit")&&b.isTrue(this.t_mulit)},e.setMulitline=function(a){this.t_mulit=a},e.isDisplayAsPassword=function(){return!!this.hasOwnProperty("t_displayAsPwd")&&b.isTrue(this.t_displayAsPwd)},e.setDisplayAsPassword=function(a){this.t_displayAsPwd=a},!a)return module.exports=d;var f=VRender.Component,g=f.TextView=function(a,b,c){if(this.init(a,b)!==this)return f.get(a);this.holder=c,this.input=this.$el.find("input, textarea"),this.maxSize=parseInt(this.$el.attr("data-size"))||0;var d=this;this.input.on("focusin",function(a){return k.call(d,a)}),this.input.on("focusout",function(a){return l.call(d,a)}),this.input.on("keydown",function(a){return i.call(d,a)}),this.input.on("keyup",function(a){return j.call(d,a)}),this.$el.on("click",".clear",function(a){return m.call(d,a)})},h=g.prototype=new f.base;g.find=function(a){return f.find(a,".ui-textview",g)},g.create=function(a){var b=f.create(a),c=new d(a).render($,b);return new g(b,a,c)},h.val=function(a){return b.isNotNull(a)&&(this.input.val(a),this.showError(!1),a.length>0?this.$el.addClass("has-val"):this.$el.removeClass("has-val"),this.maxSize>0&&this.$el.find(".ipt > .size").text(a.length+"/"+this.maxSize)),this.input.val()},h.setTips=function(a){var c=this.$el.find(".ipt > .tips");c&&c.length>0?c.html(a):b.isNotBlank(a)&&this.$el.children(".ipt").append("<span class='tips'>"+a+"</span>")},h.setDescription=function(a){var c=this.$el.children(".desc");c&&c.length>0?c.html(a):b.isNotBlank(a)&&this.$el.append("<div class='desc'>"+a+"</div>")},h.showError=function(a){if(this.$el.removeClass("show-error").find(".errmsg").remove(),a&&(this.$el.addClass("show-error"),"string"==typeof a)){var b=$("<div class='errmsg'></div>").appendTo(this.$el);b.text(a).css("top",this.$el.children(".ipt").height()+8)}};var i=function(a){if(this.showError(!1),b.isControlKey(a))return!0;var c=this.input.val()||"",d=this.$el.attr("data-type")||"text";if("number"===d||"num"===d){if(!n(a,c))return!1}else if("tel"===d||"mobile"===d||"phone"===d){if(!/[0-9]|\-/.test(a.key))return!1;if("-"===a.key&&"mobile"===d)return!1}else if("text"===d&&this.maxSize>0&&c.length>=this.maxSize)return!1;this.$el.addClass("has-val")},j=function(a){var b=this.input.val()||"";if(0===b.length&&this.$el.removeClass("has-val"),this.maxSize>0&&this.$el.find(".ipt > .size").text(b.length+"/"+this.maxSize),13===a.which){var c=this;setTimeout(function(){c.input.focusout(),c.trigger("enter",b)})}},k=function(a){var b=this,c=this.input.val();this._changeTimer=setInterval(function(){var a=b.input.val();a!=c&&(c=a,b.trigger("change",a))},100)},l=function(a){var c=this.input.val()||"";if(0===c.length)"required"===this.$el.attr("required")&&this.showError(this.$el.attr("data-empty")||"输入框不能为空");else{var d=this.$el.attr("data-type")||"text";if("number"===d||"num"===d)if(isNaN(c))this.showError("数据格式不正确");else{var e=parseFloat(c),f=parseFloat(this.$el.attr("data-min"));!isNaN(f)&&f>e&&this.showError("数据不正确，请输入大于等于 "+f+" 的值");var g=parseFloat(this.$el.attr("data-max"));!isNaN(g)&&g<e&&this.showError("数据不正确，请输入小于等于 "+g+" 的值");var h=parseFloat(this.$el.attr("data-decimal"))||0;h>0&&this.input.val(e.toFixed(h))}else"tel"===d?b.isMobile(c)||b.isPhone(c)||this.showError("手机或电话号码不正确"):"text"===d?this.maxSize>0&&this.maxSize<c.length&&this.showError("输入内容太长，允许最大长度为："+this.maxSize):"email"===d?b.isEmail(c)||this.showError("Email格式不正确，请重新输入"):"mobile"===d?b.isMobile(c)||this.showError("手机号码不正确，必须是1开头的11位数字"):"phone"===d?b.isPhone(c)||this.showError("电话号码不正确"):"url"===d&&(b.isUrl(c)||this.showError("url格式不正确"))}if(this._changeTimer){var i=this._changeTimer;this._changeTimer=null,setTimeout(function(){clearInterval(i)},100)}},m=function(a){this.val(""),this.trigger("change","");var b=this;setTimeout(function(){b.input.focus()},0)},n=function(a,b){return!!/[0-9]/.test(a.key)||("-"===a.key?!/\-/.test(b):"."===a.key&&!/\./.test(b))};f.register(".ui-textview",g)}}("undefined"!=typeof VRender);