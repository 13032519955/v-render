!function(){if(!window.VRender){var a=window.VRender=function(){};a.ENV={},a.event_defined="vrender_defined",a.event_statepush="vrender_statepush",a.event_statereplace="vrender_statereplace",a.event_statepop="vrender_statepop",a.event_routerbefore="vrender_router_before",a.event_routerchange="vrender_router_change";var b=!1,c={},d={},e=[],f=0,g=a.Utils=function(){};window.define=function(d,e,f){if(g.isFunction(d)?(f=d,e=null,d=null):g.isArray(d)?(f=e,e=d,d=null):g.isFunction(e)&&(f=e,e=null),g.isFunction(f)){if(g.isBlank(d)&&(d=g.randomTxt(32)),i(d))return void(g.isFunction(c[d])&&c[d]($,a,g));b?h(d,f,e):(a.cacheDefine||(a.cacheDefine={}),a.cacheDefine[d]={definition:f,deps:e})}};var h=function(b,d,e){e=g.toArray(e);var f=function(){g.isFunction(d)&&(d=d($,a,g)||d),c[b]=d,a.trigger(a.event_defined,b,d)};if(e.length>0){var h=function(){return!g.find(e,function(a){return!i(a)})};h()?f():a.on(a.event_defined,function(){h()&&(a.off(a.event_defined,arguments.callee),f())})}else f()},i=function(a){return c.hasOwnProperty(a)};window.requirejs=function(b,d){if(c.hasOwnProperty(b))return g.isFunction(d)&&d(c[b]),c[b];a.on(a.event_defined,function(c,e){b===c&&(a.off(a.event_defined,arguments.callee),g.isFunction(d)&&d(e))})},a.navigate=function(b,c){if(g.isNotBlank(b)){var d={router:b,replace:!1,trigger:!0,animate:!1};c&&(d=$.extend(d,c)),a.trigger(a.event_routerbefore,d),!0!==d.isDefaultPrevented&&(g.isTrue(d.replace)?window.location.replace(b):window.location=b)}},a.require=function(a,b){g.isFunction(b)&&(g.isBlank(a)?b(!1,null):m(a,null,function(a,c,d,e){b(d,e)}))},a.fetch=function(a,b,c,d){j("GET",a,b,c,d)},a.post=function(a,b,c,d){j("POST",a,b,c,d)};var j=function(b,c,d,e,f){if(g.isFunction(d)&&(f=e,e=d,d=null),g.isFunction(e)||(e=function(){}),g.isBlank(c))return e("服务请求失败：url不能为空"),!1;if(g.isNotBlank(d)){var h={};for(var i in d)g.isNotNull(d[i])&&(h[i]=d[i]);d=h}return/^(\/|http)/.test(c)||(c="/api?n="+c,d=g.isBlank(d)?null:{data:JSON.stringify(d)},b="POST"),"GET"===b&&g.isNotBlank(d)&&(c+=(c.indexOf("?")<0?"?":"&")+$.param(d),d=null),$.ajax({type:b,cache:!1,url:c,dataType:"json",data:d,success:function(b){if(b&&b.hasOwnProperty("code"))if(0===b.code)e(!1,b.data);else{console.error(b);var c=b.hasOwnProperty("msg")?b.msg:b;!f&&g.isFunction(a.onAjaxError)&&a.onAjaxError(c||""),e(c||!0,b)}else e(!1,b)},error:function(b){var c=b.responseText||!0;if(401===b.status)c="请登录";else if(404===b.status)c="请求错误，请稍候重试..";else if(500===b.status){try{c=JSON.parse(c)}catch(b){}c="服务器错误，请重试. "+(c&&c.hasOwnProperty("msg")?c.msg:c)}!f&&g.isFunction(a.onAjaxError)&&a.onAjaxError(c,b),e(c)}})};a.load=function(a,b,c){if(g.isNull(b)&&g.isNull(c)&&(b=a,a=null),g.isFunction(b)&&(c=b,b=a,a=null),a&&"string"==typeof a&&(a=$(a)),b=g.toArray(b),0===b.length)g.isFunction(c)&&c(null);else{var d=b.length,e=[],f=function(a,b,f,h){!f&&h&&g.pushAll(e,h),(d-=1)<=0&&g.isFunction(c)&&c(e)};g.each(b,function(b){if("string"==typeof b&&(b={uri:b}),g.isBlank(b.uri))f();else{var c=b.uri.toLowerCase();/\.js$/.test(c)?k(b.uri,b.attributes,f):/\.css$/.test(c)?l(a,b.uri,b.attributes,f):m(b.uri,b.attributes,f)}})}};var k=function(b,d){$.getScript(b).done(function(a){if(g.isFunction(d)){var e=[];if(a){var f=a.match(/define\(["'][\w-]+["']\)/g);g.each(f,function(a){a=a.substring(8,a.length-1),c.hasOwnProperty(a)&&e.push(c[a])})}d(b,"js",!1,e)}}).fail(function(c){console.error("js load error",c.responseText||c),g.isFunction(a.onAjaxError)&&a.onAjaxError("js load error",c),g.isFunction(d)&&d(b,"js",c)})},l=function(a,b,c,e){var f=d[b];if(!f){var h=$("<link href='"+b+"' rel='stylesheet' type='text/css'>").appendTo("head");f=d[b]={$el:h}}c&&f.$el.attr(c),a&&(g.isArray(f.views)||(f.views=[]),f.views.push(a)),g.isFunction(e)&&e(b,"css")},m=function(b,c,d){g.isNotBlank(b)&&g.isFunction(d)?$.ajax({type:"POST",cache:!1,url:b,data:c,success:function(a){d(b,"html",!1,a)},error:function(c){console.error("html load error",c.responseText||c),g.isFunction(a.onAjaxError)&&a.onAjaxError("html load error",c),d(b,"html",c,null)}}):g.isFunction(d)&&d(b,"html",!1,null)};a.cache=function(a,b){return g.isBlank(a)?null:null===b?($.jStorage.deleteKey(a),null):(void 0!==b&&$.jStorage.set(a,b),$.jStorage.get(a))},a.trigger=function(b,c){a.emitter&&a.emitter.trigger(b,c)},a.on=function(b,c,d){!a.emitter&&a.EventEmitter&&(a.emitter=new a.EventEmitter),a.emitter&&a.emitter.on(b,c,d)},a.one=function(b,c,d){!a.emitter&&a.EventEmitter&&(a.emitter=new a.EventEmitter),a.emitter&&a.emitter.one(b,c,d)},a.off=function(b,c){a.emitter&&a.emitter.off(b,c)},a.onenter=function(a,b,c){if(g.isFunction(b)&&(c=b,b=null),a=$(a),g.isFunction(c)){var d=function(a){13===a.which&&c()};g.isBlank(b)?a.on("keydown",d):a.on("keydown",b,d)}else a.off("keydown",b)},a.onInputChange=function(a,b){var c=$(a);c.is("input, textarea")||(c=c.find("input, textarea")),c.on("focusin",function(a){var b=$(a.currentTarget),c=b.data("vrender-inputchange");c&&c.timer&&clearInterval(c.timer),c={lastValue:b.val()},c.timer=setInterval(function(){d(b,c)},100),b.data("vrender-inputchange",c)}),c.on("focusout",function(a){var b=$(a.currentTarget),c=b.data("vrender-inputchange");c&&c.timer&&clearInterval(c.timer),b.removeData("vrender-inputchange"),d(b,c)});var d=function(a,c){var d=a.val();d!=c.lastValue&&(c.lastValue=d,g.isFunction(b)&&b(a,d))}},a.scheduleTask=function(a,b){if(!g.isBlank(a)){if(g.isFunction(b)){var c=g.find(e,function(b){return b.name===a});c?c.task=b:e.push({name:a,task:b})}else g.removeItems(e,function(b){return b.name===a});0===e.length?(f&&clearInterval(f),f=0):f||(f=setInterval(function(){g.each(e,function(a){a.task()})},400))}};var n=function(){for(var a in d){var b=d[a];if(g.isArray(b.views)){for(var c=b.views.length-1;c>=0;c--)g.isDomExist(b.views[c])||b.views.splice(c,1);0===b.views.length&&(b.$el.remove(),delete d[a])}}};a.plugins={};var o=a.Component=function(){};o.bindName="vrender-component",o.registerList=[],o.dataAdapter=function(a){return a},o.errorHandler=function(a){console.error(a)},o.register=function(a,b){g.isNotBlank(a)&&g.isFunction(b)&&o.registerList.push({s:a,fun:b})},o.build=function(a){if(g.isBlank(a))return[];if(!(a=$(a))||0===a.length)return[];var b=[];return g.each(o.registerList,function(c){a.find(c.s).each(function(){var a=$(this),d=a.data(o.bindName);d||(d=new c.fun(a)),b.push(d)})}),b},o.get=function(a){return $(a).data(o.bindName)},o.find=function(a,b,c){return a=$(a),a&&0!==a.length?g.isBlank(b)?o.build(a):g.map(a.find(b),function(a){return g.isFunction(c)?new c(a):o.get(a)}):[]},o.create=function(a,b,c){a=$.extend({},a);var d=a.tagName||a.tag||"div";d=$("<"+d+"></"+d+">"),g.isNotBlank(a.id)&&d.attr("id",a.id),g.isNotBlank(a.name)&&d.attr("name",a.name),g.isNotBlank(a.clsName)&&(d.addClass(a.clsName),g.isBlank(a.name)&&d.attr("name",a.clsName)),g.isNotBlank(a.style)&&d.addClass(a.style),a.target&&d.appendTo(a.target);var e=c&&new c(a);return e&&g.isFunction(e.render)&&e.render($,d),b&&g.isFunction(b)?new b(d,a,e):d},o.load=function(b,c,d){if(g.isBlank(b))return o.errorHandler("组件试图加载数据错误：api不能为空"),!1;c=$.extend({page:1,rows:20},c),1==c.page&&(c.pageClear=!0),this.lastLoadApi=b,this.lastLoadParams=c;var e=this;a.fetch(b,c,function(a,b){a||(b=o.dataAdapter(b),g.isArray(b)&&(b={total:b.length,results:b}),e._totalSize=parseInt(b&&b.total)||0,b=b&&b.hasOwnProperty("results")?b.results:b);var f=g.isFunction(e.getPaginator)&&e.getPaginator();f&&g.isFunction(f.set)&&f.set(e._totalSize,c.page,c.rows),g.isFunction(d)&&d(a,b)})},a.$ref=function(a){var b=$("[ref='"+a+"']");return b&&b.length>0?(b.length>1&&(b=b.eq(0)),o.get(b)||b):null},window.$ref=a.$ref,$.ajaxSetup({cache:!0}),$(function(){b=!0,o.isMobile=g.getUAState(navigator.userAgent).isMobile;for(var c in a.cacheDefine){var d=a.cacheDefine[c];h(c,d.definition,d.deps)}delete a.cacheDefine,a.scheduleTask("EasyWeb.cssfilemonitor",n)})}}(),function(){VRender.ENV.isApp=!0,VRender.ENV.useRem=document.documentElement.hasAttribute("data-dpr");VRender.ENV.useRem&&function(){var a=parseInt(window.devicePixelRatio)||1;a=Math.min(a,2);var b=1/a,c=document.documentElement.clientWidth*a,d="width="+c+",initial-scale="+b+",maximum-scale="+b+",minimum-scale="+b+",user-scalable=no";$("meta[name='viewport']").attr("content",d);var e=$("html").attr("data-dpr",a);$(window).resize(function(){var b=document.documentElement.clientWidth*a,c=parseInt(e.attr("data-mw"))||640,d=100*b/c;e.css("fontSize",d+"px")}).resize()}(),$(function(){VRender.ENV.isIphone=document.body.hasAttribute("iphone")})}(),function(a){var b=a?VRender.Utils:exports;b.each=function(d,e){if(c(e))if(b.isArray(d))for(var f=0,g=d.length;f<g&&!1!==e(d[f],f);f++);else if(a&&d instanceof $)for(var f=0,g=d.length;f<g&&!1!==e(d.eq(f),f);f++);},b.filter=function(d,e){var f=[];if(c(e))if(b.isArray(d))for(var g=0,h=d.length;g<h;g++){var i=d[g];e(i,g)&&f.push(i)}else if(a&&d instanceof $)for(var g=0,h=d.length;g<h;g++){var i=d.eq(g);e(i,g)&&f.push(i)}return f},b.find=function(d,e){if(c(e))if(b.isArray(d))for(var f=0,g=d.length;f<g;f++){var h=d[f];if(e(h,f))return h}else if(a&&d instanceof $)for(var f=0,g=d.length;f<g;f++){var h=d.eq(f);if(e(h,f))return h}return null},b.index=function(d,e){if(c(e))if(b.isArray(d)){for(var f=0,g=d.length;f<g;f++)if(e(d[f],f))return f}else if(a&&d instanceof $)for(var f=0,g=d.length;f<g;f++)if(e(d.eq(f),f))return f;return-1},b.isArray=function(a){return a&&a instanceof Array},b.map=function(d,e){var f=[];if(c(e))if(b.isArray(d))for(var g=0,h=d.length;g<h;g++)f.push(e(d[g],g));else if(a&&d instanceof $)for(var g=0,h=d.length;g<h;g++)f.push(e(d.eq(g),g));return f},b.removeItems=function(a,d){if(!b.isArray(a))return null;if(!c(d))return null;for(var e=[],f=a.length-1;f>=0;f--){var g=a[f];d(g,f)&&(e.unshift(g),a.splice(f,1))}return e},b.toArray=function(a){return void 0===a||null===a||!1===a?[]:a instanceof Array?a:[a]};var c=function(a){return"function"==typeof a}}("undefined"!=typeof VRender),function(a){var b=a?VRender.Utils:exports;b.compare=function(a,b){var c=a.getTime(),d=b.getTime();return c===d?0:c<d?-1:1},b.getMinutes=function(a){if(!(a instanceof Date))return 0;var b=a.getTime();return String(b).length>13&&(b/=1e3),parseInt(b/6e4)},b.isSameDay=function(a,b){return a instanceof Date&&b instanceof Date&&(a.getFullYear()===b.getFullYear()&&a.getMonth()===b.getMonth()&&a.getDate()===b.getDate())},b.isToday=function(a){return a instanceof Date&&b.isSameDay(a,new Date)},b.isTomorrow=function(a){if(a instanceof Date){var c=new Date;return c.setDate(c.getDate()+1),b.isSameDay(a,c)}return!1},b.isYesterday=function(a){if(a instanceof Date){var c=new Date;return c.setDate(c.getDate()-1),b.isSameDay(a,c)}return!1},b.toDate=function(a){if(a instanceof Date)return a;if("string"==typeof a){a=a.replace(/-/g,"/");var b=Date.parse(a);if(isNaN(b)){var c=a.indexOf(".");if(c>0){var d=parseInt(a.substr(c+1)||0);b=Date.parse(a.substr(0,c))+d}}return isNaN(b)?null:new Date(b)}return"number"==typeof a?new Date(a):null},b.toDateString=function(a,b){b=b||"yyyy-MM-dd",a=a||new Date;var c=a.getMonth()+1,d=a.getDate(),e=a.getHours(),f=a.getMinutes(),g=a.getSeconds(),h=a.getMilliseconds(),i=b.replace("yyyy",a.getFullYear());if(/M/.test(i)&&(i=i.replace(/MM/g,c<10?"0"+c:c).replace(/M/g,c)),/d/.test(i)&&(i=i.replace(/dd/g,d<10?"0"+d:d).replace(/d/g,d)),/H/.test(i)&&(i=i.replace(/HH/g,e<10?"0"+e:e).replace(/H/g,e)),/m/.test(i)&&(i=i.replace(/mm/g,f<10?"0"+f:f).replace(/m/g,f)),/s/.test(i)&&(i=i.replace(/ss/g,g<10?"0"+g:g).replace(/s/g,g)),/SSS/.test(i)&&(i=i.replace(/SSS/g,h<10?"00"+h:h<100?"0"+h:h)),/hh/.test(i)){var j=(e+12)%12;e<1?j="午夜"+j:e>=1&&e<5?j="凌晨"+j:e>=5&&e<6?j="清晨"+j:e>=6&&e<8?j="早上"+j:e>=8&&e<11?j="上午"+j:e>=11&&e<13?j="中午"+j:e>=13&&e<17?j="下午"+j:e>=17&&e<18?j="傍晚"+j:e>=18&&e<=23&&(j="晚上"+j),i=i.replace(/hh/g,j)}return i},b.toLocalDateString=function(a){if(!(a instanceof Date))return"";var c=new Date;return c.getFullYear()>a.getFullYear()?b.toDateString(a,"yyyy年MM月dd日"):b.isSameDay(a,c)?b.toDateString(a,"今天 HH:mm"):(c.setDate(c.getDate()-1),b.isSameDay(a,c)?b.toDateString(a,"昨天 HH:mm"):b.toDateString(a,"MM月dd日"))}}("undefined"!=typeof VRender),function(isFront){var StringUtils=isFront?VRender.Utils:exports;StringUtils.endWith=function(a,b){return!isEmptyStr(a)&&!isEmptyStr(b)&&(!(a.length<b.length)&&a.substring(a.length-b.length)==b)},StringUtils.format=function(text,data){for(var chars=String(text).split(""),length=chars.length,param=null,result="",i=0;i<length;i++){var ch=chars[i];if("{"===ch)if(null===param)param="";else{if(""!==param)break;result+="{",param=null}else if("}"===ch)if(null===param)result+="}";else{try{var value=eval(param);result+=value||0===value?value:""}catch(a){}param=null}else null===param?result+=ch:param+=ch}return result},StringUtils.isBlank=function(a){return a?"string"==typeof a&&0===String(a).replace(/\s+/g,"").length:"0"!==a&&0!==a&&!1!==a},StringUtils.isNotBlank=function(a){return!StringUtils.isBlank(a)},StringUtils.startWith=function(a,b){return!isEmptyStr(a)&&!isEmptyStr(b)&&(!(a.length<b.length)&&a.substr(0,b.length)===b)},StringUtils.strLen=function(a,b){return isEmptyStr(a)?0:(b&&(a=a.replace(/[\u4E00-\u9FFF]/g,"..")),a.length)},StringUtils.trimToEmpty=function(a){return StringUtils.isBlank(a)?"":(""+a).trim()},StringUtils.trimToNull=function(a){return StringUtils.isBlank(a)?null:(""+a).trim()};var isEmptyStr=function(a){return void 0===a||null===a||0===a.length}}("undefined"!=typeof VRender),function(a){var b=a?VRender.Utils:exports,c="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),d=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/,e=new RegExp("^((https|http|ftp|rtsp|mms)?://)?(([0-9a-z_!~*'().&=+$%-]+: )?[0-9a-z_!~*'().&=+$%-]+@)?(([0-9]{1,3}.){3}[0-9]{1,3}|([0-9a-z_!~*'()-]+.)*([0-9a-z][0-9a-z-]{0,61})?[0-9a-z].[a-z]{2,6})(:[0-9]{1,4})?((/?)|(/[0-9a-z_!~*'().;?:@&=+$,%#-]+)+/?)$");b.equal=function(a,c){if(a==c)return!0;if(b.isNull(a))return b.isNull(c);if(b.isNull(c))return!1;if("object"!=typeof a||"object"!=typeof c)return a===c;if(a instanceof Array){if(c instanceof Array){if(a.length!==c.length)return!1;for(var d=0,e=a.length;d<e;d++)if(!b.equal(a[d],c[d]))return!1;return!0}return!1}return a.hasOwnProperty("id")?a.id==c.id:a.hasOwnProperty("code")?a.code==c.code:!!a.hasOwnProperty("value")&&a.value==c.value},b.exec=function(a,c,d,e,f){if(b.isFunction(a)?(e=a,f=c,a=c=d=null):a instanceof Array&&(f=e,e=d,d=c,c=a,a=null),c&&(b.isFunction(c)?(f=d,e=c,c=d=null):c instanceof Array||(f=e,e=d,d=c,c=null)),d&&b.isFunction(d)&&(f=e,e=d,d=null),a||(a=this),b.isFunction(e)||(e=function(){}),c&&0!==c.length){var g=0,h=c.length;if(f){var i=[];for(g=0;g<c.length;g++)c[g].call(a,d,function(b,c){h-=1,b&&i.push(b),h<=0&&e.call(a,i.join("")||!1,c||d)})}else{var j=function(b,f){b?e.call(a,b,d):(g+=1,g<h?c[g].call(a,f||d,j):e.call(a,!1,f||d))};c[0].call(a,d,j)}}else e.call(a,!1,d)},b.getMeasureSize=function(a,b){if(a){if(isNaN(a))return a;if(a=parseFloat(a)||0)return b?a/100+"rem":a+"px"}return 0},b.getSelection=function(){return window.getSelection?window.getSelection():document.getSelection?document.getSelection():document.selection},b.getSelectionRange=function(){var a=b.getSelection();return a&&a.createRange?a.createRange():a.getRangeAt(0)},b.getUAState=function(a){var b={ie:!1,chrome:!1,firefox:!1,opera:!1,safari:!1},c=a.toLowerCase();return/micromessenger/.test(c)?b.wx=!0:/msie ([\d.]+)/.test(c)?b.ie=!0:/firefox\/([\d.]+)/.test(c)?b.firefox=!0:/chrome\/([\d.]+)/.test(c)?b.chrome=!0:/opera.([\d.]+)/.test(c)?b.opera=!0:/safari/.test(c)&&/version\/([\d.]+)/.test(c)&&(b.safari=!0),b.isIphone=/iphone/.test(c),b.isAndroid=/android/.test(c),b.isMobile=/mobile/.test(c)||b.isIphone||b.isAndroid,b},b.isAlphaKey=function(a,b){return a.which>=65&&a.which<=90||!!(b&&a.which>=97&&a.which<=122)},b.isControlKey=function(a){return!!(a.ctrlKey||a.metaKey||a.shiftKey)||[8,37,38,39,40,116,9,17,16,13,20].indexOf(a.which)>=0},b.isDomExist=function(a){return a&&$("body").find(a).length>0},b.isEmail=function(a){return a&&d.test(""+a)},b.isEmpty=function(a){if(void 0===a)return!0;if(null===a)return!0;if(""===a)return!0;for(var b in a)return!1;return!0},b.isFunction=function(a){return a&&"function"==typeof a},b.isMobile=function(a){return a&&/^1\d{10}$/.test(""+a)},b.isNull=function(a){return void 0===a||null===a},b.isNumberKey=function(a){return!a.shiftKey&&(a.which>=48&&a.which<=57||a.which>=96&&a.which<=105)},b.isNotEmpty=function(a){return!b.isEmpty(a)},b.isNotNull=function(a){return!b.isNull(a)},b.isNumberic=function(a){return!b.isNull(a)&&("number"==typeof a||!isNaN(a))},b.isPhone=function(a){return a&&/^(0(10|2\d|[3-9]\d{2})-)?\d{7,8}(-\d{1,8})?$/.test(""+a)},b.isTrue=function(a){return!!a&&(!0===a||1===a||!("false"===(a=String(a).toLowerCase())||"no"===a||"0"===a))},b.isUrl=function(a){return a&&e.test(""+a)},b.notNull=b.isNotNull,b.parentUntil=function(a,b,c){for(var a=$(a);null!=a&&a.length>0;){if(a.is(b))return a;if(c&&a.is(c))return $("");a=a.parent()}return $("")},b.parseUrl=function(a){var b=document.createElement("a");b.href=a||"";var c={};if(c.origin=a,c.href=b.href,c.protocol=b.protocol.replace(":",""),c.host=b.host,c.hostname=b.hostname,c.port=b.port,c.pathname=b.pathname,c.search=b.search,c.hash=b.hash,c.params={},b.search)for(var d=b.search.substr(1).split("&"),e=0,f=d.length;e<f;e++){var g=d[e].split("=");c.params[g[0]]=g[1]}return c},b.randomTxt=function(a){for(var b=[],d=c,e=0;e<a;e++)b.push(d[Math.ceil(61*Math.random())]);return b.join("")},b.toLocalMobile=function(a,c){if(!b.isMobile(a))return a;var d=[];return c&&d.push("+86"),d.push(a.substr(0,3)),d.push(a.substr(3,4)),d.push(a.substr(7,4)),d.join(" ")}}("undefined"!=typeof VRender),function(){if("undefined"!=typeof VRender&&!VRender.EventEmitter){var a=VRender.Utils,b=VRender.EventEmitter=function(){},c=b.prototype=new Object;c.trigger=function(b,c){for(var d=this,e=[],f=1,g=arguments.length;f<g;f++)e.push(arguments[f]);return a.each(this.events,function(a){if(a.name===b){var c=[{type:b,data:a.data}].concat(e);a.listener.apply(d,c)}}),a.removeItems(this.events,function(a){return a.once&&a.name===b}),this},c.on=function(b,c,d){return"string"==typeof b&&a.isNotBlank(b)&&(a.isFunction(c)&&!a.isFunction(d)&&(d=c,c=null),a.isFunction(d)&&(a.isArray(this.events)||(this.events=[]),this.events.push({name:b,data:c,listener:d}))),this},c.one=function(b,c,d){return"string"==typeof b&&a.isNotBlank(b)&&(a.isFunction(c)&&!a.isFunction(d)&&(d=c,c=null),a.isFunction(d)&&(a.isArray(this.events)||(this.events=[]),this.events.push({name:b,data:c,listener:d,once:!0}))),this},c.off=function(b,c){return a.removeItems(this.events,function(d){if(d.name===b)return!a.isNotNull(c)||d.listener==c}),this},c.hasListen=function(b){return!!a.find(this.events,function(a){return a.name===b})}}}(),function(){if("undefined"!=typeof VRender&&!VRender.FrontComponent){var a=VRender.Utils,b=VRender.FrontComponent=function(a,b){this.className=a,this.ComponentClass=b},c=b.prototype=new VRender.EventEmitter;c.find=function(a,b){a=$(a),a.is(this.className)||(a=a.find(this.className));var c=[],d=this;return a.each(function(){c.push(d.make(this,b))}),c},c.create=function(b){var c=$("<div></div>");b=b||{},b.target&&(b.targetAsInstance?c=b.target:c.appendTo(b.target)),c.addClass(this.className),a.isNotBlank(b.name)&&c.attr("name",b.name).addClass(b.name),a.isFunction(this.render)&&this.render(c,b);var d=new this.ComponentClass(c,b);return c.data("mfhInstance",d),d},c.make=function(a,b){a=$(a);var c=a.data("mfhInstance");return c||(c=new this.ComponentClass(a,b),a.data("mfhInstance",c)),c},VRender.frontComponent=function(a,c,d){var e=new b(a,c);return e.render=d,e}}}(),function(a){if(a||(VRender.Component.Render||(VRender.Component.Render={}),!VRender.Component.Render.base)){var b=a?require(__vrender__).Utils:VRender.Utils,c=function(a){var c=this.options.dataAdapter||this.options.adapter;if(b.isFunction(this.getDataAdapter)&&(c=this.getDataAdapter()),b.isFunction(c)){var d=function(a,b){return a&&a._vr_adapter_flag?a:(a=c(a,b),a&&(a._vr_adapter_flag=!0),a)};a=b.isArray(a)?b.map(a,d):d(a)}return a},d=function(a){var c=this.options.dataMapper||this.options.mapper;if(b.isFunction(this.getDataMapper)&&(c=this.getDataMapper()),b.isFunction(c))return c(a);var d={};return b.notNull(a)&&(a.hasOwnProperty("id")&&(d["data-id"]=a.id),a.hasOwnProperty("code")&&(d["data-code"]=a.code),a.hasOwnProperty("name")&&(d["data-name"]=a.name),a.hasOwnProperty("value")&&(d["data-value"]=a.value),a.hasOwnProperty("label")&&(d["data-label"]=a.label),a.hasOwnProperty("text")&&(d["data-text"]=a.text),a.hasOwnProperty("status")&&(d["data-status"]=a.status)),d},e=function(a){if(b.isBlank(a))return null;if("string"==typeof a)return a;var c=this.options.idField;return b.isFunction(this.getIdField)&&(c=this.getIdField()),b.isNotBlank(c)?a[c]:a.hasOwnProperty("id")?a.id:a.hasOwnProperty("code")?a.code:a.hasOwnProperty("value")?a.value:null},f=function(a,c){var d=this.options.labelFunction;if(b.isFunction(this.getLabelFunction)&&(d=this.getLabelFunction()),b.isFunction(d))return d(a,c);if(b.isBlank(a))return"";if("string"==typeof a)return a;var e=this.options.labelField;return b.isFunction(this.getLabelField)&&(e=this.getLabelField()),b.isNotBlank(e)?b.isNull(a[e])?"":a[e]:a.hasOwnProperty("label")?b.isNull(a.label)?"":a.label:a.hasOwnProperty("name")?b.isNull(a.name)?"":a.name:a.hasOwnProperty("value")?b.isNull(a.value)?"":a.value:a.hasOwnProperty("text")?b.isNull(a.text)?"":a.text:""+a},g=function(a,b){b?(this.context=a,this.options=b||{}):(this.context=null,this.options=a||{})},h=g.prototype=new Object;g.render=function(a,b){this.renderData(a,b),g.renderFunction(b,"adapter",this.getDataAdapter()),g.renderFunction(b,"mapper",this.getDataMapper())},g.renderFunction=function(c,d,e){a&&b.isFunction(e)&&c.write("<div class='ui-fn' name='"+d+"'>"+escape(e)+"</div>")},h.render=function(a,b){g.render.call(this,a,b)},h.renderData=function(a,b){var c=this.getMapData(this.getData());c&&b.attr(c)},h.isRenderAsApp=function(){return a?!(!this.context||!b.isFunction(this.context.isRenderAsApp))&&this.context.isRenderAsApp():VRender.ENV.isApp},h.isRenderAsIphone=function(){return a?!(!this.context||!b.isFunction(this.context.isRenderAsIphone))&&this.context.isRenderAsIphone():VRender.ENV.isIphone},h.isRenderAsRem=function(){if(a){if(this.context&&b.isFunction(this.context.isRenderAsApp)&&this.context.isRenderAsApp()&&b.isFunction(this.context.getContext)){var c=this.context.getContext();return c&&b.isTrue(c.config("useREM"))}return!1}return VRender.ENV.useRem},h.getData=function(){return c.call(this,this.options.data)},h.getDataId=function(a){return e.call(this,a)},h.getDataLabel=function(a,b){return f.call(this,a,b)},h.getDataAdapter=function(){return this.options.dataAdapter||this.options.adapter},h.getDataMapper=function(){return this.options.dataMapper||this.options.mapper},h.getMapData=function(a){return d.call(this,a)},h.doAdapter=function(a){return c.call(this,a)};var i=function(a,b){g.call(this,a,b)},j=i.prototype=new g;i.render=function(a,c){g.render.call(this,a,c);var d=this.getIdField();b.isNotBlank(d)&&c.attr("opt-idfield",d);var e=this.getLabelField();b.isNotBlank(e)&&c.attr("opt-label",e),this.isMultiple()&&c.attr("multiple","multiple"),i.renderFunction(c,"lblfunc",this.getLabelFunction()),i.renderFunction(c,"irender",this.getItemRenderer()),this.renderSelectValues(a,c);var f=this.getData();b.isNotNull(f)&&c.attr("data-items",escape(JSON.stringify(f)))},i.renderFunction=function(a,b,c){g.renderFunction(a,b,c)},i.renderOneData=function(a,c,d,e){var f=this.getItemRenderer();return b.isFunction(f)?f(a,c,d,e):this.getDataLabel(d,e)},i.getSelectedIndex=function(a){var c=this.options.selectedIndex;if(b.isBlank(c))return a||this.isMultiple()?[]:-1;b.isArray(c)||(c=(""+c).split(","));var d=[];return b.each(c,function(a){if(!isNaN(a)){var b=parseInt(a);!isNaN(b)&&b>=0&&d.push(b)}}),a||this.isMultiple()?d:d.length>0?d[0]:-1},i.getSelectedId=function(a){var c=this.options.selectedId;if(b.isBlank(c))return a||this.isMultiple()?[]:null;b.isArray(c)||(c=(""+c).split(","));var d=[];return b.each(c,function(a){(a||0===a)&&d.push(isNaN(a)?a:parseInt(a))}),a||this.isMultiple()?d:d.length>0?d[0]:null},i.getSelectedItems=function(a,c){var d=[];if(a&&a.length>0){var e=0,f=this,g=this.getSelectedIndex(!0),h=this.getSelectedId(!0),j=function(a){for(var k=0,l=a.length;k<l;k++){var m=a[k];b.isArray(m)?c?j(m):e+=1:(i.isSelected.call(f,m,e,g,h)&&d.push(m),e+=1)}};j(a)}return d},i.isSelected=function(a,c,d,e){if(b.isNotBlank(d))return!isNaN(c)&&(!((c=parseInt(c))<0)&&(b.isArray(d)||(d=(""+d).split(",")),b.index(d,function(a){return a==c})>=0));if(b.isNotBlank(e)){var f=this.getDataId(a);return b.isArray(e)||(e=(""+e).split(",")),b.index(e,function(a){return a==f})>=0}return!1},j.render=function(a,b){g.render.call(this,a,b)},j.renderData=function(a,b){},j.renderOneData=function(a,b,c,d){return i.renderOneData.call(this,a,b,c,d)},j.renderSelectValues=function(a,c){var d=this.getSelectedIndex(!0).join(",");b.isNotBlank(d)&&c.attr("data-inds",d);var e=this.getSelectedId(!0).join(",");b.isNotBlank(e)&&c.attr("data-ids",e),this.options.apiName&&(c.attr("data-tryindex",d),c.attr("data-tryid",e))},j.getData=function(){return c.call(this,b.toArray(this.options.data))},j.getIdField=function(){return this.options.idField},j.getLabelField=function(){return this.options.labelField},j.getLabelFunction=function(){return this.options.labelFunction},j.getItemRenderer=function(){return this.options.itemRenderer},j.isMultiple=function(){return this.options.hasOwnProperty("multiple")?b.isTrue(this.options.multiple):b.isTrue(this.options.multi)},j.getSelectedIndex=function(a){return i.getSelectedIndex.call(this,a)},j.getSelectedId=function(a){return i.getSelectedId.call(this,a)},j.getSelectedData=function(a){var b=i.getSelectedItems.call(this,this.getData(),!0);return a||this.isMultiple()?b:b.length>0?b[0]:null},j.isDataSelected=function(a,b,c,d){return c||(c=this.getSelectedIndex(!0)),d||(d=this.getSelectedId(!0)),i.isSelected.call(this,a,b,c,d)},a?(module.exports={},module.exports.BaseRenderer=g,module.exports.ListRenderer=i):(VRender.Component.Render._base=g,VRender.Component.Render._list=i,VRender.Component.Render.fn={},VRender.Component.Render.fn.getMapData=d,VRender.Component.Render.fn.getDataId=e,VRender.Component.Render.fn.getDataLabel=f,VRender.Component.Render.fn.doAdapter=c)}}("undefined"==typeof VRender),function(a){if(a||!VRender.Component.Render.dropdownlist){var b=a?require(__vrender__).Utils:VRender.Utils,c=a?require("./_base").ListRenderer:VRender.Component.Render._list,d=function(a,b){c.call(this,a,b)},e=d.prototype=new c;e.render=function(a,b){return c.render.call(this,a,b),b.addClass("ui-dropdownlist"),this.isMultiple()&&b.attr("multiple","multiple"),this},e.renderData=function(a,b){var c=a("<ul></ul>").appendTo(b);f.call(this,a,c,this.getData())};var f=function(c,d,e){var f=this,g=0,h=!1,i=this.getSelectedIndex(!0),j=this.getSelectedId(!0)||[],k=function(e){var h=c("<li class='item'></li>").appendTo(d),k=f.renderOneData(c,h,e,g);b.isNotNull(k)&&h.html(k),f.isDataSelected(e,g,i,j)&&h.addClass("selected"),h.attr(f.getMapData(e)),a||h.data("itemData",e)},l=function(){d.append("<li class='sep'></li>")};b.each(b.toArray(e),function(a){b.isArray(a)?(g>0&&l(),b.each(a,function(a){k(a),g+=1}),h=!0):(h&&l(),k(a),h=!1,g+=1)})};a?module.exports=d:(d.renderItems=f,VRender.Component.Render.dropdownlist=d)}}("undefined"==typeof VRender),function(a){if(a||!VRender.Component.Render.group){var b=a?require(__vrender__).Utils:VRender.Utils,c=a?require("./_base").BaseRenderer:VRender.Component.Render._base,d=function(a,b){c.call(this,a,b)},e=d.prototype=new c;d.VERTICAL="vertical",d.HORIZONTIAL="horizontial",e.render=function(a,b){c.render.call(this,a,b),b.addClass("ui-group");var e=this.options||{},f=e.orientation;return f!==d.HORIZONTIAL&&f!==d.VERTICAL||(b.addClass(f),b.attr("opt-orientation",f)),b.attr("opt-gap",e.gap),b.attr("opt-align",e.align),this.renderSubViews(a,b),this},e.renderSubViews=function(a,b){f.call(this,a,b,this.getChildren())},e.getChildren=function(){return this.options.children||this.options.subViews||this.options.views};var f=function(a,c,d){d=b.toArray(d),b.each(d,function(a){b.isNotNull(a)&&(b.isFunction(a.render)?a.render(c):c.append(a.$el||a))}),g.call(this,a,c)},g=function(a,b){var c=top=align=valign=display="",e=parseInt(b.attr("opt-gap"))||"";e&&(e=this.isRenderAsRem()?e/100+"rem":e+"px");var f=b.attr("opt-orientation");f==d.HORIZONTIAL?(display="inline-block",c=e):f==d.VERTICAL?(display="block",top=e):top=e;var g=b.attr("opt-align")||"";g=g.toLowerCase(),/left/.test(g)?align="left":/center/.test(g)?align="center":/right/.test(g)&&(align="right"),/top/.test(g)?valign="top":/middle/.test(g)?valign="middle":/bottom/.test(g)&&(valign="bottom"),b.css("text-align",align);var h=b.children();h.css("display",display),h.css("vertical-align",valign),h.css("margin-left",c).css("margin-top",top),h.eq(0).css("margin-left","").css("margin-top","")};a?module.exports=d:(d.showSubViews=f,d.updateLayout=g,VRender.Component.Render.group=d)}}("undefined"==typeof VRender),function(a){if(a||!VRender.Component.Render.combobox){var b=a?require(__vrender__).Utils:VRender.Utils,c=a?require("./_base").ListRenderer:VRender.Component.Render._list,d=function(a,b){c.call(this,a,b)},e=d.prototype=new c;e.render=function(a,d){return c.render.call(this,a,d),d.addClass("ui-combobox"),d.css("width",b.getMeasureSize(this.options.width,this.isRenderAsRem())||""),b.isTrue(this.options.native)&&d.attr("opt-native","1"),d.attr("opt-scroll",this.options.scroller),f.call(this,a,d),this},e.getDataMapper=function(){return null};var f=function(a,c){var d=a("<div class='ipt'></div>").appendTo(c),e=a("<input type='text'/>").appendTo(d),f=this.getSelectedData(!0);if(f&&f.length>0){c.addClass("has-val");var g=this,h=b.map(f,function(a){return g.getDataLabel(a)});e.val(h.join(",")||"")}b.isTrue(this.options.editable)?c.addClass("editable"):e.attr("readonly","readonly"),c.is(".disabled")&&e.attr("disabled","disabled"),d.append("<button class='dropdownbtn'></button>"),d.append("<span class='prompt'>"+b.trimToEmpty(this.options.prompt)+"</span>")};a?module.exports=d:VRender.Component.Render.combobox=d}}("undefined"==typeof VRender),function(){if("undefined"==typeof VRender)return module.exports={HolderBase:function(){},HolderItems:function(){}};if(!VRender.Component.base){var a=VRender.Utils,b=VRender.Component,c=function(a){},d=c.prototype=new VRender.EventEmitter;c.doAdapter=function(a){return b.Render.fn.doAdapter.call(this,a)},c.getFunction=function(a,b){if(this.options.hasOwnProperty(a))return this.options[a];if(this.hasOwnProperty(a))return this[a];var c=this.$el.children(".ui-fn[name='"+b+"']").text();return c&&(c=new Function("var Utils=VRender.Utils;return ("+unescape(c)+");")()),this[a]=c},d.init=function(a,c){var d=this.$el=$(a);if(d.data(b.bindName))return d.data(b.bindName);d.data(b.bindName,this),this.options=c||{},g.call(this,d,this.options);var e=this;return setTimeout(function(){h.call(e)},0),this},d.getData=function(){return c.doAdapter.call(this,this.options.data)},d.setData=function(a){this.options.data=a},d.isRenderAsApp=function(){return VRender.ENV.isApp},d.isRenderAsIphone=function(){return VRender.ENV.isIphone},d.isRenderAsRem=function(){return VRender.ENV.useRem},d.getIdField=function(){return this.options.idField||this.$el.attr("opt-idfield")},d.setIdField=function(a){this.options.idField=a||"",this.$el.attr("opt-idfield",this.options.idField)},d.getLabelField=function(){return this.options.labelField||this.$el.attr("opt-label")},d.setLabelField=function(a){this.options.labelField=a||"",this.$el.attr("opt-label",this.options.labelField)},d.getLabelFunction=function(){return c.getFunction.call(this,"labelFunction","lblfunc")},d.setLabelFunction=function(a){this.options.labelFunction=a},d.getDataAdapter=function(){
return this.options.hasOwnProperty("adapter")?this.options.adapter:c.getFunction.call(this,"dataAdapter","adapter")},d.setDataAdapter=function(a){this.options.adapter=a,delete this.options.dataAdapter},d.getDataMapper=function(){return this.options.hasOwnProperty("mapper")?this.options.mapper:c.getFunction.call(this,"dataMapper","mapper")},d.setDataMapper=function(a){this.options.mapper=a,delete this.options.dataMapper},d.getDataId=function(a){return b.Render.fn.getDataId.call(this,a)},d.getDataLabel=function(a,c){return b.Render.fn.getDataLabel.call(this,a,c)},d.getMapData=function(a,c){return b.Render.fn.getMapData.call(this,a,c)},d.load=function(c,d,e){if(a.isBlank(c))return!1;var f=this;b.load.call(this,c,d,function(b,c){b||(f.options.data=c,a.isFunction(f.setData)&&f.setData(c)),a.isFunction(e)&&e(b,c),f.trigger("loaded")})},d.reload=function(b){a.isFunction(this.load)&&this.load(this.lastLoadApi,this.lastLoadParams,b)},d.setEnabled=function(b){void 0===b||null===b?this.setDisabled(!1):this.setDisabled(!a.isTrue(b))},d.setDisabled=function(b){void 0!==b&&null!==b||(b=!0),a.isTrue(b)?this.$el.addClass("disabled").attr("disabled","disabled"):this.$el.removeClass("disabled").removeAttr("disabled")},d.tap=function(b,c,d,e){a.isFunction(b)&&(c,d=b,b=c=null),a.isFunction(c)&&(d=c,c=null),this.$el.on("tap",b,c,d)};var e=function(){},f=e.prototype=new c;e.doAdapter=function(b){return c.doAdapter.call(this,a.toArray(b))},e.getFunction=function(a,b){return c.getFunction.call(this,a,b)},e.getIntValues=function(b,c,d){a.isArray(b)||(b=a.isBlank(b)?[]:(""+b).split(",")),c=a.isNull(c)?Number.NEGATIVE_INFINITY:c,d=a.isNull(d)?Number.POSITIVE_INFINITY:d;var e=[];return a.each(b,function(a){isNaN(a)||(a=parseInt(a),!isNaN(a)&&e.indexOf(a)<0&&a>=c&&a<=d&&e.push(a))}),e},e.setSelectedIndex=function(a){var b=e.getIntValues(a,0);return b.length>0&&!this.isMultiple()&&(b=[b[0]]),this.$el.attr("data-inds",b.join(",")),this.$el.removeAttr("data-ids"),b},e.equalIndex=function(a,b){if(a=e.getIntValues(a),b=e.getIntValues(b),a.length!=b.length)return!1;a.sort(function(a,b){return a>b}),b.sort(function(a,b){return a>b});for(var c=0,d=a.length;c<d;c++)if(a[c]!=b[c])return!1;return!0},f.getData=function(){return e.doAdapter.call(this,this.options.data)},f.setData=function(b){this.options.data=a.toArray(b),this.$el.attr("data-inds","").removeAttr("data-ids")},f.length=function(){return a.toArray(this.getData()).length},f.isMultiple=function(){return"multiple"==this.$el.attr("multiple")},f.getItemData=function(b){var c=b.data("itemData")||b.data();return a.isEmpty(c)?null:c},f.getItemRenderer=function(){return this.options.hasOwnProperty("renderer")?this.options.renderer:c.getFunction.call(this,"itemRenderer","irender")},f.setItemRenderer=function(a){this.options.renderer=a,delete this.options.itemRenderer},f.getSelectedIndex=function(b){var c=this.$el.attr("data-inds");if(a.isNull(c)){c=[];var d=this,f=this.getData(),g=this.$el.attr("data-ids");a.isNull(g)?a.each(f,function(a,b){d.isDataSelected(a,b,[],[])&&c.push(b)}):g.length>0&&(g=g.split(","),a.each(f,function(b,e){var f=d.getDataId(b);a.index(g,function(a){return a==f})>=0&&c.push(e)})),0==c.length&&(c=null)}else c=e.getIntValues(c,0);return b||this.isMultiple()?c:c&&c.length>0?c[0]:-1},f.setSelectedIndex=function(a,b){e.setSelectedIndex(a);b&&this.trigger("change")},f.getSelectedId=function(b){var c=this.$el.attr("data-ids"),d=this.$el.attr("data-inds");if(a.isNotNull(d)){if(c=[],d=e.getIntValues(d,0),d.length>0){var f=this,g=this.getData()||[];a.each(d,function(a){var b=a<g.length?g[a]:null;c.push(f.getDataId(b))})}}else if(a.isNull(c)){c=[];var f=this;a.each(this.getData(),function(a,b){f.isDataSelected(a,b,[],[])&&c.push(f.getDataId(a))}),0==c.length&&(c=null)}if(a.isNull(c))return null;a.isArray(c)||(c=c.split(","));var h=[];return a.each(c,function(a){(a||0===a)&&h.push(isNaN(a)?a:parseInt(a))}),b||this.isMultiple()?h:h.length>0?h[0]:null},f.setSelectedId=function(b,c){a.isArray(b)||(b=a.isBlank(b)?[]:b.split(","));var d=[],e=this;a.each(this.getData(),function(c,f){var g=e.getDataId(c);a.index(b,function(a){return a==g})>=0&&d.push(f)}),this.setSelectedIndex(d,c)},f.getSelectedData=function(b){var c=this.$el.attr("data-inds"),d=this.$el.attr("data-ids")||[],e=[],f=this;return a.each(this.getData(),function(a,b){f.isDataSelected(a,b,c,d)&&e.push(a)}),b||this.isMultiple()?e:e.length>0?e[0]:null},f.isDataSelected=function(b,c,d,e){if(a.isNull(d)&&a.isNull(e)&&(d=this.$el.attr("data-inds"),e=this.$el.attr("data-ids")),a.isNotNull(d)){if(isNaN(c))return!1;if(c=parseInt(c),isNaN(c)||c<0)return!1;a.isArray(d)||(d=(""+d).split(","));var f=a.index(d,function(a){return a==c});return f>=0}if(a.isNotBlank(e)){var g=this.getDataId(b);a.isArray(e)||(e=(""+e).split(","));var f=a.index(e,function(a){return a==g});return f>=0}return!1};var g=function(b,c){a.isNotBlank(c.id)&&b.attr("id",c.id),a.isNotBlank(c.name)&&b.attr("name",c.name);var d=c.clsname||c.className||c.clsName||c.cls;if(a.isNotBlank(d)&&b.addClass(d),a.isNotBlank(c.style)&&b.addClass(c.style),c.hasOwnProperty("disabled")?this.setDisabled(a.isTrue(c.disabled)):c.hasOwnProperty("enabled")&&this.setDisabled(!a.isTrue(c.enabled)),!c.data){var e=b.attr("data-items");c.data=e?JSON.parse(unescape(e)):b.data()}this.$el.removeAttr("data-items")},h=function(){if(i.call(this)&&a.isFunction(this.load)){var b=this.options.api||this.$el.attr("api-name"),c=null;if(this.options.hasOwnProperty("params"))c=this.options.params;else try{c=JSON.parse(this.$el.attr("api-params")||null)}catch(a){}c=$.extend({},c);var d=a.isFunction(this.getPaginator)&&this.getPaginator();d&&(a.isFunction(d.getPageNo)&&(c.page=d.getPageNo()),a.isFunction(d.getPageSize)&&(c.rows=d.getPageSize()));var e=a.isFunction(this.getSearcher)&&this.getSearcher();e&&a.isFunction(e.getParams)&&(c=$.extend(c,e.getParams()));var f=this;this.load(b,c,function(){j.call(f)})}},i=function(){return this.options.hasOwnProperty("autoLoad")?a.isTrue(this.options.autoLoad):a.isTrue(this.$el.attr("api-autoload"))},j=function(){var b=this,c=function(c){a.isFunction(b.setSelectedIndex)&&b.setSelectedIndex(c)},d=function(c){a.isFunction(b.setSelectedId)&&b.setSelectedId(c)};this.options.hasOwnProperty("selectedIndex")?c(this.options.selectedIndex):a.isNotBlank(this.$el.attr("data-tryindex"))?c(this.$el.attr("data-tryindex")):this.options.hasOwnProperty("selectedId")?d(this.options.selectedId):a.isNotBlank(this.$el.attr("data-tryid"))&&d(this.$el.attr("data-tryid")),delete this.options.selectedIndex,delete this.options.selectedId,this.$el.removeAttr("data-tryindex"),this.$el.removeAttr("data-tryid")};b.base=c,b.list=e}}(),function(){if(!VRender.Component.DropdownList){var a=VRender.Utils,b=VRender.Component.Render.dropdownlist,c=VRender.Component,d=window.UIDropdownList=c.DropdownList=function(a,b){if(this.init(a,b)!==this)return c.get(a);this.tap("li.item",f.bind(this))},e=d.prototype=new c.list;d.find=function(a){return c.find(a,".ui-dropdownlist",d)},d.create=function(a){return c.create(a,d,b)},e.getData=function(){var b=this;return a.map(this.$el.find("li.item"),function(a){return b.getItemData(a)})},e.setData=function(a){a=c.base.doAdapter.call(this,a),this.options.data=a,c.list.setSelectedIndex.call(this,[]);var d=this.$el.children("ul").empty();b.renderItems.call(this,$,d,a)},e.setSelectedIndex=function(b,d){var e=c.list.setSelectedIndex.call(this,b),f=this.$el.find("li.item").removeClass("selected");a.each(e,function(a){f.eq(a).addClass("selected")}),d&&this.trigger("change",this.getSelectedData())},e.getSelectedData=function(b){var c=this,d=a.map(this.$el.find("li.item.selected"),function(a){return c.getItemData(a)});return b||this.isMultiple()?d:d.length>0?d[0]:null},e.matchFirst=function(b,c,d){if(a.isNotBlank(b))for(var e=this.$el.find("li.item"),f=0,h=e.length;f<h;f++){var i=e.eq(f);if(g.call(this,i.text(),b,c,d))return[f,this.getItemData(i)]}return null};var f=function(b){var d=$(b.currentTarget);if(this.isMultiple())d.toggleClass("selected");else{if(d.is(".selected"))return;d.addClass("selected").siblings().removeClass("selected")}var e=[];a.each(this.$el.find("li.item"),function(a,b){a.is(".selected")&&e.push(b)}),c.list.setSelectedIndex.call(this,e),this.trigger("change",this.getSelectedData())},g=function(a,b,c,d){if(b==a)return!0;if(c&&b.length<a.length){var e=a.indexOf(b);if(e>=0)return!d||0===e}return!1};c.register(".ui-dropdownlist",d)}}(),function(){if(!VRender.Component.Group){var a=VRender.Utils,b=VRender.Component.Render.group,c=VRender.Component,d=window.UIGroup=c.Group=function(a,b){if(this.init(a,b)!==this)return c.get(a)},e=d.prototype=new c.base;d.find=function(a){return c.find(a,".ui-group",d)},d.create=function(a){return c.create(a,d,b)},e.doLayout=function(){f.call(this)},e.setOrientation=function(a){this.$el.removeClass(b.HORIZONTIAL).removeClass(b.VERTICAL),this.$el.removeAttr("opt-orientation"),a!==b.HORIZONTIAL&&a!==b.VERTICAL||this.$el.addClass(a).attr("opt-orientation",a),f.call(this)},e.setGap=function(a){this.$el.removeAttr("opt-gap"),this.$el.attr("opt-gap",parseInt(a)||null),f.call(this)},e.setAlign=function(a){this.$el.removeAttr("opt-align"),this.$el.attr("opt-align",a||null),f.call(this)},e.append=function(a){return this.addChildren(Array.prototype.slice.call(arguments))},e.addChild=function(b){return a.isNotBlank(b)&&(this.$el.append(b.$el||b),f.call(this)),b},e.addChildren=function(b){var c=this;return a.each(a.toArray(b),function(a){c.addChild(a)}),this};var f=function(){this.layoutTimerId&&clearTimeout(this.layoutTimerId);var a=this;this.layoutTimerId=setTimeout(function(){a.layoutTimerId=0,b.updateViewGaps.call(a,$,a.$el)},0)}}}(),function(){if(!VRender.Component.Combobox){var a=VRender.Utils,b=VRender.Component.Render.combobox,c=VRender.Component,d=window.UICombobox=c.Combobox=function(a,b){if(this.init(a,b)!==this)return c.get(a);this.isRenderAsApp()&&this.isNative()&&(u.call(this,$,this.$el),this.$el.children("select").on("change",i.bind(this))),this.isRenderAsApp()&&this.isNative()||this.tap(".ipt",f.bind(this)),this.$el.is(".editable")&&(this.$el.on("keydown","input",k.bind(this)),this.$el.on("keyup","input",k.bind(this)),this.$el.on("focusin","input",l.bind(this)),this.$el.on("focusout","input",l.bind(this)))},e=d.prototype=new c.list;d.find=function(a){return c.find(a,".ui-combobox",d)},d.create=function(a){return c.create(a,d,b)},e.getData=function(){var b=[],d=c.list.doAdapter.call(this,this.options.data);return a.each(d,function(c){a.isArray(c)?a.each(c,function(a){a&&b.push(a)}):c&&b.push(c)}),b},e.setData=function(a){a=c.list.doAdapter.call(this,a),this.options.data=a,c.list.setSelectedIndex.call(this,[]),this.isRenderAsApp()&&this.isNative()?(this.$el.children("select").remove(),u.call(this,$,this.$el),this.$el.children("select").on("change",i.bind(this))):this.dropdownList&&this.dropdownList.setData(a),n.call(this,[])},e.setSelectedIndex=function(b,d){var e=c.list.setSelectedIndex.call(this,value);if(this.dropdownList)this.dropdownList.setSelectedIndex(e);else{var f=this.$el.children("select"),g=f.children("option").removeAttr("select");a.each(e,function(a){g.eq(a).attr("select","select")})}n.call(this,e,this.getSelectedData(!0),d)},e.val=function(b){if(a.isBlank(b))return this.$el.find(".ipt > input").val();var c=o.call(this,b);this.setSelectedIndex(c?c[0]:-1,!1)},e.setDisabled=function(b){void 0!==b&&null!==b||(b=!0),a.isTrue(b)?(this.$el.addClass("disabled").attr("disabled","disabled"),this.$el.find(".ipt > input").attr("disabled","disabled")):(this.$el.removeClass("disabled").removeAttr("disabled"),this.$el.find(".ipt > input").removeAttr("disabled"))},e.isNative=function(){return 1==this.$el.attr("opt-native")},e.isMatchRequired=function(){return 1==this.$el.attr("opt-match")};var f=function(a){var b=$(a.target);if(this.isRenderAsApp()){if(this.$el.is(".editable")&&!b.is(".dropdownbtn"))return}else this.$el.is(".editable")&&b.is(".dropdownbtn")&&this.$el.find(".ipt > input").focus();r.call(this),p.call(this)},g=function(a){if("mouseenter"===a.type)this.mouseTimerId&&(clearTimeout(this.mouseTimerId),this.mouseTimerId=0);else if(q.call(this)){var b=this;this.mouseTimerId=setTimeout(function(){b.mouseTimerId=0,s.call(b)},500)}},h=function(a){$(a.target).is(".ui-dropdownlist")&&s.call(this)},i=function(b){var c=[],d=[],e=this.$el.children("select").find(":selected");a.each(e,function(a){c.push(a.attr("ind")),d.push(a.data("itemData"))}),n.call(this,c,d,!0)},j=function(a){var b=this.dropdownList.getSelectedIndex(!0),c=this.dropdownList.getSelectedData(!0);n.call(this,b,c,!0),s.call(this)},k=function(a){if("keydown"===a.type)this.isRenderAsApp()||(r.call(this),this.$el.off("mouseenter").off("mouseleave"));else if("keyup"===a.type){var b=$(a.currentTarget),d=b.val();if(13===a.which)if(this.isRenderAsApp())m.call(this);else{s.call(this);var e=this.dropdownList.getSelectedIndex(!0);e&&e.length>0?c.list.equalIndex(this._lastSelectedIndex,e)||(this._lastSelectedIndex=e,n.call(this,e,this.dropdownList.getSelectedData(!0),!0),b.select()):(this._lastSelectedIndex=-1,n.call(this,[],null,!0),this.isMatchRequired()||b.val(d).select())}else if(38===a.which||40===a.which){if(!this.isRenderAsApp()){var e=this.dropdownList.getSelectedIndex(!0);e=e&&e.length>0?e[0]:-1,38===a.which&&e>0&&(e-=1),40===a.which&&e<this.dropdownList.length()-1&&(e+=1),this.dropdownList.setSelectedIndex(e)}}else if(d&&d.length>0?this.$el.addClass("has-val"):this.$el.removeClass("has-val"),!this.isRenderAsApp()){var f=o.call(this,d,!0);this.dropdownList.setSelectedIndex(f?f[0]:-1)}}},l=function(a){if("focusin"===a.type)this.focusOutTimerId||(this._lastSelectedIndex=this.getSelectedIndex());else if("focusout"===a.type&&(m.call(this),q.call(this))){var b=this;this.focusOutTimerId=setTimeout(function(){b.focusOutTimerId=0,s.call(b)},250)}},m=function(){var a=this.$el.find(".ipt > input"),b=a.val(),d=o.call(this,b,this.isMatchRequired());if(d=d||[-1,null],this.dropdownList)this.dropdownList.setSelectedIndex(d[0]);else{var e=this.$el.children("select");e&&e.length>0&&(e.get(0).selectedIndex=d[0])}n.call(this,d[0],d[1],!1),d[0]<0&&!this.isMatchRequired()&&(a.val(b),b&&b.length>0&&this.$el.addClass("has-val")),c.list.equalIndex(this._lastSelectedIndex,d[0])||(this._lastSelectedIndex=d[0],this.trigger("change",d[1]))},n=function(b,d,e){var f=this;d=a.toArray(d);var g=a.map(d,function(a){return f.getDataLabel(a)});c.list.setSelectedIndex.call(this,b),this.$el.find(".ipt > input").val(g.join(",")||""),d&&d.length>0?this.$el.addClass("has-val"):this.$el.removeClass("has-val"),a.isTrue(e)&&this.trigger("change",d)},o=function(b,c,d){if(a.isBlank(b))return null;for(var e=this.getData()||[],f=0,g=e.length;f<g;f++){var h=e[f],i=this.getDataLabel(h)||"";if(b==i)return[f,h];if(c&&b.length<i.length){var j=i.indexOf(b);if(0==j||j>0&&!d)return[f,h]}}return null},p=function(){var a=this.$el.children(".ui-dropdownlist");if(this.isRenderAsApp()){if(this.isNative())return;a=a.children("ul")}var b=a.find(".item.selected");if(b&&b.length>0){var c=a.offset().top,d=a.innerHeight(),e=b.offset().top,f=b.innerHeight(),g=a.scrollTop();c>e?a.scrollTop(g-(c-e)):e>c+d&&a.scrollTop(g+(e-c-d+f))}},q=function(){return this.$el.is(".show-dropdown")},r=function(){if(!q.call(this)){this.dropdownList||(this.dropdownList=t.call(this,$,this.$el),this.dropdownList.on("change",j.bind(this))),this.$el.addClass("show-dropdown").removeClass("show-before");var a=this;if(this.isRenderAsApp())this.isNative()||($("html,body").addClass("ui-noscroll"),setTimeout(function(){$("body").on("tap.combobox",function(b){h.call(a,b)})},50));else{var b=$(window).height()+$("html").scrollTop()+$("body").scrollTop(),c=$(this.$el.attr("opt-scroll"));c&&c.length>0&&(b=c.offset().top+c.outerHeight());var d=this.$el.children(".ui-dropdownlist");b<d.offset().top+d.outerHeight()&&this.$el.addClass("show-before"),this.$el.on("mouseenter",function(b){return g.call(a,b)}),this.$el.on("mouseleave",function(b){return g.call(a,b)}),setTimeout(function(){a.focusOutTimerId&&(clearTimeout(a.focusOutTimerId),a.focusOutTimerId=0)},100)}}},s=function(){$("html,body").removeClass("ui-noscroll"),q.call(this)&&(this.$el.removeClass("show-dropdown"),this.$el.off("mouseenter").off("mouseleave"),$("body").off("tap.combobox"))},t=function(a,b){var c={};return c.data=this.options.data,c.labelField=this.getLabelField(),c.labelFunction=this.getLabelFunction(),c.itemRenderer=this.getItemRenderer(),c.dataAdapter=this.getDataAdapter(),c.dataMapper=this.getDataMapper(),c.multiple=this.isMultiple(),c.selectedIndex=this.getSelectedIndex(),c.selectedId=this.getSelectedId(),c.target=b,VRender.Component.DropdownList.create(c)},u=function(b,c){var d=b("<select size='1'></select>").appendTo(c);if(this.isMultiple()?d.attr("multiple","multiple"):d.append("<option disabled='disabled' selected='selected'>请选择..</option>"),a.isArray(this.options.data)){var e=this,f=0,g=this.getSelectedIndex(!0),h=this.getSelectedId(!0)||null,i=function(a,c){if(c){var d=b("<option></option>").appendTo(a);d.text(e.getDataLabel(c,f)),d.attr("ind",f).data("itemData",c),e.isDataSelected(c,f,g,h)&&d.attr("selected","selected")}f+=1};a.each(this.options.data,function(b){a.isArray(b)?a.each(b,function(a){i(d,a)}):a.isNotBlank(b)&&i(d,b)})}return d};c.register(".ui-combobox",d)}}();